(function(){var socketHosts={"http://staging.imimchat.com":!0,"http://chat.imimchat.com":!0,"http://me.org":!0,"http://localhost":!0,"stage-server.1dxr.com":!0},App={},$=void 0,_=void 0,app=void 0,socket=void 0,jade=void 0,require=function(e,t){var n=require.resolve(e,t||"/"),i=require.modules[n];if(!i)throw Error("Failed to resolve module "+e+", tried "+n);var s=require.cache[n],r=s?s.exports:i();return r};require.paths=[],require.modules={},require.cache={},require.extensions=[".js",".coffee",".json",".jade"],require._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},require.resolve=function(){return function(e,t){function n(e){if(e=a.normalize(e),require.modules[e])return e;for(var t=0;require.extensions.length>t;t++){var n=require.extensions[t];if(require.modules[e+n])return e+n}}function i(e){e=e.replace(/\/+$/,"");var t=a.normalize(e+"/package.json");if(require.modules[t]){var i=require.modules[t](),s=i.browserify;if("object"==typeof s&&s.main){var r=n(a.resolve(e,s.main));if(r)return r}else if("string"==typeof s){var r=n(a.resolve(e,s));if(r)return r}else if(i.main){var r=n(a.resolve(e,i.main));if(r)return r}}return n(e+"/index")}function s(e,t){for(var s=r(t),a=0;s.length>a;a++){var o=s[a],l=n(o+"/"+e);if(l)return l;var c=i(o+"/"+e);if(c)return c}var l=n(e);return l?l:void 0}function r(e){var t;t="/"===e?[""]:a.normalize(e).split("/");for(var n=[],i=t.length-1;i>=0;i--)if("node_modules"!==t[i]){var s=t.slice(0,i+1).join("/")+"/node_modules";n.push(s)}return n}if(t||(t="/"),require._core[e])return e;var a=require.modules.path();t=a.resolve("/",t);var o=t||"/";if(e.match(/^(?:\.\.?\/|\/)/)){var l=n(a.resolve(o,e))||i(a.resolve(o,e));if(l)return l}var c=s(e,o);if(c)return c;throw Error("Cannot find module '"+e+"'")}}(),require.alias=function(e,t){var n=require.modules.path(),i=null;try{i=require.resolve(e+"/package.json","/")}catch(s){i=require.resolve(e,"/")}for(var r=n.dirname(i),a=(Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t})(require.modules),o=0;a.length>o;o++){var l=a[o];if(l.slice(0,r.length+1)===r+"/"){var c=l.slice(r.length);require.modules[t+c]=require.modules[r+c]}else l===r&&(require.modules[t]=require.modules[r])}},function(){var e={},t="undefined"!=typeof window?window:{},n=!1;require.define=function(i,s){!n&&require.modules.__browserify_process&&(e=require.modules.__browserify_process(),n=!0);var r=require._core[i]?"":require.modules.path().dirname(i),a=function(e){var t=require(e,r),n=require.cache[require.resolve(e,r)];return n&&null===n.parent&&(n.parent=o),t};a.resolve=function(e){return require.resolve(e,r)},a.modules=require.modules,a.define=require.define,a.cache=require.cache;var o={id:i,filename:i,exports:{},loaded:!1,parent:null};require.modules[i]=function(){return require.cache[i]=o,s.call(o.exports,a,o,o.exports,r,i,e,t),o.loaded=!0,o.exports}}}(),require.define("path",function(e,t,n,i,s,r){function a(e,t){for(var n=[],i=0;e.length>i;i++)t(e[i],i,e)&&n.push(e[i]);return n}function o(e,t){for(var n=0,i=e.length;i>=0;i--){var s=e[i];"."==s?e.splice(i,1):".."===s?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var l=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){for(var e="",t=!1,n=arguments.length;n>=-1&&!t;n--){var i=n>=0?arguments[n]:r.cwd();"string"==typeof i&&i&&(e=i+"/"+e,t="/"===i.charAt(0))}return e=o(a(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},n.normalize=function(e){var t="/"===e.charAt(0),n="/"===e.slice(-1);return e=o(a(e.split("/"),function(e){return!!e}),!t).join("/"),e||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(a(e,function(e){return e&&"string"==typeof e}).join("/"))},n.dirname=function(e){var t=l.exec(e)[1]||"",n=!1;return t?1===t.length||n&&3>=t.length&&":"===t.charAt(1)?t:t.substring(0,t.length-1):"."},n.basename=function(e,t){var n=l.exec(e)[2]||"";return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return l.exec(e)[3]||""},n.relative=function(e,t){function i(e){for(var t=0;e.length>t&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var s=i(e.split("/")),r=i(t.split("/")),a=Math.min(s.length,r.length),o=a,l=0;a>l;l++)if(s[l]!==r[l]){o=l;break}for(var c=[],l=o;s.length>l;l++)c.push("..");return c=c.concat(r.slice(o)),c.join("/")}}),require.define("__browserify_process",function(e,t,n,i,s,r){var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){if(e.source===window&&"browserify-tick"===e.data&&(e.stopPropagation(),n.length>0)){var t=n.shift();t()}},!0),function(e){n.push(e),window.postMessage("browserify-tick","*")}}return function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.binding=function(t){if("evals"===t)return e("vm");throw Error("No such module. (Possibly not yet loaded)")},function(){var t,n="/";r.cwd=function(){return n},r.chdir=function(i){t||(t=e("path")),n=t.resolve(i,n)}}()}),require.define("/client/lib/lightApp.js",function(e){var t,n=!1;App=function(e){t=e,t.layout=t.layout?new t.layout:new App.Layout;var n=App.Router.extend({},t);app=new n,-1!=navigator.appName.indexOf("Internet Explorer")?App.history.start():App.history.start({pushState:!0})},_=e("underscore"),$=App.$=e("./jquery"),App.Class=e("../../server/lib/class"),App.Events=e("../../server/lib/events"),App.View=e("./view"),App.Layout=e("./layout"),App.Model=e("./lightModel"),App.Router=e("./router"),jade=e("../../node_modules/jade/lib/runtime.js"),jade["void"]=function(e){return e},window.console||(window.console={log:function(e){$("body").prepend("<p>"+e+"</p>")}});var i=e("../../node_modules/socket.io/node_modules/socket.io-client/dist/socket.io.min.js");i.transports=["xhr-polling"],Date.now(),navigator.appName.indexOf("Internet Explorer")>-1;var s=window.location.protocol+"//"+window.location.host;socket=i.connect(s,{transports:["xhr-polling"],resource:"worker"+window.workerID+"/socket.io"}),socket.on("disconnect",function(){socket=i.connect(s,{resourece:"worker"+window.workerID+"/socket.io"})}),socket.on("error",function(e){throw Error(e)}),socket.on("connect",function(){var e={url:window.location.pathname.match(/^\/[\w-]*/)[0],fullURL:window.location.pathname},i=setInterval(function(){socket.emit("init",e,function(e,t){s=t})},50);socket.once("init",function(e){clearInterval(i),t.settings=e,n||(app.screens&&app.screens.models.forEach(function(e){app.bindSocket(e)}),n=!0,app.trigger("ready"))});var s})}),require.define("/node_modules/underscore/package.json",function(e,t){t.exports={main:"underscore.js"}}),require.define("/node_modules/underscore/underscore.js",function(e,t,n){(function(){var e=this,i=e._,s={},r=Array.prototype,a=Object.prototype,o=Function.prototype,l=r.push,c=r.slice,u=r.concat,p=a.toString,d=a.hasOwnProperty,h=r.forEach,f=r.map,v=r.reduce,m=r.reduceRight,g=r.filter,y=r.every,b=r.some,w=r.indexOf,x=r.lastIndexOf,k=Array.isArray,_=Object.keys,S=o.bind,C=function(e){return e instanceof C?e:this instanceof C?(this._wrapped=e,void 0):new C(e)};n!==void 0?(t!==void 0&&t.exports&&(n=t.exports=C),n._=C):e._=C,C.VERSION="1.6.0";var j=C.each=C.forEach=function(e,t,n){if(null==e)return e;if(h&&e.forEach===h)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,r=e.length;r>i;i++)if(t.call(n,e[i],i,e)===s)return}else for(var a=C.keys(e),i=0,r=a.length;r>i;i++)if(t.call(n,e[a[i]],a[i],e)===s)return;return e};C.map=C.collect=function(e,t,n){var i=[];return null==e?i:f&&e.map===f?e.map(t,n):(j(e,function(e,s,r){i.push(t.call(n,e,s,r))}),i)};var T="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(e,t,n,i){var s=arguments.length>2;if(null==e&&(e=[]),v&&e.reduce===v)return i&&(t=C.bind(t,i)),s?e.reduce(t,n):e.reduce(t);if(j(e,function(e,r,a){s?n=t.call(i,n,e,r,a):(n=e,s=!0)}),!s)throw new TypeError(T);return n},C.reduceRight=C.foldr=function(e,t,n,i){var s=arguments.length>2;if(null==e&&(e=[]),m&&e.reduceRight===m)return i&&(t=C.bind(t,i)),s?e.reduceRight(t,n):e.reduceRight(t);var r=e.length;if(r!==+r){var a=C.keys(e);r=a.length}if(j(e,function(o,l,c){l=a?a[--r]:--r,s?n=t.call(i,n,e[l],l,c):(n=e[l],s=!0)}),!s)throw new TypeError(T);return n},C.find=C.detect=function(e,t,n){var i;return E(e,function(e,s,r){return t.call(n,e,s,r)?(i=e,!0):void 0}),i},C.filter=C.select=function(e,t,n){var i=[];return null==e?i:g&&e.filter===g?e.filter(t,n):(j(e,function(e,s,r){t.call(n,e,s,r)&&i.push(e)}),i)},C.reject=function(e,t,n){return C.filter(e,function(e,i,s){return!t.call(n,e,i,s)},n)},C.every=C.all=function(e,t,n){t||(t=C.identity);var i=!0;return null==e?i:y&&e.every===y?e.every(t,n):(j(e,function(e,r,a){return(i=i&&t.call(n,e,r,a))?void 0:s}),!!i)};var E=C.some=C.any=function(e,t,n){t||(t=C.identity);var i=!1;return null==e?i:b&&e.some===b?e.some(t,n):(j(e,function(e,r,a){return i||(i=t.call(n,e,r,a))?s:void 0}),!!i)};C.contains=C.include=function(e,t){return null==e?!1:w&&e.indexOf===w?-1!=e.indexOf(t):E(e,function(e){return e===t})},C.invoke=function(e,t){var n=c.call(arguments,2),i=C.isFunction(t);return C.map(e,function(e){return(i?t:e[t]).apply(e,n)})},C.pluck=function(e,t){return C.map(e,C.property(t))},C.where=function(e,t){return C.filter(e,C.matches(t))},C.findWhere=function(e,t){return C.find(e,C.matches(t))},C.max=function(e,t,n){if(!t&&C.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);var i=-1/0,s=-1/0;return j(e,function(e,r,a){var o=t?t.call(n,e,r,a):e;o>s&&(i=e,s=o)}),i},C.min=function(e,t,n){if(!t&&C.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);var i=1/0,s=1/0;return j(e,function(e,r,a){var o=t?t.call(n,e,r,a):e;s>o&&(i=e,s=o)}),i},C.shuffle=function(e){var t,n=0,i=[];return j(e,function(e){t=C.random(n++),i[n-1]=i[t],i[t]=e}),i},C.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=C.values(e)),e[C.random(e.length-1)]):C.shuffle(e).slice(0,Math.max(0,t))};var $=function(e){return null==e?C.identity:C.isFunction(e)?e:C.property(e)};C.sortBy=function(e,t,n){return t=$(t),C.pluck(C.map(e,function(e,i,s){return{value:e,index:i,criteria:t.call(n,e,i,s)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var N=function(e){return function(t,n,i){var s={};return n=$(n),j(t,function(r,a){var o=n.call(i,r,a,t);e(s,o,r)}),s}};C.groupBy=N(function(e,t,n){C.has(e,t)?e[t].push(n):e[t]=[n]}),C.indexBy=N(function(e,t,n){e[t]=n}),C.countBy=N(function(e,t){C.has(e,t)?e[t]++:e[t]=1}),C.sortedIndex=function(e,t,n,i){n=$(n);for(var s=n.call(i,t),r=0,a=e.length;a>r;){var o=r+a>>>1;s>n.call(i,e[o])?r=o+1:a=o}return r},C.toArray=function(e){return e?C.isArray(e)?c.call(e):e.length===+e.length?C.map(e,C.identity):C.values(e):[]},C.size=function(e){return null==e?0:e.length===+e.length?e.length:C.keys(e).length},C.first=C.head=C.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:c.call(e,0,t)},C.initial=function(e,t,n){return c.call(e,0,e.length-(null==t||n?1:t))},C.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:c.call(e,Math.max(e.length-t,0))},C.rest=C.tail=C.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},C.compact=function(e){return C.filter(e,C.identity)};var A=function(e,t,n){return t&&C.every(e,C.isArray)?u.apply(n,e):(j(e,function(e){C.isArray(e)||C.isArguments(e)?t?l.apply(n,e):A(e,t,n):n.push(e)}),n)};C.flatten=function(e,t){return A(e,t,[])},C.without=function(e){return C.difference(e,c.call(arguments,1))},C.partition=function(e,t){var n=[],i=[];return j(e,function(e){(t(e)?n:i).push(e)}),[n,i]},C.uniq=C.unique=function(e,t,n,i){C.isFunction(t)&&(i=n,n=t,t=!1);var s=n?C.map(e,n,i):e,r=[],a=[];return j(s,function(n,i){(t?i&&a[a.length-1]===n:C.contains(a,n))||(a.push(n),r.push(e[i]))}),r},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(e){var t=c.call(arguments,1);return C.filter(C.uniq(e),function(e){return C.every(t,function(t){return C.contains(t,e)})})},C.difference=function(e){var t=u.apply(r,c.call(arguments,1));return C.filter(e,function(e){return!C.contains(t,e)})},C.zip=function(){for(var e=C.max(C.pluck(arguments,"length").concat(0)),t=Array(e),n=0;e>n;n++)t[n]=C.pluck(arguments,""+n);return t},C.object=function(e,t){if(null==e)return{};for(var n={},i=0,s=e.length;s>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},C.indexOf=function(e,t,n){if(null==e)return-1;var i=0,s=e.length;if(n){if("number"!=typeof n)return i=C.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,s+n):n}if(w&&e.indexOf===w)return e.indexOf(t,n);for(;s>i;i++)if(e[i]===t)return i;return-1},C.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(x&&e.lastIndexOf===x)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var s=i?n:e.length;s--;)if(e[s]===t)return s;return-1},C.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),s=0,r=Array(i);i>s;)r[s++]=e,e+=n;return r};var D=function(){};C.bind=function(e,t){var n,i;if(S&&e.bind===S)return S.apply(e,c.call(arguments,1));if(!C.isFunction(e))throw new TypeError;return n=c.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(c.call(arguments)));D.prototype=e.prototype;var s=new D;D.prototype=null;var r=e.apply(s,n.concat(c.call(arguments)));return Object(r)===r?r:s}},C.partial=function(e){var t=c.call(arguments,1);return function(){for(var n=0,i=t.slice(),s=0,r=i.length;r>s;s++)i[s]===C&&(i[s]=arguments[n++]);for(;arguments.length>n;)i.push(arguments[n++]);return e.apply(this,i)}},C.bindAll=function(e){var t=c.call(arguments,1);if(0===t.length)throw Error("bindAll must be passed function names");return j(t,function(t){e[t]=C.bind(e[t],e)}),e},C.memoize=function(e,t){var n={};return t||(t=C.identity),function(){var i=t.apply(this,arguments);return C.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},C.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},C.defer=function(e){return C.delay.apply(C,[e,1].concat(c.call(arguments,1)))},C.throttle=function(e,t,n){var i,s,r,a=null,o=0;n||(n={});var l=function(){o=n.leading===!1?0:C.now(),a=null,r=e.apply(i,s),i=s=null};return function(){var c=C.now();o||n.leading!==!1||(o=c);var u=t-(c-o);return i=this,s=arguments,0>=u?(clearTimeout(a),a=null,o=c,r=e.apply(i,s),i=s=null):a||n.trailing===!1||(a=setTimeout(l,u)),r}},C.debounce=function(e,t,n){var i,s,r,a,o,l=function(){var c=C.now()-a;t>c?i=setTimeout(l,t-c):(i=null,n||(o=e.apply(r,s),r=s=null))};return function(){r=this,s=arguments,a=C.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(o=e.apply(r,s),r=s=null),o}},C.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},C.wrap=function(e,t){return C.partial(t,e)},C.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},C.after=function(e,t){return function(){return 1>--e?t.apply(this,arguments):void 0}},C.keys=function(e){if(!C.isObject(e))return[];if(_)return _(e);var t=[];for(var n in e)C.has(e,n)&&t.push(n);return t},C.values=function(e){for(var t=C.keys(e),n=t.length,i=Array(n),s=0;n>s;s++)i[s]=e[t[s]];return i},C.pairs=function(e){for(var t=C.keys(e),n=t.length,i=Array(n),s=0;n>s;s++)i[s]=[t[s],e[t[s]]];return i},C.invert=function(e){for(var t={},n=C.keys(e),i=0,s=n.length;s>i;i++)t[e[n[i]]]=n[i];return t},C.functions=C.methods=function(e){var t=[];for(var n in e)C.isFunction(e[n])&&t.push(n);return t.sort()},C.extend=function(e){return j(c.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},C.pick=function(e){var t={},n=u.apply(r,c.call(arguments,1));return j(n,function(n){n in e&&(t[n]=e[n])}),t},C.omit=function(e){var t={},n=u.apply(r,c.call(arguments,1));for(var i in e)C.contains(n,i)||(t[i]=e[i]);return t},C.defaults=function(e){return j(c.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},C.clone=function(e){return C.isObject(e)?C.isArray(e)?e.slice():C.extend({},e):e},C.tap=function(e,t){return t(e),e};var P=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof C&&(e=e._wrapped),t instanceof C&&(t=t._wrapped);var s=p.call(e);if(s!=p.call(t))return!1;switch(s){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var r=n.length;r--;)if(n[r]==e)return i[r]==t;var a=e.constructor,o=t.constructor;if(a!==o&&!(C.isFunction(a)&&a instanceof a&&C.isFunction(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),i.push(t);var l=0,c=!0;if("[object Array]"==s){if(l=e.length,c=l==t.length)for(;l--&&(c=P(e[l],t[l],n,i)););}else{for(var u in e)if(C.has(e,u)&&(l++,!(c=C.has(t,u)&&P(e[u],t[u],n,i))))break;if(c){for(u in t)if(C.has(t,u)&&!l--)break;c=!l}}return n.pop(),i.pop(),c};C.isEqual=function(e,t){return P(e,t,[],[])},C.isEmpty=function(e){if(null==e)return!0;if(C.isArray(e)||C.isString(e))return 0===e.length;for(var t in e)if(C.has(e,t))return!1;return!0},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.isArray=k||function(e){return"[object Array]"==p.call(e)},C.isObject=function(e){return e===Object(e)},j(["Arguments","Function","String","Number","Date","RegExp"],function(e){C["is"+e]=function(t){return p.call(t)=="[object "+e+"]"}}),C.isArguments(arguments)||(C.isArguments=function(e){return!(!e||!C.has(e,"callee"))}),C.isFunction=function(e){return"function"==typeof e},C.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},C.isNaN=function(e){return C.isNumber(e)&&e!=+e},C.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==p.call(e)},C.isNull=function(e){return null===e},C.isUndefined=function(e){return void 0===e},C.has=function(e,t){return d.call(e,t)},C.noConflict=function(){return e._=i,this},C.identity=function(e){return e},C.constant=function(e){return function(){return e}},C.property=function(e){return function(t){return t[e]}},C.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},C.times=function(e,t,n){for(var i=Array(Math.max(0,e)),s=0;e>s;s++)i[s]=t.call(n,s);return i},C.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},C.now=Date.now||function(){return(new Date).getTime()};var O={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};O.unescape=C.invert(O.escape);var I={escape:RegExp("["+C.keys(O.escape).join("")+"]","g"),unescape:RegExp("("+C.keys(O.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(e){C[e]=function(t){return null==t?"":(""+t).replace(I[e],function(t){return O[e][t]})}}),C.result=function(e,t){if(null==e)return void 0;var n=e[t];return C.isFunction(n)?n.call(e):n},C.mixin=function(e){j(C.functions(e),function(t){var n=C[t]=e[t];C.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),W.call(this,n.apply(C,e))}})};var M=0;C.uniqueId=function(e){var t=++M+"";return e?e+t:t},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(e,t,n){var i;n=C.defaults({},n,C.templateSettings);var s=RegExp([(n.escape||F).source,(n.interpolate||F).source,(n.evaluate||F).source].join("|")+"|$","g"),r=0,a="__p+='";e.replace(s,function(t,n,i,s,o){return a+=e.slice(r,o).replace(L,function(e){return"\\"+B[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),s&&(a+="';\n"+s+"\n__p+='"),r=o+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=Function(n.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return i(t,C);var l=function(e){return i.call(this,e,C)};return l.source="function("+(n.variable||"obj")+"){\n"+a+"}",l},C.chain=function(e){return C(e).chain()};var W=function(e){return this._chain?C(e).chain():e};C.mixin(C),j(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];C.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],W.call(this,n)}}),j(["concat","join","slice"],function(e){var t=r[e];C.prototype[e]=function(){return W.call(this,t.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return C})}).call(this)}),require.define("/client/lib/jquery.js",function(e,t){(function(e,n){function i(e){var t=e.length,n=pt.type(e);return pt.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function s(e){var t=jt[e]={};return pt.each(e.match(ht)||[],function(e,n){t[n]=!0}),t}function r(e,t,i,s){if(pt.acceptData(e)){var r,a,o=pt.expando,l=e.nodeType,c=l?pt.cache:e,u=l?e[o]:e[o]&&o;if(u&&c[u]&&(s||c[u].data)||i!==n||"string"!=typeof t)return u||(u=l?e[o]=nt.pop()||pt.guid++:o),c[u]||(c[u]=l?{}:{toJSON:pt.noop}),("object"==typeof t||"function"==typeof t)&&(s?c[u]=pt.extend(c[u],t):c[u].data=pt.extend(c[u].data,t)),a=c[u],s||(a.data||(a.data={}),a=a.data),i!==n&&(a[pt.camelCase(t)]=i),"string"==typeof t?(r=a[t],null==r&&(r=a[pt.camelCase(t)])):r=a,r}}function a(e,t,n){if(pt.acceptData(e)){var i,s,r=e.nodeType,a=r?pt.cache:e,o=r?e[pt.expando]:pt.expando;if(a[o]){if(t&&(i=n?a[o]:a[o].data)){pt.isArray(t)?t=t.concat(pt.map(t,pt.camelCase)):t in i?t=[t]:(t=pt.camelCase(t),t=t in i?[t]:t.split(" ")),s=t.length;for(;s--;)delete i[t[s]];if(n?!l(i):!pt.isEmptyObject(i))return}(n||(delete a[o].data,l(a[o])))&&(r?pt.cleanData([e],!0):pt.support.deleteExpando||a!=a.window?delete a[o]:a[o]=null)}}}function o(e,t,i){if(i===n&&1===e.nodeType){var s="data-"+t.replace(Et,"-$1").toLowerCase();if(i=e.getAttribute(s),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Tt.test(i)?pt.parseJSON(i):i}catch(r){}pt.data(e,t,i)}else i=n}return i}function l(e){var t;for(t in e)if(("data"!==t||!pt.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function c(){return!0}function u(){return!1}function p(){try{return J.activeElement}catch(e){}}function d(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function h(e,t,n){if(pt.isFunction(t))return pt.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return pt.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Ht.test(t))return pt.filter(t,e,n);t=pt.filter(t,e)}return pt.grep(e,function(e){return pt.inArray(e,t)>=0!==n})}function f(e){var t=Zt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function v(e,t){return pt.nodeName(e,"table")&&pt.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function m(e){return e.type=(null!==pt.find.attr(e,"type"))+"/"+e.type,e}function g(e){var t=an.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function y(e,t){for(var n,i=0;null!=(n=e[i]);i++)pt._data(n,"globalEval",!t||pt._data(t[i],"globalEval"))}function b(e,t){if(1===t.nodeType&&pt.hasData(e)){var n,i,s,r=pt._data(e),a=pt._data(t,r),o=r.events;if(o){delete a.handle,a.events={};for(n in o)for(i=0,s=o[n].length;s>i;i++)pt.event.add(t,n,o[n][i])}a.data&&(a.data=pt.extend({},a.data))}}function w(e,t){var n,i,s;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!pt.support.noCloneEvent&&t[pt.expando]){s=pt._data(t);for(i in s.events)pt.removeEvent(t,i,s.handle);t.removeAttribute(pt.expando)}"script"===n&&t.text!==e.text?(m(t).text=e.text,g(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),pt.support.html5Clone&&e.innerHTML&&!pt.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&nn.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function x(e,t){var i,s,r=0,a=typeof e.getElementsByTagName!==Y?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Y?e.querySelectorAll(t||"*"):n;if(!a)for(a=[],i=e.childNodes||e;null!=(s=i[r]);r++)!t||pt.nodeName(s,t)?a.push(s):pt.merge(a,x(s,t));return t===n||t&&pt.nodeName(e,t)?pt.merge([e],a):a}function k(e){nn.test(e.type)&&(e.defaultChecked=e.checked)}function _(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,s=jn.length;s--;)if(t=jn[s]+n,t in e)return t;return i}function S(e,t){return e=t||e,"none"===pt.css(e,"display")||!pt.contains(e.ownerDocument,e)}function C(e,t){for(var n,i,s,r=[],a=0,o=e.length;o>a;a++)i=e[a],i.style&&(r[a]=pt._data(i,"olddisplay"),n=i.style.display,t?(r[a]||"none"!==n||(i.style.display=""),""===i.style.display&&S(i)&&(r[a]=pt._data(i,"olddisplay",$(i.nodeName)))):r[a]||(s=S(i),(n&&"none"!==n||!s)&&pt._data(i,"olddisplay",s?n:pt.css(i,"display"))));for(a=0;o>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[a]||"":"none"));return e}function j(e,t,n){var i=bn.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function T(e,t,n,i,s){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>r;r+=2)"margin"===n&&(a+=pt.css(e,n+Cn[r],!0,s)),i?("content"===n&&(a-=pt.css(e,"padding"+Cn[r],!0,s)),"margin"!==n&&(a-=pt.css(e,"border"+Cn[r]+"Width",!0,s))):(a+=pt.css(e,"padding"+Cn[r],!0,s),"padding"!==n&&(a+=pt.css(e,"border"+Cn[r]+"Width",!0,s)));return a}function E(e,t,n){var i=!0,s="width"===t?e.offsetWidth:e.offsetHeight,r=dn(e),a=pt.support.boxSizing&&"border-box"===pt.css(e,"boxSizing",!1,r);if(0>=s||null==s){if(s=hn(e,t,r),(0>s||null==s)&&(s=e.style[t]),wn.test(s))return s;i=a&&(pt.support.boxSizingReliable||s===e.style[t]),s=parseFloat(s)||0}return s+T(e,t,n||(a?"border":"content"),i,r)+"px"}function $(e){var t=J,n=kn[e];return n||(n=N(e,t),"none"!==n&&n||(pn=(pn||pt("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(pn[0].contentWindow||pn[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=N(e,t),pn.detach()),kn[e]=n),n}function N(e,t){var n=pt(t.createElement(e)).appendTo(t.body),i=pt.css(n[0],"display");return n.remove(),i}function A(e,t,n,i){var s;if(pt.isArray(t))pt.each(t,function(t,s){n||En.test(e)?i(e,s):A(e+"["+("object"==typeof s?t:"")+"]",s,n,i)});else if(n||"object"!==pt.type(t))i(e,t);else for(s in t)A(e+"["+s+"]",t[s],n,i)}function D(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,s=0,r=t.toLowerCase().match(ht)||[];if(pt.isFunction(n))for(;i=r[s++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function P(e,t,i,s){function r(l){var c;return a[l]=!0,pt.each(e[l]||[],function(e,l){var u=l(t,i,s);return"string"!=typeof u||o||a[u]?o?!(c=u):n:(t.dataTypes.unshift(u),r(u),!1)}),c}var a={},o=e===Un;return r(t.dataTypes[0])||!a["*"]&&r("*")}function O(e,t){var i,s,r=pt.ajaxSettings.flatOptions||{};for(s in t)t[s]!==n&&((r[s]?e:i||(i={}))[s]=t[s]);return i&&pt.extend(!0,e,i),e}function I(e,t,i){for(var s,r,a,o,l=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),r===n&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in l)if(l[o]&&l[o].test(r)){c.unshift(o);break}if(c[0]in i)a=c[0];else{for(o in i){if(!c[0]||e.converters[o+" "+c[0]]){a=o;break}s||(s=o)}a=a||s}return a?(a!==c[0]&&c.unshift(a),i[a]):n}function M(e,t,n,i){var s,r,a,o,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(r=u.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(a=c[l+" "+r]||c["* "+r],!a)for(s in c)if(o=s.split(" "),o[1]===r&&(a=c[l+" "+o[0]]||c["* "+o[0]])){a===!0?a=c[s]:c[s]!==!0&&(r=o[0],u.unshift(o[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(p){return{state:"parsererror",error:a?p:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}function F(){try{return new e.XMLHttpRequest}catch(t){}}function B(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function L(){return setTimeout(function(){ei=n}),ei=pt.now()}function W(e,t,n){for(var i,s=(ai[t]||[]).concat(ai["*"]),r=0,a=s.length;a>r;r++)if(i=s[r].call(n,t,e))return i}function q(e,t,n){var i,s,r=0,a=ri.length,o=pt.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=ei||L(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,r=1-i,a=0,l=c.tweens.length;l>a;a++)c.tweens[a].run(r);return o.notifyWith(e,[c,r,n]),1>r&&l?n:(o.resolveWith(e,[c]),!1)},c=o.promise({elem:e,props:pt.extend({},t),opts:pt.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:ei||L(),duration:n.duration,tweens:[],createTween:function(t,n){var i=pt.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(s)return this;for(s=!0;i>n;n++)c.tweens[n].run(1);return t?o.resolveWith(e,[c,t]):o.rejectWith(e,[c,t]),this}}),u=c.props;for(R(u,c.opts.specialEasing);a>r;r++)if(i=ri[r].call(c,e,u,c.opts))return i;return pt.map(u,W,c),pt.isFunction(c.opts.start)&&c.opts.start.call(e,c),pt.fx.timer(pt.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function R(e,t){var n,i,s,r,a;for(n in e)if(i=pt.camelCase(n),s=t[i],r=e[n],pt.isArray(r)&&(s=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),a=pt.cssHooks[i],a&&"expand"in a){r=a.expand(r),delete e[i];for(n in r)n in e||(e[n]=r[n],t[n]=s)}else t[i]=s}function H(e,t,n){var i,s,r,a,o,l,c=this,u={},p=e.style,d=e.nodeType&&S(e),h=pt._data(e,"fxshow");n.queue||(o=pt._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=function(){o.unqueued||l()}),o.unqueued++,c.always(function(){c.always(function(){o.unqueued--,pt.queue(e,"fx").length||o.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===pt.css(e,"display")&&"none"===pt.css(e,"float")&&(pt.support.inlineBlockNeedsLayout&&"inline"!==$(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",pt.support.shrinkWrapBlocks||c.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(s=t[i],ni.exec(s)){if(delete t[i],r=r||"toggle"===s,s===(d?"hide":"show"))continue;u[i]=h&&h[i]||pt.style(e,i)}if(!pt.isEmptyObject(u)){h?"hidden"in h&&(d=h.hidden):h=pt._data(e,"fxshow",{}),r&&(h.hidden=!d),d?pt(e).show():c.done(function(){pt(e).hide()}),c.done(function(){var t;pt._removeData(e,"fxshow");for(t in u)pt.style(e,t,u[t])});for(i in u)a=W(d?h[i]:0,i,c),i in h||(h[i]=a.start,d&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function z(e,t,n,i,s){return new z.prototype.init(e,t,n,i,s)}function U(e,t){var n,i={height:e},s=0;for(t=t?1:0;4>s;s+=2-t)n=Cn[s],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function X(e){return pt.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1
}var Z,V,Y=typeof n,G=e.location,J=e.document,Q=J.documentElement,K=e.jQuery,et=e.$,tt={},nt=[],it="1.10.2",st=nt.concat,rt=nt.push,at=nt.slice,ot=nt.indexOf,lt=tt.toString,ct=tt.hasOwnProperty,ut=it.trim,pt=function(e,t){return new pt.fn.init(e,t,V)},dt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ht=/\S+/g,ft=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,vt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,mt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,gt=/^[\],:{}\s]*$/,yt=/(?:^|:|,)(?:\s*\[)+/g,bt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,wt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,xt=/^-ms-/,kt=/-([\da-z])/gi,_t=function(e,t){return t.toUpperCase()},St=function(e){(J.addEventListener||"load"===e.type||"complete"===J.readyState)&&(Ct(),pt.ready())},Ct=function(){J.addEventListener?(J.removeEventListener("DOMContentLoaded",St,!1),e.removeEventListener("load",St,!1)):(J.detachEvent("onreadystatechange",St),e.detachEvent("onload",St))};pt.fn=pt.prototype={jquery:it,constructor:pt,init:function(e,t,i){var s,r;if(!e)return this;if("string"==typeof e){if(s="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:vt.exec(e),!s||!s[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(s[1]){if(t=t instanceof pt?t[0]:t,pt.merge(this,pt.parseHTML(s[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),mt.test(s[1])&&pt.isPlainObject(t))for(s in t)pt.isFunction(this[s])?this[s](t[s]):this.attr(s,t[s]);return this}if(r=J.getElementById(s[2]),r&&r.parentNode){if(r.id!==s[2])return i.find(e);this.length=1,this[0]=r}return this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):pt.isFunction(e)?i.ready(e):(e.selector!==n&&(this.selector=e.selector,this.context=e.context),pt.makeArray(e,this))},selector:"",length:0,toArray:function(){return at.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=pt.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return pt.each(this,e,t)},ready:function(e){return pt.ready.promise().done(e),this},slice:function(){return this.pushStack(at.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(pt.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:rt,sort:[].sort,splice:[].splice},pt.fn.init.prototype=pt.fn,pt.extend=pt.fn.extend=function(){var e,t,i,s,r,a,o=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[1]||{},l=2),"object"==typeof o||pt.isFunction(o)||(o={}),c===l&&(o=this,--l);c>l;l++)if(null!=(r=arguments[l]))for(s in r)e=o[s],i=r[s],o!==i&&(u&&i&&(pt.isPlainObject(i)||(t=pt.isArray(i)))?(t?(t=!1,a=e&&pt.isArray(e)?e:[]):a=e&&pt.isPlainObject(e)?e:{},o[s]=pt.extend(u,a,i)):i!==n&&(o[s]=i));return o},pt.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===pt&&(e.$=et),t&&e.jQuery===pt&&(e.jQuery=K),pt},isReady:!1,readyWait:1,holdReady:function(e){e?pt.readyWait++:pt.ready(!0)},ready:function(e){if(e===!0?!--pt.readyWait:!pt.isReady){if(!J.body)return setTimeout(pt.ready);pt.isReady=!0,e!==!0&&--pt.readyWait>0||(Z.resolveWith(J,[pt]),pt.fn.trigger&&pt(J).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===pt.type(e)},isArray:Array.isArray||function(e){return"array"===pt.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?tt[lt.call(e)]||"object":typeof e},isPlainObject:function(e){var t;if(!e||"object"!==pt.type(e)||e.nodeType||pt.isWindow(e))return!1;try{if(e.constructor&&!ct.call(e,"constructor")&&!ct.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(pt.support.ownLast)for(t in e)return ct.call(e,t);for(t in e);return t===n||ct.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var i=mt.exec(e),s=!n&&[];return i?[t.createElement(i[1])]:(i=pt.buildFragment([e],t,s),s&&pt(s).remove(),pt.merge([],i.childNodes))},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=pt.trim(t),t&&gt.test(t.replace(bt,"@").replace(wt,"]").replace(yt,"")))?Function("return "+t)():(pt.error("Invalid JSON: "+t),n)},parseXML:function(t){var i,s;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(s=new DOMParser,i=s.parseFromString(t,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(t))}catch(r){i=n}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||pt.error("Invalid XML: "+t),i},noop:function(){},globalEval:function(t){t&&pt.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(xt,"ms-").replace(kt,_t)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var s,r=0,a=e.length,o=i(e);if(n){if(o)for(;a>r&&(s=t.apply(e[r],n),s!==!1);r++);else for(r in e)if(s=t.apply(e[r],n),s===!1)break}else if(o)for(;a>r&&(s=t.call(e[r],r,e[r]),s!==!1);r++);else for(r in e)if(s=t.call(e[r],r,e[r]),s===!1)break;return e},trim:ut&&!ut.call("﻿ ")?function(e){return null==e?"":ut.call(e)}:function(e){return null==e?"":(e+"").replace(ft,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?pt.merge(n,"string"==typeof e?[e]:e):rt.call(n,e)),n},inArray:function(e,t,n){var i;if(t){if(ot)return ot.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){var i=t.length,s=e.length,r=0;if("number"==typeof i)for(;i>r;r++)e[s++]=t[r];else for(;t[r]!==n;)e[s++]=t[r++];return e.length=s,e},grep:function(e,t,n){var i,s=[],r=0,a=e.length;for(n=!!n;a>r;r++)i=!!t(e[r],r),n!==i&&s.push(e[r]);return s},map:function(e,t,n){var s,r=0,a=e.length,o=i(e),l=[];if(o)for(;a>r;r++)s=t(e[r],r,n),null!=s&&(l[l.length]=s);else for(r in e)s=t(e[r],r,n),null!=s&&(l[l.length]=s);return st.apply([],l)},guid:1,proxy:function(e,t){var i,s,r;return"string"==typeof t&&(r=e[t],t=e,e=r),pt.isFunction(e)?(i=at.call(arguments,2),s=function(){return e.apply(t||this,i.concat(at.call(arguments)))},s.guid=e.guid=e.guid||pt.guid++,s):n},access:function(e,t,i,s,r,a,o){var l=0,c=e.length,u=null==i;if("object"===pt.type(i)){r=!0;for(l in i)pt.access(e,t,l,i[l],!0,a,o)}else if(s!==n&&(r=!0,pt.isFunction(s)||(o=!0),u&&(o?(t.call(e,s),t=null):(u=t,t=function(e,t,n){return u.call(pt(e),n)})),t))for(;c>l;l++)t(e[l],i,o?s:s.call(e[l],l,t(e[l],i)));return r?e:u?t.call(e):c?t(e[0],i):a},now:function(){return(new Date).getTime()},swap:function(e,t,n,i){var s,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];s=n.apply(e,i||[]);for(r in t)e.style[r]=a[r];return s}}),pt.ready.promise=function(t){if(!Z)if(Z=pt.Deferred(),"complete"===J.readyState)setTimeout(pt.ready);else if(J.addEventListener)J.addEventListener("DOMContentLoaded",St,!1),e.addEventListener("load",St,!1);else{J.attachEvent("onreadystatechange",St),e.attachEvent("onload",St);var n=!1;try{n=null==e.frameElement&&J.documentElement}catch(i){}n&&n.doScroll&&function s(){if(!pt.isReady){try{n.doScroll("left")}catch(e){return setTimeout(s,50)}Ct(),pt.ready()}}()}return Z.promise(t)},pt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){tt["[object "+t+"]"]=t.toLowerCase()}),V=pt(J),function(e,t){function n(e,t,n,i){var s,r,a,o,l,c,u,p,f,v;if((t?t.ownerDocument||t:W)!==D&&A(t),t=t||D,n=n||[],!e||"string"!=typeof e)return n;if(1!==(o=t.nodeType)&&9!==o)return[];if(O&&!i){if(s=bt.exec(e))if(a=s[1]){if(9===o){if(r=t.getElementById(a),!r||!r.parentNode)return n;if(r.id===a)return n.push(r),n}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(a))&&B(t,r)&&r.id===a)return n.push(r),n}else{if(s[2])return et.apply(n,t.getElementsByTagName(e)),n;if((a=s[3])&&_.getElementsByClassName&&t.getElementsByClassName)return et.apply(n,t.getElementsByClassName(a)),n}if(_.qsa&&(!I||!I.test(e))){if(p=u=L,f=t,v=9===o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(c=d(e),(u=t.getAttribute("id"))?p=u.replace(kt,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+h(c[l]);f=ht.test(e)&&t.parentNode||t,v=c.join(",")}if(v)try{return et.apply(n,f.querySelectorAll(v)),n}catch(m){}finally{u||t.removeAttribute("id")}}}return x(e.replace(ct,"$1"),t,n,i)}function i(){function e(n,i){return t.push(n+=" ")>C.cacheLength&&delete e[t.shift()],e[n]=i}var t=[];return e}function s(e){return e[L]=!0,e}function r(e){var t=D.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),i=e.length;i--;)C.attrHandle[n[i]]=t}function o(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function l(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return s(function(t){return t=+t,s(function(n,i){for(var s,r=e([],n.length,t),a=r.length;a--;)n[s=r[a]]&&(n[s]=!(i[s]=n[s]))})})}function p(){}function d(e,t){var i,s,r,a,o,l,c,u=z[e+" "];if(u)return t?0:u.slice(0);for(o=e,l=[],c=C.preFilter;o;){(!i||(s=ut.exec(o)))&&(s&&(o=o.slice(s[0].length)||o),l.push(r=[])),i=!1,(s=dt.exec(o))&&(i=s.shift(),r.push({value:i,type:s[0].replace(ct," ")}),o=o.slice(i.length));for(a in C.filter)!(s=gt[a].exec(o))||c[a]&&!(s=c[a](s))||(i=s.shift(),r.push({value:i,type:a,matches:s}),o=o.slice(i.length));if(!i)break}return t?o.length:o?n.error(e):z(e,l).slice(0)}function h(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,s=n&&"parentNode"===i,r=R++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,r)}:function(t,n,a){var o,l,c,u=q+" "+r;if(a){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||s)if(c=t[L]||(t[L]={}),(l=c[i])&&l[0]===u){if((o=l[1])===!0||o===S)return o===!0}else if(l=c[i]=[u],l[1]=e(t,n,a)||S,l[1]===!0)return!0}}function v(e){return e.length>1?function(t,n,i){for(var s=e.length;s--;)if(!e[s](t,n,i))return!1;return!0}:e[0]}function m(e,t,n,i,s){for(var r,a=[],o=0,l=e.length,c=null!=t;l>o;o++)(r=e[o])&&(!n||n(r,i,s))&&(a.push(r),c&&t.push(o));return a}function g(e,t,n,i,r,a){return i&&!i[L]&&(i=g(i)),r&&!r[L]&&(r=g(r,a)),s(function(s,a,o,l){var c,u,p,d=[],h=[],f=a.length,v=s||w(t||"*",o.nodeType?[o]:o,[]),g=!e||!s&&t?v:m(v,d,e,o,l),y=n?r||(s?e:f||i)?[]:a:g;if(n&&n(g,y,o,l),i)for(c=m(y,h),i(c,[],o,l),u=c.length;u--;)(p=c[u])&&(y[h[u]]=!(g[h[u]]=p));if(s){if(r||e){if(r){for(c=[],u=y.length;u--;)(p=y[u])&&c.push(g[u]=p);r(null,y=[],c,l)}for(u=y.length;u--;)(p=y[u])&&(c=r?nt.call(s,p):d[u])>-1&&(s[c]=!(a[c]=p))}}else y=m(y===a?y.splice(f,y.length):y),r?r(null,a,y,l):et.apply(a,y)})}function y(e){for(var t,n,i,s=e.length,r=C.relative[e[0].type],a=r||C.relative[" "],o=r?1:0,l=f(function(e){return e===t},a,!0),c=f(function(e){return nt.call(t,e)>-1},a,!0),u=[function(e,n,i){return!r&&(i||n!==$)||((t=n).nodeType?l(e,n,i):c(e,n,i))}];s>o;o++)if(n=C.relative[e[o].type])u=[f(v(u),n)];else{if(n=C.filter[e[o].type].apply(null,e[o].matches),n[L]){for(i=++o;s>i&&!C.relative[e[i].type];i++);return g(o>1&&v(u),o>1&&h(e.slice(0,o-1).concat({value:" "===e[o-2].type?"*":""})).replace(ct,"$1"),n,i>o&&y(e.slice(o,i)),s>i&&y(e=e.slice(i)),s>i&&h(e))}u.push(n)}return v(u)}function b(e,t){var i=0,r=t.length>0,a=e.length>0,o=function(s,o,l,c,u){var p,d,h,f=[],v=0,g="0",y=s&&[],b=null!=u,w=$,x=s||a&&C.find.TAG("*",u&&o.parentNode||o),k=q+=null==w?1:Math.random()||.1;for(b&&($=o!==D&&o,S=i);null!=(p=x[g]);g++){if(a&&p){for(d=0;h=e[d++];)if(h(p,o,l)){c.push(p);break}b&&(q=k,S=++i)}r&&((p=!h&&p)&&v--,s&&y.push(p))}if(v+=g,r&&g!==v){for(d=0;h=t[d++];)h(y,f,o,l);if(s){if(v>0)for(;g--;)y[g]||f[g]||(f[g]=Q.call(c));f=m(f)}et.apply(c,f),b&&!s&&f.length>0&&v+t.length>1&&n.uniqueSort(c)}return b&&(q=k,$=w),y};return r?s(o):o}function w(e,t,i){for(var s=0,r=t.length;r>s;s++)n(e,t[s],i);return i}function x(e,t,n,i){var s,r,a,o,l,c=d(e);if(!i&&1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(a=r[0]).type&&_.getById&&9===t.nodeType&&O&&C.relative[r[1].type]){if(t=(C.find.ID(a.matches[0].replace(_t,St),t)||[])[0],!t)return n;e=e.slice(r.shift().value.length)}for(s=gt.needsContext.test(e)?0:r.length;s--&&(a=r[s],!C.relative[o=a.type]);)if((l=C.find[o])&&(i=l(a.matches[0].replace(_t,St),ht.test(r[0].type)&&t.parentNode||t))){if(r.splice(s,1),e=i.length&&h(r),!e)return et.apply(n,i),n;break}}return E(e,c)(i,t,!O,n,ht.test(e)),n}var k,_,S,C,j,T,E,$,N,A,D,P,O,I,M,F,B,L="sizzle"+-new Date,W=e.document,q=0,R=0,H=i(),z=i(),U=i(),X=!1,Z=function(e,t){return e===t?(X=!0,0):0},V=typeof t,Y=1<<31,G={}.hasOwnProperty,J=[],Q=J.pop,K=J.push,et=J.push,tt=J.slice,nt=J.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",st="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",at=rt.replace("w","w#"),ot="\\["+st+"*("+rt+")"+st+"*(?:([*^$|!~]?=)"+st+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+at+")|)|)"+st+"*\\]",lt=":("+rt+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ot.replace(3,8)+")*)|.*)\\)|)",ct=RegExp("^"+st+"+|((?:^|[^\\\\])(?:\\\\.)*)"+st+"+$","g"),ut=RegExp("^"+st+"*,"+st+"*"),dt=RegExp("^"+st+"*([>+~]|"+st+")"+st+"*"),ht=RegExp(st+"*[+~]"),ft=RegExp("="+st+"*([^\\]'\"]*)"+st+"*\\]","g"),vt=RegExp(lt),mt=RegExp("^"+at+"$"),gt={ID:RegExp("^#("+rt+")"),CLASS:RegExp("^\\.("+rt+")"),TAG:RegExp("^("+rt.replace("w","w*")+")"),ATTR:RegExp("^"+ot),PSEUDO:RegExp("^"+lt),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+st+"*(even|odd|(([+-]|)(\\d*)n|)"+st+"*(?:([+-]|)"+st+"*(\\d+)|))"+st+"*\\)|)","i"),bool:RegExp("^(?:"+it+")$","i"),needsContext:RegExp("^"+st+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+st+"*((?:-\\d)?\\d*)"+st+"*\\)|)(?=[^-]|$)","i")},yt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,wt=/^(?:input|select|textarea|button)$/i,xt=/^h\d$/i,kt=/'|\\/g,_t=RegExp("\\\\([\\da-f]{1,6}"+st+"?|("+st+")|.)","ig"),St=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(55296|i>>10,56320|1023&i)};try{et.apply(J=tt.call(W.childNodes),W.childNodes),J[W.childNodes.length].nodeType}catch(Ct){et={apply:J.length?function(e,t){K.apply(e,tt.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}T=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},_=n.support={},A=n.setDocument=function(e){var n=e?e.ownerDocument||e:W,i=n.defaultView;return n!==D&&9===n.nodeType&&n.documentElement?(D=n,P=n.documentElement,O=!T(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){A()}),_.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),_.getElementsByTagName=r(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),_.getElementsByClassName=r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),_.getById=r(function(e){return P.appendChild(e).id=L,!n.getElementsByName||!n.getElementsByName(L).length}),_.getById?(C.find.ID=function(e,t){if(typeof t.getElementById!==V&&O){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(e){var t=e.replace(_t,St);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(_t,St);return function(e){var n=typeof e.getAttributeNode!==V&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=_.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==V?n.getElementsByTagName(e):t}:function(e,t){var n,i=[],s=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[s++];)1===n.nodeType&&i.push(n);return i}return r},C.find.CLASS=_.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==V&&O?n.getElementsByClassName(e):t},M=[],I=[],(_.qsa=yt.test(n.querySelectorAll))&&(r(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||I.push("\\["+st+"*(?:value|"+it+")"),e.querySelectorAll(":checked").length||I.push(":checked")}),r(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&I.push("[*^$]="+st+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),I.push(",.*:")})),(_.matchesSelector=yt.test(F=P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&r(function(e){_.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),M.push("!=",lt)}),I=I.length&&RegExp(I.join("|")),M=M.length&&RegExp(M.join("|")),B=yt.test(P.contains)||P.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Z=P.compareDocumentPosition?function(e,t){if(e===t)return X=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!_.sortDetached&&t.compareDocumentPosition(e)===i?e===n||B(W,e)?-1:t===n||B(W,t)?1:N?nt.call(N,e)-nt.call(N,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var i,s=0,r=e.parentNode,a=t.parentNode,l=[e],c=[t];if(e===t)return X=!0,0;if(!r||!a)return e===n?-1:t===n?1:r?-1:a?1:N?nt.call(N,e)-nt.call(N,t):0;if(r===a)return o(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)c.unshift(i);for(;l[s]===c[s];)s++;return s?o(l[s],c[s]):l[s]===W?-1:c[s]===W?1:0},n):D},n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){if((e.ownerDocument||e)!==D&&A(e),t=t.replace(ft,"='$1']"),!(!_.matchesSelector||!O||M&&M.test(t)||I&&I.test(t)))try{var i=F.call(e,t);if(i||_.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(s){}return n(t,D,null,[e]).length>0},n.contains=function(e,t){return(e.ownerDocument||e)!==D&&A(e),B(e,t)},n.attr=function(e,n){(e.ownerDocument||e)!==D&&A(e);var i=C.attrHandle[n.toLowerCase()],s=i&&G.call(C.attrHandle,n.toLowerCase())?i(e,n,!O):t;return s===t?_.attributes||!O?e.getAttribute(n):(s=e.getAttributeNode(n))&&s.specified?s.value:null:s},n.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},n.uniqueSort=function(e){var t,n=[],i=0,s=0;if(X=!_.detectDuplicates,N=!_.sortStable&&e.slice(0),e.sort(Z),X){for(;t=e[s++];)t===e[s]&&(i=n.push(s));for(;i--;)e.splice(n[i],1)}return e},j=n.getText=function(e){var t,n="",i=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=j(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[i];i++)n+=j(t);return n},C=n.selectors={cacheLength:50,createPseudo:s,match:gt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_t,St),e[3]=(e[4]||e[5]||"").replace(_t,St),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||n.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&n.error(e[0]),e},PSEUDO:function(e){var n,i=!e[5]&&e[2];return gt.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:i&&vt.test(i)&&(n=d(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(e[0]=e[0].slice(0,n),e[2]=i.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_t,St).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=RegExp("(^|"+st+")"+e+"("+st+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==V&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(s){var r=n.attr(s,e);return null==r?"!="===t:t?(r+="","="===t?r===i:"!="===t?r!==i:"^="===t?i&&0===r.indexOf(i):"*="===t?i&&r.indexOf(i)>-1:"$="===t?i&&r.slice(-i.length)===i:"~="===t?(" "+r+" ").indexOf(i)>-1:"|="===t?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,s){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),o="of-type"===t;return 1===i&&0===s?function(e){return!!e.parentNode}:function(t,n,l){var c,u,p,d,h,f,v=r!==a?"nextSibling":"previousSibling",m=t.parentNode,g=o&&t.nodeName.toLowerCase(),y=!l&&!o;if(m){if(r){for(;v;){for(p=t;p=p[v];)if(o?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;f=v="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?m.firstChild:m.lastChild],a&&y){for(u=m[L]||(m[L]={}),c=u[e]||[],h=c[0]===q&&c[1],d=c[0]===q&&c[2],p=h&&m.childNodes[h];p=++h&&p&&p[v]||(d=h=0)||f.pop();)if(1===p.nodeType&&++d&&p===t){u[e]=[q,h,d];break}}else if(y&&(c=(t[L]||(t[L]={}))[e])&&c[0]===q)d=c[1];else for(;(p=++h&&p&&p[v]||(d=h=0)||f.pop())&&((o?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++d||(y&&((p[L]||(p[L]={}))[e]=[q,d]),p!==t)););return d-=s,d===i||0===d%i&&d/i>=0}}},PSEUDO:function(e,t){var i,r=C.pseudos[e]||C.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return r[L]?r(t):r.length>1?(i=[e,e,"",t],C.setFilters.hasOwnProperty(e.toLowerCase())?s(function(e,n){for(var i,s=r(e,t),a=s.length;a--;)i=nt.call(e,s[a]),e[i]=!(n[i]=s[a])}):function(e){return r(e,0,i)}):r}},pseudos:{not:s(function(e){var t=[],n=[],i=E(e.replace(ct,"$1"));return i[L]?s(function(e,t,n,s){for(var r,a=i(e,null,s,[]),o=e.length;o--;)(r=a[o])&&(e[o]=!(t[o]=r))}):function(e,s,r){return t[0]=e,i(t,null,r,n),!n.pop()}}),has:s(function(e){return function(t){return n(e,t).length>0}}),contains:s(function(e){return function(t){return(t.textContent||t.innerText||j(t)).indexOf(e)>-1}}),lang:s(function(e){return mt.test(e||"")||n.error("unsupported lang: "+e),e=e.replace(_t,St).toLowerCase(),function(t){var n;do if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return xt.test(e.nodeName)},input:function(e){return wt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=0>n?n+t:n;t>++i;)e.push(i);return e})}},C.pseudos.nth=C.pseudos.eq;for(k in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[k]=l(k);for(k in{submit:!0,reset:!0})C.pseudos[k]=c(k);p.prototype=C.filters=C.pseudos,C.setFilters=new p,E=n.compile=function(e,t){var n,i=[],s=[],r=U[e+" "];if(!r){for(t||(t=d(e)),n=t.length;n--;)r=y(t[n]),r[L]?i.push(r):s.push(r);r=U(e,b(s,i))}return r},_.sortStable=L.split("").sort(Z).join("")===L,_.detectDuplicates=X,A(),_.sortDetached=r(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,n,i){return i?t:e.getAttribute(n,"type"===n.toLowerCase()?1:2)}),_.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,n,i){return i||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||a(it,function(e,n,i){var s;return i?t:(s=e.getAttributeNode(n))&&s.specified?s.value:e[n]===!0?n.toLowerCase():null}),pt.find=n,pt.expr=n.selectors,pt.expr[":"]=pt.expr.pseudos,pt.unique=n.uniqueSort,pt.text=n.getText,pt.isXMLDoc=n.isXML,pt.contains=n.contains}(e);var jt={};pt.Callbacks=function(e){e="string"==typeof e?jt[e]||s(e):pt.extend({},e);var t,i,r,a,o,l,c=[],u=!e.once&&[],p=function(n){for(i=e.memory&&n,r=!0,o=l||0,l=0,a=c.length,t=!0;c&&a>o;o++)if(c[o].apply(n[0],n[1])===!1&&e.stopOnFalse){i=!1;break}t=!1,c&&(u?u.length&&p(u.shift()):i?c=[]:d.disable())},d={add:function(){if(c){var n=c.length;(function s(t){pt.each(t,function(t,n){var i=pt.type(n);"function"===i?e.unique&&d.has(n)||c.push(n):n&&n.length&&"string"!==i&&s(n)})})(arguments),t?a=c.length:i&&(l=n,p(i))}return this},remove:function(){return c&&pt.each(arguments,function(e,n){for(var i;(i=pt.inArray(n,c,i))>-1;)c.splice(i,1),t&&(a>=i&&a--,o>=i&&o--)}),this},has:function(e){return e?pt.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],a=0,this},disable:function(){return c=u=i=n,this},disabled:function(){return!c},lock:function(){return u=n,i||d.disable(),this},locked:function(){return!u},fireWith:function(e,n){return!c||r&&!u||(n=n||[],n=[e,n.slice?n.slice():n],t?u.push(n):p(n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},pt.extend({Deferred:function(e){var t=[["resolve","done",pt.Callbacks("once memory"),"resolved"],["reject","fail",pt.Callbacks("once memory"),"rejected"],["notify","progress",pt.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return pt.Deferred(function(n){pt.each(t,function(t,r){var a=r[0],o=pt.isFunction(e[t])&&e[t];s[r[1]](function(){var e=o&&o.apply(this,arguments);e&&pt.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===i?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?pt.extend(e,i):i}},s={};return i.pipe=i.then,pt.each(t,function(e,r){var a=r[2],o=r[3];i[r[1]]=a.add,o&&a.add(function(){n=o},t[1^e][2].disable,t[2][2].lock),s[r[0]]=function(){return s[r[0]+"With"](this===s?i:this,arguments),this},s[r[0]+"With"]=a.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t,n,i,s=0,r=at.call(arguments),a=r.length,o=1!==a||e&&pt.isFunction(e.promise)?a:0,l=1===o?e:pt.Deferred(),c=function(e,n,i){return function(s){n[e]=this,i[e]=arguments.length>1?at.call(arguments):s,i===t?l.notifyWith(n,i):--o||l.resolveWith(n,i)}};if(a>1)for(t=Array(a),n=Array(a),i=Array(a);a>s;s++)r[s]&&pt.isFunction(r[s].promise)?r[s].promise().done(c(s,i,r)).fail(l.reject).progress(c(s,n,t)):--o;return o||l.resolveWith(i,r),l.promise()}}),pt.support=function(t){var n,i,s,r,a,o,l,c,u,p=J.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*")||[],i=p.getElementsByTagName("a")[0],!i||!i.style||!n.length)return t;r=J.createElement("select"),o=r.appendChild(J.createElement("option")),s=p.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==p.className,t.leadingWhitespace=3===p.firstChild.nodeType,t.tbody=!p.getElementsByTagName("tbody").length,t.htmlSerialize=!!p.getElementsByTagName("link").length,t.style=/top/.test(i.getAttribute("style")),t.hrefNormalized="/a"===i.getAttribute("href"),t.opacity=/^0.5/.test(i.style.opacity),t.cssFloat=!!i.style.cssFloat,t.checkOn=!!s.value,t.optSelected=o.selected,t.enctype=!!J.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==J.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,r.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}s=J.createElement("input"),s.setAttribute("value",""),t.input=""===s.getAttribute("value"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","t"),s.setAttribute("name","t"),a=J.createDocumentFragment(),a.appendChild(s),t.appendChecked=s.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(u in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+u,"t"),t[u+"Bubbles"]=l in e||p.attributes[l].expando===!1;p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===p.style.backgroundClip;for(u in pt(t))break;return t.ownLast="0"!==u,pt(function(){var n,i,s,r="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=J.getElementsByTagName("body")[0];a&&(n=J.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=p.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&0===s[0].offsetHeight,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",pt.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===p.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(p,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(p,null)||{width:"4px"}).width,i=p.appendChild(J.createElement("div")),i.style.cssText=p.style.cssText=r,i.style.marginRight=i.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),typeof p.style.zoom!==Y&&(p.innerHTML="",p.style.cssText=r+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===p.offsetWidth,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==p.offsetWidth,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=s=i=null)}),n=r=a=o=i=s=null,t}({});var Tt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Et=/([A-Z])/g;pt.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?pt.cache[e[pt.expando]]:e[pt.expando],!!e&&!l(e)
},data:function(e,t,n){return r(e,t,n)},removeData:function(e,t){return a(e,t)},_data:function(e,t,n){return r(e,t,n,!0)},_removeData:function(e,t){return a(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&pt.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),pt.fn.extend({data:function(e,t){var i,s,r=null,a=0,l=this[0];if(e===n){if(this.length&&(r=pt.data(l),1===l.nodeType&&!pt._data(l,"parsedAttrs"))){for(i=l.attributes;i.length>a;a++)s=i[a].name,0===s.indexOf("data-")&&(s=pt.camelCase(s.slice(5)),o(l,s,r[s]));pt._data(l,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){pt.data(this,e)}):arguments.length>1?this.each(function(){pt.data(this,e,t)}):l?o(l,e,pt.data(l,e)):null},removeData:function(e){return this.each(function(){pt.removeData(this,e)})}}),pt.extend({queue:function(e,t,i){var s;return e?(t=(t||"fx")+"queue",s=pt._data(e,t),i&&(!s||pt.isArray(i)?s=pt._data(e,t,pt.makeArray(i)):s.push(i)),s||[]):n},dequeue:function(e,t){t=t||"fx";var n=pt.queue(e,t),i=n.length,s=n.shift(),r=pt._queueHooks(e,t),a=function(){pt.dequeue(e,t)};"inprogress"===s&&(s=n.shift(),i--),s&&("fx"===t&&n.unshift("inprogress"),delete r.stop,s.call(e,a,r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return pt._data(e,n)||pt._data(e,n,{empty:pt.Callbacks("once memory").add(function(){pt._removeData(e,t+"queue"),pt._removeData(e,n)})})}}),pt.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),i>arguments.length?pt.queue(this[0],e):t===n?this:this.each(function(){var n=pt.queue(this,e,t);pt._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&pt.dequeue(this,e)})},dequeue:function(e){return this.each(function(){pt.dequeue(this,e)})},delay:function(e,t){return e=pt.fx?pt.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,s=1,r=pt.Deferred(),a=this,o=this.length,l=function(){--s||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=n),e=e||"fx";o--;)i=pt._data(a[o],e+"queueHooks"),i&&i.empty&&(s++,i.empty.add(l));return l(),r.promise(t)}});var $t,Nt,At=/[\t\r\n\f]/g,Dt=/\r/g,Pt=/^(?:input|select|textarea|button|object)$/i,Ot=/^(?:a|area)$/i,It=/^(?:checked|selected)$/i,Mt=pt.support.getSetAttribute,Ft=pt.support.input;pt.fn.extend({attr:function(e,t){return pt.access(this,pt.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){pt.removeAttr(this,e)})},prop:function(e,t){return pt.access(this,pt.prop,e,t,arguments.length>1)},removeProp:function(e){return e=pt.propFix[e]||e,this.each(function(){try{this[e]=n,delete this[e]}catch(t){}})},addClass:function(e){var t,n,i,s,r,a=0,o=this.length,l="string"==typeof e&&e;if(pt.isFunction(e))return this.each(function(t){pt(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ht)||[];o>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(At," "):" ")){for(r=0;s=t[r++];)0>i.indexOf(" "+s+" ")&&(i+=s+" ");n.className=pt.trim(i)}return this},removeClass:function(e){var t,n,i,s,r,a=0,o=this.length,l=0===arguments.length||"string"==typeof e&&e;if(pt.isFunction(e))return this.each(function(t){pt(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ht)||[];o>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(At," "):"")){for(r=0;s=t[r++];)for(;i.indexOf(" "+s+" ")>=0;)i=i.replace(" "+s+" "," ");n.className=e?pt.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):pt.isFunction(e)?this.each(function(n){pt(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,i=0,s=pt(this),r=e.match(ht)||[];t=r[i++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else(n===Y||"boolean"===n)&&(this.className&&pt._data(this,"__className__",this.className),this.className=this.className||e===!1?"":pt._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(At," ").indexOf(t)>=0)return!0;return!1},val:function(e){var t,i,s,r=this[0];return arguments.length?(s=pt.isFunction(e),this.each(function(t){var r;1===this.nodeType&&(r=s?e.call(this,t,pt(this).val()):e,null==r?r="":"number"==typeof r?r+="":pt.isArray(r)&&(r=pt.map(r,function(e){return null==e?"":e+""})),i=pt.valHooks[this.type]||pt.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,r,"value")!==n||(this.value=r))})):r?(i=pt.valHooks[r.type]||pt.valHooks[r.nodeName.toLowerCase()],i&&"get"in i&&(t=i.get(r,"value"))!==n?t:(t=r.value,"string"==typeof t?t.replace(Dt,""):null==t?"":t)):void 0}}),pt.extend({valHooks:{option:{get:function(e){var t=pt.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,n,i=e.options,s=e.selectedIndex,r="select-one"===e.type||0>s,a=r?null:[],o=r?s+1:i.length,l=0>s?o:r?s:0;o>l;l++)if(n=i[l],!(!n.selected&&l!==s||(pt.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&pt.nodeName(n.parentNode,"optgroup"))){if(t=pt(n).val(),r)return t;a.push(t)}return a},set:function(e,t){for(var n,i,s=e.options,r=pt.makeArray(t),a=s.length;a--;)i=s[a],(i.selected=pt.inArray(pt(i).val(),r)>=0)&&(n=!0);return n||(e.selectedIndex=-1),r}}},attr:function(e,t,i){var s,r,a=e.nodeType;return e&&3!==a&&8!==a&&2!==a?typeof e.getAttribute===Y?pt.prop(e,t,i):(1===a&&pt.isXMLDoc(e)||(t=t.toLowerCase(),s=pt.attrHooks[t]||(pt.expr.match.bool.test(t)?Nt:$t)),i===n?s&&"get"in s&&null!==(r=s.get(e,t))?r:(r=pt.find.attr(e,t),null==r?n:r):null!==i?s&&"set"in s&&(r=s.set(e,i,t))!==n?r:(e.setAttribute(t,i+""),i):(pt.removeAttr(e,t),n)):void 0},removeAttr:function(e,t){var n,i,s=0,r=t&&t.match(ht);if(r&&1===e.nodeType)for(;n=r[s++];)i=pt.propFix[n]||n,pt.expr.match.bool.test(n)?Ft&&Mt||!It.test(n)?e[i]=!1:e[pt.camelCase("default-"+n)]=e[i]=!1:pt.attr(e,n,""),e.removeAttribute(Mt?n:i)},attrHooks:{type:{set:function(e,t){if(!pt.support.radioValue&&"radio"===t&&pt.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,i){var s,r,a,o=e.nodeType;return e&&3!==o&&8!==o&&2!==o?(a=1!==o||!pt.isXMLDoc(e),a&&(t=pt.propFix[t]||t,r=pt.propHooks[t]),i!==n?r&&"set"in r&&(s=r.set(e,i,t))!==n?s:e[t]=i:r&&"get"in r&&null!==(s=r.get(e,t))?s:e[t]):void 0},propHooks:{tabIndex:{get:function(e){var t=pt.find.attr(e,"tabindex");return t?parseInt(t,10):Pt.test(e.nodeName)||Ot.test(e.nodeName)&&e.href?0:-1}}}}),Nt={set:function(e,t,n){return t===!1?pt.removeAttr(e,n):Ft&&Mt||!It.test(n)?e.setAttribute(!Mt&&pt.propFix[n]||n,n):e[pt.camelCase("default-"+n)]=e[n]=!0,n}},pt.each(pt.expr.match.bool.source.match(/\w+/g),function(e,t){var i=pt.expr.attrHandle[t]||pt.find.attr;pt.expr.attrHandle[t]=Ft&&Mt||!It.test(t)?function(e,t,s){var r=pt.expr.attrHandle[t],a=s?n:(pt.expr.attrHandle[t]=n)!=i(e,t,s)?t.toLowerCase():null;return pt.expr.attrHandle[t]=r,a}:function(e,t,i){return i?n:e[pt.camelCase("default-"+t)]?t.toLowerCase():null}}),Ft&&Mt||(pt.attrHooks.value={set:function(e,t,i){return pt.nodeName(e,"input")?(e.defaultValue=t,n):$t&&$t.set(e,t,i)}}),Mt||($t={set:function(e,t,i){var s=e.getAttributeNode(i);return s||e.setAttributeNode(s=e.ownerDocument.createAttribute(i)),s.value=t+="","value"===i||t===e.getAttribute(i)?t:n}},pt.expr.attrHandle.id=pt.expr.attrHandle.name=pt.expr.attrHandle.coords=function(e,t,i){var s;return i?n:(s=e.getAttributeNode(t))&&""!==s.value?s.value:null},pt.valHooks.button={get:function(e,t){var i=e.getAttributeNode(t);return i&&i.specified?i.value:n},set:$t.set},pt.attrHooks.contenteditable={set:function(e,t,n){$t.set(e,""===t?!1:t,n)}},pt.each(["width","height"],function(e,t){pt.attrHooks[t]={set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):n}}})),pt.support.hrefNormalized||pt.each(["href","src"],function(e,t){pt.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),pt.support.style||(pt.attrHooks.style={get:function(e){return e.style.cssText||n},set:function(e,t){return e.style.cssText=t+""}}),pt.support.optSelected||(pt.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),pt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){pt.propFix[this.toLowerCase()]=this}),pt.support.enctype||(pt.propFix.enctype="encoding"),pt.each(["radio","checkbox"],function(){pt.valHooks[this]={set:function(e,t){return pt.isArray(t)?e.checked=pt.inArray(pt(e).val(),t)>=0:n}},pt.support.checkOn||(pt.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Bt=/^(?:input|select|textarea)$/i,Lt=/^key/,Wt=/^(?:mouse|contextmenu)|click/,qt=/^(?:focusinfocus|focusoutblur)$/,Rt=/^([^.]*)(?:\.(.+)|)$/;pt.event={global:{},add:function(e,t,i,s,r){var a,o,l,c,u,p,d,h,f,v,m,g=pt._data(e);if(g){for(i.handler&&(c=i,i=c.handler,r=c.selector),i.guid||(i.guid=pt.guid++),(o=g.events)||(o=g.events={}),(p=g.handle)||(p=g.handle=function(e){return typeof pt===Y||e&&pt.event.triggered===e.type?n:pt.event.dispatch.apply(p.elem,arguments)},p.elem=e),t=(t||"").match(ht)||[""],l=t.length;l--;)a=Rt.exec(t[l])||[],f=m=a[1],v=(a[2]||"").split(".").sort(),f&&(u=pt.event.special[f]||{},f=(r?u.delegateType:u.bindType)||f,u=pt.event.special[f]||{},d=pt.extend({type:f,origType:m,data:s,handler:i,guid:i.guid,selector:r,needsContext:r&&pt.expr.match.needsContext.test(r),namespace:v.join(".")},c),(h=o[f])||(h=o[f]=[],h.delegateCount=0,u.setup&&u.setup.call(e,s,v,p)!==!1||(e.addEventListener?e.addEventListener(f,p,!1):e.attachEvent&&e.attachEvent("on"+f,p))),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),r?h.splice(h.delegateCount++,0,d):h.push(d),pt.event.global[f]=!0);e=null}},remove:function(e,t,n,i,s){var r,a,o,l,c,u,p,d,h,f,v,m=pt.hasData(e)&&pt._data(e);if(m&&(u=m.events)){for(t=(t||"").match(ht)||[""],c=t.length;c--;)if(o=Rt.exec(t[c])||[],h=v=o[1],f=(o[2]||"").split(".").sort(),h){for(p=pt.event.special[h]||{},h=(i?p.delegateType:p.bindType)||h,d=u[h]||[],o=o[2]&&RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=d.length;r--;)a=d[r],!s&&v!==a.origType||n&&n.guid!==a.guid||o&&!o.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(d.splice(r,1),a.selector&&d.delegateCount--,p.remove&&p.remove.call(e,a));l&&!d.length&&(p.teardown&&p.teardown.call(e,f,m.handle)!==!1||pt.removeEvent(e,h,m.handle),delete u[h])}else for(h in u)pt.event.remove(e,h+t[c],n,i,!0);pt.isEmptyObject(u)&&(delete m.handle,pt._removeData(e,"events"))}},trigger:function(t,i,s,r){var a,o,l,c,u,p,d,h=[s||J],f=ct.call(t,"type")?t.type:t,v=ct.call(t,"namespace")?t.namespace.split("."):[];if(l=p=s=s||J,3!==s.nodeType&&8!==s.nodeType&&!qt.test(f+pt.event.triggered)&&(f.indexOf(".")>=0&&(v=f.split("."),f=v.shift(),v.sort()),o=0>f.indexOf(":")&&"on"+f,t=t[pt.expando]?t:new pt.Event(f,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=v.join("."),t.namespace_re=t.namespace?RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=n,t.target||(t.target=s),i=null==i?[t]:pt.makeArray(i,[t]),u=pt.event.special[f]||{},r||!u.trigger||u.trigger.apply(s,i)!==!1)){if(!r&&!u.noBubble&&!pt.isWindow(s)){for(c=u.delegateType||f,qt.test(c+f)||(l=l.parentNode);l;l=l.parentNode)h.push(l),p=l;p===(s.ownerDocument||J)&&h.push(p.defaultView||p.parentWindow||e)}for(d=0;(l=h[d++])&&!t.isPropagationStopped();)t.type=d>1?c:u.bindType||f,a=(pt._data(l,"events")||{})[t.type]&&pt._data(l,"handle"),a&&a.apply(l,i),a=o&&l[o],a&&pt.acceptData(l)&&a.apply&&a.apply(l,i)===!1&&t.preventDefault();if(t.type=f,!r&&!t.isDefaultPrevented()&&(!u._default||u._default.apply(h.pop(),i)===!1)&&pt.acceptData(s)&&o&&s[f]&&!pt.isWindow(s)){p=s[o],p&&(s[o]=null),pt.event.triggered=f;try{s[f]()}catch(m){}pt.event.triggered=n,p&&(s[o]=p)}return t.result}},dispatch:function(e){e=pt.event.fix(e);var t,i,s,r,a,o=[],l=at.call(arguments),c=(pt._data(this,"events")||{})[e.type]||[],u=pt.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(o=pt.event.handlers.call(this,e,c),t=0;(r=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,a=0;(s=r.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,i=((pt.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,l),i!==n&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,s,r,a,o=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(r=[],a=0;l>a;a++)s=t[a],i=s.selector+" ",r[i]===n&&(r[i]=s.needsContext?pt(i,this).index(c)>=0:pt.find(i,this,null,[c]).length),r[i]&&r.push(s);r.length&&o.push({elem:c,handlers:r})}return t.length>l&&o.push({elem:this,handlers:t.slice(l)}),o},fix:function(e){if(e[pt.expando])return e;var t,n,i,s=e.type,r=e,a=this.fixHooks[s];for(a||(this.fixHooks[s]=a=Wt.test(s)?this.mouseHooks:Lt.test(s)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new pt.Event(r),t=i.length;t--;)n=i[t],e[n]=r[n];return e.target||(e.target=r.srcElement||J),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,s,r,a=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(s=e.target.ownerDocument||J,r=s.documentElement,i=s.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||a===n||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):n},delegateType:"focusout"},click:{trigger:function(){return pt.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):n},_default:function(e){return pt.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==n&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var s=pt.extend(new pt.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?pt.event.trigger(s,null,t):pt.event.dispatch.call(t,s),s.isDefaultPrevented()&&n.preventDefault()}},pt.removeEvent=J.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===Y&&(e[i]=null),e.detachEvent(i,n))},pt.Event=function(e,t){return this instanceof pt.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?c:u):this.type=e,t&&pt.extend(this,t),this.timeStamp=e&&e.timeStamp||pt.now(),this[pt.expando]=!0,n):new pt.Event(e,t)},pt.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=c,this.stopPropagation()}},pt.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){pt.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,s=e.relatedTarget,r=e.handleObj;return(!s||s!==i&&!pt.contains(i,s))&&(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),pt.support.submitBubbles||(pt.event.special.submit={setup:function(){return pt.nodeName(this,"form")?!1:(pt.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,i=pt.nodeName(t,"input")||pt.nodeName(t,"button")?t.form:n;i&&!pt._data(i,"submitBubbles")&&(pt.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),pt._data(i,"submitBubbles",!0))}),n)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&pt.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return pt.nodeName(this,"form")?!1:(pt.event.remove(this,"._submit"),n)}}),pt.support.changeBubbles||(pt.event.special.change={setup:function(){return Bt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(pt.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),pt.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),pt.event.simulate("change",this,e,!0)})),!1):(pt.event.add(this,"beforeactivate._change",function(e){var t=e.target;Bt.test(t.nodeName)&&!pt._data(t,"changeBubbles")&&(pt.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||pt.event.simulate("change",this.parentNode,e,!0)}),pt._data(t,"changeBubbles",!0))}),n)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):n},teardown:function(){return pt.event.remove(this,"._change"),!Bt.test(this.nodeName)}}),pt.support.focusinBubbles||pt.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){pt.event.simulate(t,e.target,pt.event.fix(e),!0)};pt.event.special[t]={setup:function(){0===n++&&J.addEventListener(e,i,!0)},teardown:function(){0===--n&&J.removeEventListener(e,i,!0)}}}),pt.fn.extend({on:function(e,t,i,s,r){var a,o;if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=n);for(a in e)this.on(a,t,i,e[a],r);return this}if(null==i&&null==s?(s=t,i=t=n):null==s&&("string"==typeof t?(s=i,i=n):(s=i,i=t,t=n)),s===!1)s=u;else if(!s)return this;return 1===r&&(o=s,s=function(e){return pt().off(e),o.apply(this,arguments)},s.guid=o.guid||(o.guid=pt.guid++)),this.each(function(){pt.event.add(this,e,s,i,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,i){var s,r;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,pt(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=n),i===!1&&(i=u),this.each(function(){pt.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){pt.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?pt.event.trigger(e,t,i,!0):n}});var Ht=/^.[^:#\[\.,]*$/,zt=/^(?:parents|prev(?:Until|All))/,Ut=pt.expr.match.needsContext,Xt={children:!0,contents:!0,next:!0,prev:!0};pt.fn.extend({find:function(e){var t,n=[],i=this,s=i.length;if("string"!=typeof e)return this.pushStack(pt(e).filter(function(){for(t=0;s>t;t++)if(pt.contains(i[t],this))return!0}));for(t=0;s>t;t++)pt.find(e,i[t],n);return n=this.pushStack(s>1?pt.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=pt(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(pt.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(h(this,e||[],!0))},filter:function(e){return this.pushStack(h(this,e||[],!1))},is:function(e){return!!h(this,"string"==typeof e&&Ut.test(e)?pt(e):e||[],!1).length},closest:function(e,t){for(var n,i=0,s=this.length,r=[],a=Ut.test(e)||"string"!=typeof e?pt(e,t||this.context):0;s>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(a?a.index(n)>-1:1===n.nodeType&&pt.find.matchesSelector(n,e))){n=r.push(n);break}return this.pushStack(r.length>1?pt.unique(r):r)},index:function(e){return e?"string"==typeof e?pt.inArray(this[0],pt(e)):pt.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?pt(e,t):pt.makeArray(e&&e.nodeType?[e]:e),i=pt.merge(this.get(),n);return this.pushStack(pt.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),pt.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return pt.dir(e,"parentNode")},parentsUntil:function(e,t,n){return pt.dir(e,"parentNode",n)},next:function(e){return d(e,"nextSibling")},prev:function(e){return d(e,"previousSibling")},nextAll:function(e){return pt.dir(e,"nextSibling")},prevAll:function(e){return pt.dir(e,"previousSibling")},nextUntil:function(e,t,n){return pt.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return pt.dir(e,"previousSibling",n)},siblings:function(e){return pt.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return pt.sibling(e.firstChild)},contents:function(e){return pt.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:pt.merge([],e.childNodes)}},function(e,t){pt.fn[e]=function(n,i){var s=pt.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(s=pt.filter(i,s)),this.length>1&&(Xt[e]||(s=pt.unique(s)),zt.test(e)&&(s=s.reverse())),this.pushStack(s)}}),pt.extend({filter:function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?pt.find.matchesSelector(i,e)?[i]:[]:pt.find.matches(e,pt.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,t,i){for(var s=[],r=e[t];r&&9!==r.nodeType&&(i===n||1!==r.nodeType||!pt(r).is(i));)1===r.nodeType&&s.push(r),r=r[t];return s},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Zt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Vt=/ jQuery\d+="(?:null|\d+)"/g,Yt=RegExp("<(?:"+Zt+")[\\s/>]","i"),Gt=/^\s+/,Jt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Qt=/<([\w:]+)/,Kt=/<tbody/i,en=/<|&#?\w+;/,tn=/<(?:script|style|link)/i,nn=/^(?:checkbox|radio)$/i,sn=/checked\s*(?:[^=]|=\s*.checked.)/i,rn=/^$|\/(?:java|ecma)script/i,an=/^true\/(.*)/,on=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ln={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:pt.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},cn=f(J),un=cn.appendChild(J.createElement("div"));ln.optgroup=ln.option,ln.tbody=ln.tfoot=ln.colgroup=ln.caption=ln.thead,ln.th=ln.td,pt.fn.extend({text:function(e){return pt.access(this,function(e){return e===n?pt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||J).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?pt.filter(e,this):this,s=0;null!=(n=i[s]);s++)t||1!==n.nodeType||pt.cleanData(x(n)),n.parentNode&&(t&&pt.contains(n.ownerDocument,n)&&y(x(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&pt.cleanData(x(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&pt.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return pt.clone(this,e,t)})},html:function(e){return pt.access(this,function(e){var t=this[0]||{},i=0,s=this.length;if(e===n)return 1===t.nodeType?t.innerHTML.replace(Vt,""):n;if(!("string"!=typeof e||tn.test(e)||!pt.support.htmlSerialize&&Yt.test(e)||!pt.support.leadingWhitespace&&Gt.test(e)||ln[(Qt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Jt,"<$1></$2>");try{for(;s>i;i++)t=this[i]||{},1===t.nodeType&&(pt.cleanData(x(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=pt.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var i=e[t++],s=e[t++];s&&(i&&i.parentNode!==s&&(i=this.nextSibling),pt(this).remove(),s.insertBefore(n,i))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=st.apply([],e);var i,s,r,a,o,l,c=0,u=this.length,p=this,d=u-1,h=e[0],f=pt.isFunction(h);if(f||!(1>=u||"string"!=typeof h||pt.support.checkClone)&&sn.test(h))return this.each(function(i){var s=p.eq(i);f&&(e[0]=h.call(this,i,s.html())),s.domManip(e,t,n)});if(u&&(l=pt.buildFragment(e,this[0].ownerDocument,!1,!n&&this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(a=pt.map(x(l,"script"),m),r=a.length;u>c;c++)s=l,c!==d&&(s=pt.clone(s,!0,!0),r&&pt.merge(a,x(s,"script"))),t.call(this[c],s,c);if(r)for(o=a[a.length-1].ownerDocument,pt.map(a,g),c=0;r>c;c++)s=a[c],rn.test(s.type||"")&&!pt._data(s,"globalEval")&&pt.contains(o,s)&&(s.src?pt._evalUrl(s.src):pt.globalEval((s.text||s.textContent||s.innerHTML||"").replace(on,"")));l=i=null}return this}}),pt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){pt.fn[e]=function(e){for(var n,i=0,s=[],r=pt(e),a=r.length-1;a>=i;i++)n=i===a?this:this.clone(!0),pt(r[i])[t](n),rt.apply(s,n.get());return this.pushStack(s)}}),pt.extend({clone:function(e,t,n){var i,s,r,a,o,l=pt.contains(e.ownerDocument,e);if(pt.support.html5Clone||pt.isXMLDoc(e)||!Yt.test("<"+e.nodeName+">")?r=e.cloneNode(!0):(un.innerHTML=e.outerHTML,un.removeChild(r=un.firstChild)),!(pt.support.noCloneEvent&&pt.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||pt.isXMLDoc(e)))for(i=x(r),o=x(e),a=0;null!=(s=o[a]);++a)i[a]&&w(s,i[a]);if(t)if(n)for(o=o||x(e),i=i||x(r),a=0;null!=(s=o[a]);a++)b(s,i[a]);else b(e,r);return i=x(r,"script"),i.length>0&&y(i,!l&&x(e,"script")),i=o=s=null,r},buildFragment:function(e,t,n,i){for(var s,r,a,o,l,c,u,p=e.length,d=f(t),h=[],v=0;p>v;v++)if(r=e[v],r||0===r)if("object"===pt.type(r))pt.merge(h,r.nodeType?[r]:r);else if(en.test(r)){for(o=o||d.appendChild(t.createElement("div")),l=(Qt.exec(r)||["",""])[1].toLowerCase(),u=ln[l]||ln._default,o.innerHTML=u[1]+r.replace(Jt,"<$1></$2>")+u[2],s=u[0];s--;)o=o.lastChild;if(!pt.support.leadingWhitespace&&Gt.test(r)&&h.push(t.createTextNode(Gt.exec(r)[0])),!pt.support.tbody)for(r="table"!==l||Kt.test(r)?"<table>"!==u[1]||Kt.test(r)?0:o:o.firstChild,s=r&&r.childNodes.length;s--;)pt.nodeName(c=r.childNodes[s],"tbody")&&!c.childNodes.length&&r.removeChild(c);for(pt.merge(h,o.childNodes),o.textContent="";o.firstChild;)o.removeChild(o.firstChild);o=d.lastChild}else h.push(t.createTextNode(r));for(o&&d.removeChild(o),pt.support.appendChecked||pt.grep(x(h,"input"),k),v=0;r=h[v++];)if((!i||-1===pt.inArray(r,i))&&(a=pt.contains(r.ownerDocument,r),o=x(d.appendChild(r),"script"),a&&y(o),n))for(s=0;r=o[s++];)rn.test(r.type||"")&&n.push(r);return o=null,d},cleanData:function(e,t){for(var n,i,s,r,a=0,o=pt.expando,l=pt.cache,c=pt.support.deleteExpando,u=pt.event.special;null!=(n=e[a]);a++)if((t||pt.acceptData(n))&&(s=n[o],r=s&&l[s])){if(r.events)for(i in r.events)u[i]?pt.event.remove(n,i):pt.removeEvent(n,i,r.handle);l[s]&&(delete l[s],c?delete n[o]:typeof n.removeAttribute!==Y?n.removeAttribute(o):n[o]=null,nt.push(s))}},_evalUrl:function(e){return pt.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),pt.fn.extend({wrapAll:function(e){if(pt.isFunction(e))return this.each(function(t){pt(this).wrapAll(e.call(this,t))});if(this[0]){var t=pt(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return pt.isFunction(e)?this.each(function(t){pt(this).wrapInner(e.call(this,t))}):this.each(function(){var t=pt(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=pt.isFunction(e);return this.each(function(n){pt(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){pt.nodeName(this,"body")||pt(this).replaceWith(this.childNodes)}).end()}});var pn,dn,hn,fn=/alpha\([^)]*\)/i,vn=/opacity\s*=\s*([^)]*)/,mn=/^(top|right|bottom|left)$/,gn=/^(none|table(?!-c[ea]).+)/,yn=/^margin/,bn=RegExp("^("+dt+")(.*)$","i"),wn=RegExp("^("+dt+")(?!px)[a-z%]+$","i"),xn=RegExp("^([+-])=("+dt+")","i"),kn={BODY:"block"},_n={position:"absolute",visibility:"hidden",display:"block"},Sn={letterSpacing:0,fontWeight:400},Cn=["Top","Right","Bottom","Left"],jn=["Webkit","O","Moz","ms"];pt.fn.extend({css:function(e,t){return pt.access(this,function(e,t,i){var s,r,a={},o=0;if(pt.isArray(t)){for(r=dn(e),s=t.length;s>o;o++)a[t[o]]=pt.css(e,t[o],!1,r);return a}return i!==n?pt.style(e,t,i):pt.css(e,t)},e,t,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){S(this)?pt(this).show():pt(this).hide()})}}),pt.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=hn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":pt.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,i,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,o,l=pt.camelCase(t),c=e.style;if(t=pt.cssProps[l]||(pt.cssProps[l]=_(c,l)),o=pt.cssHooks[t]||pt.cssHooks[l],i===n)return o&&"get"in o&&(r=o.get(e,!1,s))!==n?r:c[t];if(a=typeof i,"string"===a&&(r=xn.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(pt.css(e,t)),a="number"),!(null==i||"number"===a&&isNaN(i)||("number"!==a||pt.cssNumber[l]||(i+="px"),pt.support.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&(i=o.set(e,i,s))===n)))try{c[t]=i}catch(u){}}},css:function(e,t,i,s){var r,a,o,l=pt.camelCase(t);return t=pt.cssProps[l]||(pt.cssProps[l]=_(e.style,l)),o=pt.cssHooks[t]||pt.cssHooks[l],o&&"get"in o&&(a=o.get(e,!0,i)),a===n&&(a=hn(e,t,s)),"normal"===a&&t in Sn&&(a=Sn[t]),""===i||i?(r=parseFloat(a),i===!0||pt.isNumeric(r)?r||0:a):a}}),e.getComputedStyle?(dn=function(t){return e.getComputedStyle(t,null)},hn=function(e,t,i){var s,r,a,o=i||dn(e),l=o?o.getPropertyValue(t)||o[t]:n,c=e.style;return o&&(""!==l||pt.contains(e.ownerDocument,e)||(l=pt.style(e,t)),wn.test(l)&&yn.test(t)&&(s=c.width,r=c.minWidth,a=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=o.width,c.width=s,c.minWidth=r,c.maxWidth=a)),l}):J.documentElement.currentStyle&&(dn=function(e){return e.currentStyle
},hn=function(e,t,i){var s,r,a,o=i||dn(e),l=o?o[t]:n,c=e.style;return null==l&&c&&c[t]&&(l=c[t]),wn.test(l)&&!mn.test(t)&&(s=c.left,r=e.runtimeStyle,a=r&&r.left,a&&(r.left=e.currentStyle.left),c.left="fontSize"===t?"1em":l,l=c.pixelLeft+"px",c.left=s,a&&(r.left=a)),""===l?"auto":l}),pt.each(["height","width"],function(e,t){pt.cssHooks[t]={get:function(e,i,s){return i?0===e.offsetWidth&&gn.test(pt.css(e,"display"))?pt.swap(e,_n,function(){return E(e,t,s)}):E(e,t,s):n},set:function(e,n,i){var s=i&&dn(e);return j(e,n,i?T(e,t,i,pt.support.boxSizing&&"border-box"===pt.css(e,"boxSizing",!1,s),s):0)}}}),pt.support.opacity||(pt.cssHooks.opacity={get:function(e,t){return vn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,s=pt.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===pt.trim(r.replace(fn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=fn.test(r)?r.replace(fn,s):r+" "+s)}}),pt(function(){pt.support.reliableMarginRight||(pt.cssHooks.marginRight={get:function(e,t){return t?pt.swap(e,{display:"inline-block"},hn,[e,"marginRight"]):n}}),!pt.support.pixelPosition&&pt.fn.position&&pt.each(["top","left"],function(e,t){pt.cssHooks[t]={get:function(e,i){return i?(i=hn(e,t),wn.test(i)?pt(e).position()[t]+"px":i):n}}})}),pt.expr&&pt.expr.filters&&(pt.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!pt.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||pt.css(e,"display"))},pt.expr.filters.visible=function(e){return!pt.expr.filters.hidden(e)}),pt.each({margin:"",padding:"",border:"Width"},function(e,t){pt.cssHooks[e+t]={expand:function(n){for(var i=0,s={},r="string"==typeof n?n.split(" "):[n];4>i;i++)s[e+Cn[i]+t]=r[i]||r[i-2]||r[0];return s}},yn.test(e)||(pt.cssHooks[e+t].set=j)});var Tn=/%20/g,En=/\[\]$/,$n=/\r?\n/g,Nn=/^(?:submit|button|image|reset|file)$/i,An=/^(?:input|select|textarea|keygen)/i;pt.fn.extend({serialize:function(){return pt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=pt.prop(this,"elements");return e?pt.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!pt(this).is(":disabled")&&An.test(this.nodeName)&&!Nn.test(e)&&(this.checked||!nn.test(e))}).map(function(e,t){var n=pt(this).val();return null==n?null:pt.isArray(n)?pt.map(n,function(e){return{name:t.name,value:e.replace($n,"\r\n")}}):{name:t.name,value:n.replace($n,"\r\n")}}).get()}}),pt.param=function(e,t){var i,s=[],r=function(e,t){t=pt.isFunction(t)?t():null==t?"":t,s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===n&&(t=pt.ajaxSettings&&pt.ajaxSettings.traditional),pt.isArray(e)||e.jquery&&!pt.isPlainObject(e))pt.each(e,function(){r(this.name,this.value)});else for(i in e)A(i,e[i],t,r);return s.join("&").replace(Tn,"+")},pt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){pt.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),pt.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Dn,Pn,On=pt.now(),In=/\?/,Mn=/#.*$/,Fn=/([?&])_=[^&]*/,Bn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ln=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Wn=/^(?:GET|HEAD)$/,qn=/^\/\//,Rn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Hn=pt.fn.load,zn={},Un={},Xn="*/".concat("*");try{Pn=G.href}catch(Zn){Pn=J.createElement("a"),Pn.href="",Pn=Pn.href}Dn=Rn.exec(Pn.toLowerCase())||[],pt.fn.load=function(e,t,i){if("string"!=typeof e&&Hn)return Hn.apply(this,arguments);var s,r,a,o=this,l=e.indexOf(" ");return l>=0&&(s=e.slice(l,e.length),e=e.slice(0,l)),pt.isFunction(t)?(i=t,t=n):t&&"object"==typeof t&&(a="POST"),o.length>0&&pt.ajax({url:e,type:a,dataType:"html",data:t}).done(function(e){r=arguments,o.html(s?pt("<div>").append(pt.parseHTML(e)).find(s):e)}).complete(i&&function(e,t){o.each(i,r||[e.responseText,t,e])}),this},pt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){pt.fn[t]=function(e){return this.on(t,e)}}),pt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pn,type:"GET",isLocal:Ln.test(Dn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":pt.parseJSON,"text xml":pt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?O(O(e,pt.ajaxSettings),t):O(pt.ajaxSettings,e)},ajaxPrefilter:D(zn),ajaxTransport:D(Un),ajax:function(e,t){function i(e,t,i,s){var r,p,y,b,x,_=t;2!==w&&(w=2,l&&clearTimeout(l),u=n,o=s||"",k.readyState=e>0?4:0,r=e>=200&&300>e||304===e,i&&(b=I(d,k,i)),b=M(d,b,k,r),r?(d.ifModified&&(x=k.getResponseHeader("Last-Modified"),x&&(pt.lastModified[a]=x),x=k.getResponseHeader("etag"),x&&(pt.etag[a]=x)),204===e||"HEAD"===d.type?_="nocontent":304===e?_="notmodified":(_=b.state,p=b.data,y=b.error,r=!y)):(y=_,(e||!_)&&(_="error",0>e&&(e=0))),k.status=e,k.statusText=(t||_)+"",r?v.resolveWith(h,[p,_,k]):v.rejectWith(h,[k,_,y]),k.statusCode(g),g=n,c&&f.trigger(r?"ajaxSuccess":"ajaxError",[k,d,r?p:y]),m.fireWith(h,[k,_]),c&&(f.trigger("ajaxComplete",[k,d]),--pt.active||pt.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=n),t=t||{};var s,r,a,o,l,c,u,p,d=pt.ajaxSetup({},t),h=d.context||d,f=d.context&&(h.nodeType||h.jquery)?pt(h):pt.event,v=pt.Deferred(),m=pt.Callbacks("once memory"),g=d.statusCode||{},y={},b={},w=0,x="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!p)for(p={};t=Bn.exec(o);)p[t[1].toLowerCase()]=t[2];t=p[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return w||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)g[t]=[g[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){var t=e||x;return u&&u.abort(t),i(0,t),this}};if(v.promise(k).complete=m.add,k.success=k.done,k.error=k.fail,d.url=((e||d.url||Pn)+"").replace(Mn,"").replace(qn,Dn[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=pt.trim(d.dataType||"*").toLowerCase().match(ht)||[""],null==d.crossDomain&&(s=Rn.exec(d.url.toLowerCase()),d.crossDomain=!(!s||s[1]===Dn[1]&&s[2]===Dn[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(Dn[3]||("http:"===Dn[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=pt.param(d.data,d.traditional)),P(zn,d,t,k),2===w)return k;c=d.global,c&&0===pt.active++&&pt.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Wn.test(d.type),a=d.url,d.hasContent||(d.data&&(a=d.url+=(In.test(a)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Fn.test(a)?a.replace(Fn,"$1_="+On++):a+(In.test(a)?"&":"?")+"_="+On++)),d.ifModified&&(pt.lastModified[a]&&k.setRequestHeader("If-Modified-Since",pt.lastModified[a]),pt.etag[a]&&k.setRequestHeader("If-None-Match",pt.etag[a])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&k.setRequestHeader("Content-Type",d.contentType),k.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Xn+"; q=0.01":""):d.accepts["*"]);for(r in d.headers)k.setRequestHeader(r,d.headers[r]);if(d.beforeSend&&(d.beforeSend.call(h,k,d)===!1||2===w))return k.abort();x="abort";for(r in{success:1,error:1,complete:1})k[r](d[r]);if(u=P(Un,d,t,k)){k.readyState=1,c&&f.trigger("ajaxSend",[k,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){k.abort("timeout")},d.timeout));try{w=1,u.send(y,i)}catch(_){if(!(2>w))throw _;i(-1,_)}}else i(-1,"No Transport");return k},getJSON:function(e,t,n){return pt.get(e,t,n,"json")},getScript:function(e,t){return pt.get(e,n,t,"script")}}),pt.each(["get","post"],function(e,t){pt[t]=function(e,i,s,r){return pt.isFunction(i)&&(r=r||s,s=i,i=n),pt.ajax({url:e,type:t,dataType:r,data:i,success:s})}}),pt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return pt.globalEval(e),e}}}),pt.ajaxPrefilter("script",function(e){e.cache===n&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),pt.ajaxTransport("script",function(e){if(e.crossDomain){var t,i=J.head||pt("head")[0]||J.documentElement;return{send:function(n,s){t=J.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||s(200,"success"))},i.insertBefore(t,i.firstChild)},abort:function(){t&&t.onload(n,!0)}}}});var Vn=[],Yn=/(=)\?(?=&|$)|\?\?/;pt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Vn.pop()||pt.expando+"_"+On++;return this[e]=!0,e}}),pt.ajaxPrefilter("json jsonp",function(t,i,s){var r,a,o,l=t.jsonp!==!1&&(Yn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yn.test(t.data)&&"data");return l||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=pt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,l?t[l]=t[l].replace(Yn,"$1"+r):t.jsonp!==!1&&(t.url+=(In.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||pt.error(r+" was not called"),o[0]},t.dataTypes[0]="json",a=e[r],e[r]=function(){o=arguments},s.always(function(){e[r]=a,t[r]&&(t.jsonpCallback=i.jsonpCallback,Vn.push(r)),o&&pt.isFunction(a)&&a(o[0]),o=a=n}),"script"):n});var Gn,Jn,Qn=0,Kn=e.ActiveXObject&&function(){var e;for(e in Gn)Gn[e](n,!0)};pt.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&F()||B()}:F,Jn=pt.ajaxSettings.xhr(),pt.support.cors=!!Jn&&"withCredentials"in Jn,Jn=pt.support.ajax=!!Jn,Jn&&pt.ajaxTransport(function(t){if(!t.crossDomain||pt.support.cors){var i;return{send:function(s,r){var a,o,l=t.xhr();if(t.username?l.open(t.type,t.url,t.async,t.username,t.password):l.open(t.type,t.url,t.async),t.xhrFields)for(o in t.xhrFields)l[o]=t.xhrFields[o];t.mimeType&&l.overrideMimeType&&l.overrideMimeType(t.mimeType),t.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");try{for(o in s)l.setRequestHeader(o,s[o])}catch(c){}l.send(t.hasContent&&t.data||null),i=function(e,s){var o,c,u,p;try{if(i&&(s||4===l.readyState))if(i=n,a&&(l.onreadystatechange=pt.noop,Kn&&delete Gn[a]),s)4!==l.readyState&&l.abort();else{p={},o=l.status,c=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(p.text=l.responseText);try{u=l.statusText}catch(d){u=""}o||!t.isLocal||t.crossDomain?1223===o&&(o=204):o=p.text?200:404}}catch(h){s||r(-1,h)}p&&r(o,u,p,c)},t.async?4===l.readyState?setTimeout(i):(a=++Qn,Kn&&(Gn||(Gn={},pt(e).unload(Kn)),Gn[a]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(n,!0)}}}});var ei,ti,ni=/^(?:toggle|show|hide)$/,ii=RegExp("^(?:([+-])=|)("+dt+")([a-z%]*)$","i"),si=/queueHooks$/,ri=[H],ai={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),s=ii.exec(t),r=s&&s[3]||(pt.cssNumber[e]?"":"px"),a=(pt.cssNumber[e]||"px"!==r&&+i)&&ii.exec(pt.css(n.elem,e)),o=1,l=20;if(a&&a[3]!==r){r=r||a[3],s=s||[],a=+i||1;do o=o||".5",a/=o,pt.style(n.elem,e,a+r);while(o!==(o=n.cur()/i)&&1!==o&&--l)}return s&&(a=n.start=+a||+i||0,n.unit=r,n.end=s[1]?a+(s[1]+1)*s[2]:+s[2]),n}]};pt.Animation=pt.extend(q,{tweener:function(e,t){pt.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,s=e.length;s>i;i++)n=e[i],ai[n]=ai[n]||[],ai[n].unshift(t)},prefilter:function(e,t){t?ri.unshift(e):ri.push(e)}}),pt.Tween=z,z.prototype={constructor:z,init:function(e,t,n,i,s,r){this.elem=e,this.prop=n,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(pt.cssNumber[n]?"":"px")},cur:function(){var e=z.propHooks[this.prop];return e&&e.get?e.get(this):z.propHooks._default.get(this)},run:function(e){var t,n=z.propHooks[this.prop];return this.pos=t=this.options.duration?pt.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):z.propHooks._default.set(this),this}},z.prototype.init.prototype=z.prototype,z.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=pt.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){pt.fx.step[e.prop]?pt.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[pt.cssProps[e.prop]]||pt.cssHooks[e.prop])?pt.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},z.propHooks.scrollTop=z.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},pt.each(["toggle","show","hide"],function(e,t){var n=pt.fn[t];pt.fn[t]=function(e,i,s){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(U(t,!0),e,i,s)}}),pt.fn.extend({fadeTo:function(e,t,n,i){return this.filter(S).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var s=pt.isEmptyObject(e),r=pt.speed(t,n,i),a=function(){var t=q(this,pt.extend({},e),r);(s||pt._data(this,"finish"))&&t.stop(!0)};return a.finish=a,s||r.queue===!1?this.each(a):this.queue(r.queue,a)},stop:function(e,t,i){var s=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=n),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",r=pt.timers,a=pt._data(this);if(n)a[n]&&a[n].stop&&s(a[n]);else for(n in a)a[n]&&a[n].stop&&si.test(n)&&s(a[n]);for(n=r.length;n--;)r[n].elem!==this||null!=e&&r[n].queue!==e||(r[n].anim.stop(i),t=!1,r.splice(n,1));(t||!i)&&pt.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=pt._data(this),i=n[e+"queue"],s=n[e+"queueHooks"],r=pt.timers,a=i?i.length:0;for(n.finish=!0,pt.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),pt.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){pt.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),pt.speed=function(e,t,n){var i=e&&"object"==typeof e?pt.extend({},e):{complete:n||!n&&t||pt.isFunction(e)&&e,duration:e,easing:n&&t||t&&!pt.isFunction(t)&&t};return i.duration=pt.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in pt.fx.speeds?pt.fx.speeds[i.duration]:pt.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){pt.isFunction(i.old)&&i.old.call(this),i.queue&&pt.dequeue(this,i.queue)},i},pt.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},pt.timers=[],pt.fx=z.prototype.init,pt.fx.tick=function(){var e,t=pt.timers,i=0;for(ei=pt.now();t.length>i;i++)e=t[i],e()||t[i]!==e||t.splice(i--,1);t.length||pt.fx.stop(),ei=n},pt.fx.timer=function(e){e()&&pt.timers.push(e)&&pt.fx.start()},pt.fx.interval=13,pt.fx.start=function(){ti||(ti=setInterval(pt.fx.tick,pt.fx.interval))},pt.fx.stop=function(){clearInterval(ti),ti=null},pt.fx.speeds={slow:600,fast:200,_default:400},pt.fx.step={},pt.expr&&pt.expr.filters&&(pt.expr.filters.animated=function(e){return pt.grep(pt.timers,function(t){return e===t.elem}).length}),pt.fn.offset=function(e){if(arguments.length)return e===n?this:this.each(function(t){pt.offset.setOffset(this,e,t)});var t,i,s={top:0,left:0},r=this[0],a=r&&r.ownerDocument;return a?(t=a.documentElement,pt.contains(t,r)?(typeof r.getBoundingClientRect!==Y&&(s=r.getBoundingClientRect()),i=X(a),{top:s.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0),left:s.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):s):void 0},pt.offset={setOffset:function(e,t,n){var i=pt.css(e,"position");"static"===i&&(e.style.position="relative");var s,r,a=pt(e),o=a.offset(),l=pt.css(e,"top"),c=pt.css(e,"left"),u=("absolute"===i||"fixed"===i)&&pt.inArray("auto",[l,c])>-1,p={},d={};u?(d=a.position(),s=d.top,r=d.left):(s=parseFloat(l)||0,r=parseFloat(c)||0),pt.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(p.top=t.top-o.top+s),null!=t.left&&(p.left=t.left-o.left+r),"using"in t?t.using.call(e,p):a.css(p)}},pt.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===pt.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),pt.nodeName(e[0],"html")||(n=e.offset()),n.top+=pt.css(e[0],"borderTopWidth",!0),n.left+=pt.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-pt.css(i,"marginTop",!0),left:t.left-n.left-pt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Q;e&&!pt.nodeName(e,"html")&&"static"===pt.css(e,"position");)e=e.offsetParent;return e||Q})}}),pt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i=/Y/.test(t);pt.fn[e]=function(s){return pt.access(this,function(e,s,r){var a=X(e);return r===n?a?t in a?a[t]:a.document.documentElement[s]:e[s]:(a?a.scrollTo(i?pt(a).scrollLeft():r,i?r:pt(a).scrollTop()):e[s]=r,n)},e,s,arguments.length,null)}}),pt.each({Height:"height",Width:"width"},function(e,t){pt.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,s){pt.fn[s]=function(s,r){var a=arguments.length&&(i||"boolean"!=typeof s),o=i||(s===!0||r===!0?"margin":"border");return pt.access(this,function(t,i,s){var r;return pt.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):s===n?pt.css(t,i,o):pt.style(t,i,s,o)},t,a?s:n,a,null)}})}),pt.fn.size=function(){return this.length},pt.fn.andSelf=pt.fn.addBack,"object"==typeof t&&t&&"object"==typeof t.exports?t.exports=pt:(e.jQuery=e.$=pt,"function"==typeof define&&define.amd&&define("jquery",[],function(){return pt}))})(window)}),require.define("/server/lib/class.js",function(e,t){var n=e("underscore"),i=e("./events"),s=function(e,t){var s,r=this,a=e||{},o=t||{};s=o&&n.has(o,"constructor")?o.constructor:function(){return r.apply(this,arguments)},n.extend(s,r,a);var l;r.prototype.events&&(l=n.clone(r.prototype.events)),o&&o.events&&(l=n.extend(l||{},o.events),delete o.events);var c=function(){this.constructor=s};return c.prototype=r.prototype,s.prototype=new c,o&&n.extend(s.prototype,o),l&&(s.prototype.events=l,r.prototype.events||n.extend(s.prototype,i)),s.__super__=r.prototype,s},r=function(){if(this.init&&this.init.apply(this,arguments),this.events&&"function"==typeof this.on)for(evt in this.events)"function"==typeof this.events[evt]?this.on(evt,this.events[evt],this):"string"==typeof this.events[evt]&&"function"==typeof this[this.events[evt]]&&this.on(evt,this[this.events[evt]],this)};r.extend=s,t.exports=r}),require.define("/server/lib/events.js",function(e,t){var n=e("underscore");e("./class");var i=Array.prototype.slice,s={on:function(e,t,n){if(!a(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,i){if(!a(this,"once",e,[t,i])||!t)return this;var s=this,r=n.once(function(){s.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,i)},off:function(e,t,i){var s,r,o,l,c,u,p,d;if(!this._events||!a(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events={},this;for(l=e?[e]:n.keys(this._events),c=0,u=l.length;u>c;c++)if(e=l[c],o=this._events[e]){if(this._events[e]=s=[],t||i)for(p=0,d=o.length;d>p;p++)r=o[p],(t&&t!==r.callback&&t!==r.callback._callback||i&&i!==r.context)&&s.push(r);s.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!a(this,"trigger",e,t))return this;var n=this._events[e],s=this._events.all;return n&&o(n,t),s&&o(s,arguments),this},stopListening:function(e,t,i){var s=this._listeningTo;if(!s)return this;var r=!t&&!i;i||"object"!=typeof t||(i=this),e&&((s={})[e._listenId]=e);for(var a in s)e=s[a],e.off(t,i,this),(r||n.isEmpty(e._events))&&delete this._listeningTo[a];return this}},r=/\s+/,a=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var s in n)e[t].apply(e,[s,n[s]].concat(i));return!1}if(r.test(n)){for(var a=n.split(r),o=0,l=a.length;l>o;o++)e[t].apply(e,[a[o]].concat(i));return!1}return!0},o=function(e,t){var n,i=-1,s=e.length,r=t[0],a=t[1],o=t[2];switch(t.length){case 0:for(;s>++i;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;s>++i;)(n=e[i]).callback.call(n.ctx,r);return;case 2:for(;s>++i;)(n=e[i]).callback.call(n.ctx,r,a);return;case 3:for(;s>++i;)(n=e[i]).callback.call(n.ctx,r,a,o);return;default:for(;s>++i;)(n=e[i]).callback.apply(n.ctx,t)}},l={listenTo:"on",listenToOnce:"once"};n.each(l,function(e,t){s[t]=function(t,i,s){var r=this._listeningTo||(this._listeningTo={}),a=t._listenId||(t._listenId=n.uniqueId("l"));return r[a]=t,s||"object"!=typeof i||(s=this),t[e](i,s,this),this}}),s.bind=s.on,s.unbind=s.off,t.exports=s}),require.define("/client/lib/view.js",function(e,t){var n=/^(\S+)\s*(.*)$/,i=[1,2,3],s=["..."],r=["model","collection","el","id","attributes","className","tagName","events"];t.exports=App.Class.extend({},App.Events).extend({},{constructor:function(e){this.cid=_.uniqueId("view"),e||(e={}),_.extend(this,_.pick(e,r)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents(),1==this.indexed&&(this._index=new App.Collection,this._index.indexBy("cacheIndex"),this._current=void 0,this.swap=function(e,t){t.cacheIndex=e}),this.on("hide",function(){this.$el.hide()},this).on("show",function(){this.$el.show()},this)},getPagination:function(){var e=this.currentPage,t=this.numberOfPages;if("number"==typeof t&&"number"==typeof e){if(1>=this.numberOfPages)return[];if(6>this.numberOfPages)return _.range(1,this.numberOfPages+1);var n=this.pageSeparator||s,r=[t-2,t-1,t],a=_.range(e-1,e+2),o=[];o=e==t||1==e?n:e>=t-4?n.concat(_.difference(a,r)):6>e?_.difference(a,i).concat(n):n.concat(a).concat(n);var l=i.concat(o).concat(r);return l}},tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof $?e:$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=_.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(_.isFunction(i)||(i=this[e[t]]),i){var s=t.match(n),r=s[1],a=s[2];i=_.bind(i,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,i):this.$el.on(r,a,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(_.result(this,"el"),!1);else{var e=_.extend({},_.result(this,"attributes"));this.id&&(e.id=_.result(this,"id")),this.className&&(e["class"]=_.result(this,"className"));var t=App.$("<"+_.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}},empty:function(){return this.appendTo?this.$(this.appendTo).empty():this.$el.empty(),this},append:function(e){var t=this;return _.isArray(e)?(e.forEach(function(e){t.append(e)}),this):(this.appendTo?this.$(this.appendTo).append(e.$el):this.$el.append(e.$el),e.render(),this)},prepend:function(e){var t=this;return _.isArray(e)?(e.forEach(function(e){t.append(e)}),this):(this.appendTo?this.$(this.appendTo).prepend(e):this.$el.prepend(e),this)},render:function(){return this.$el.html(this.template(this)),this.trigger("render"),this},remove:function(){return this.model&&this.model.off(null,null,this),this.collection&&this.collection.off(null,null,this),this.$el.remove(),this.trigger("remove"),this},pagesTemplate:e("./pagination.jade"),renderPages:function(){return this.pagesTemplate.call(this,this)},createModal:function(e){var t=this;this.modal?(this.modal.remove(),delete this.modal,this.createModal(e)):(this.modal=new App.ModalView(e).on("close",function(){t.off("hide",t.modal.remove,t.modal),delete t.modal}).render(),this.once("hide",this.modal.remove,this.modal))}})}),require.define("/client/lib/pagination.jade",function(e,t){t.exports=function(e){var t,n=this,i=[],s=e||{};return function(e,n,s){var r="page";(function(){var a=e.getPagination();if("number"==typeof a.length)for(var o=0,l=a.length;l>o;o++){var c=a[o],u="";c==n&&(u=" active"),"number"==typeof c?i.push("<a"+jade.attr("href",""+(s+c)+"",!0,!1)+jade.attr("data-page",c,!0,!1)+jade.cls([""+(r+u)+""],[!0])+">"+jade.escape(null==(t=c)?"":t)+"</a>"):i.push('<span class="pageSeparator">'+jade.escape(null==(t=c)?"":t)+"</span>")}else{var l=0;for(var o in a){l++;var c=a[o],u="";c==n&&(u=" active"),"number"==typeof c?i.push("<a"+jade.attr("href",""+(s+c)+"",!0,!1)+jade.attr("data-page",c,!0,!1)+jade.cls([""+(r+u)+""],[!0])+">"+jade.escape(null==(t=c)?"":t)+"</a>"):i.push('<span class="pageSeparator">'+jade.escape(null==(t=c)?"":t)+"</span>")}}}).call(this)}.call(this,"self"in s?s.self:n!==void 0?n:void 0,"currentPage"in s?s.currentPage:"undefined"!=typeof currentPage?currentPage:void 0,"hrefRoot"in s?s.hrefRoot:"undefined"!=typeof hrefRoot?hrefRoot:void 0),i.join("")}}),require.define("/client/lib/layout.js",function(e,t){t.exports=App.View.extend({},{el:$("body"),events:{"click a":"navigate","click .notify-close":"notifyClose"},initialize:function(){this.notifications=[]},addMenuItem:function(e,t){var n=$("<li><a href='"+e+"' class='screen-nav' style='display:none;'>"+t+"</a></li>");return app.layout.$("ul.nav.navbar-nav:eq(0)").find(" li:eq(-2)").after(n),n},notifyClose:function(){this.notificationTimeOut&&clearTimeout(this.notificationTimeOut);var e=this;this.$(".system-message")[0].className="system-message",this.notifications.shift(),setTimeout(function(){e.showNotification()},200)},addNotify:function(e){this.notifications.push(e),1===this.notifications.length&&this.showNotification()},showNotification:function(){var e=this.notifications[0];if(e){var t=this;this.$(".system-message").addClass("notify-show system-"+e.type),this.$(".system-header").html(e.title),this.$(".inner-text").html(e.message),this.notificationTimeOut=setTimeout(function(){delete t.notificationTimeOut,t.notifyClose()},3e3)}},navigate:function(e){var t=$(e.currentTarget).attr("href");t&&(t.match(/^blob:.*/)||t.match(/^https?:\/\/.*/)||t.match(/^javascript:.*$/)||t.match(/^mailto:.*$/)||(e.preventDefault(),app.navigate(t,{trigger:!0}),app.trigger("navigation",t,$(e.currentTarget))))}})}),require.define("/client/lib/lightModel.js",function(e,t){t.exports=App.Model=App.Class.extend({},App.Events).extend({},{init:function(e){this.attributes=e||{};var t=this.validate(this.attributes);t?this.attributes={}:this.id=this.attributes._id},validate:function(){},get:function(e){return e?this.attributes[e]:this.attributes}})}),require.define("/client/lib/router.js",function(e,t){var n=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},i=/\((.*?)\)/g,s=/(\(\?)?:\w+/g,r=/\*\w+/g,a=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(n.prototype,{initialize:function(){},route:function(e,t,n){_.isRegExp(e)||(e=this._routeToRegExp(e)),_.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var i=this;return App.history.route(e,function(s){var r=i._extractParameters(e,s);n&&n.apply(i,r),i.trigger.apply(i,["route:"+t].concat(r)),i.trigger("route",t,r),App.history.trigger("route",i,t,r)}),this},navigate:function(e,t){return App.history.navigate(e,t),this},_bindRoutes:function(){if(this.routes){this.routes=_.result(this,"routes");for(var e,t=_.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(a,"\\$&").replace(i,"(?:$1)?").replace(s,function(e,t){return t?e:"([^/]+)"}).replace(r,"(.*?)"),RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return _.map(n,function(e){return e?decodeURIComponent(e):null})}}),t.exports=App.Class.extend({},App.Events).extend({},n.prototype);var o=App.History=function(){this.handlers=[],_.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},l=/^[#\/]|\s+$/g,c=/^\/+|\/+$/g,u=/msie [\w.]+/,p=/\/$/,d=/[?#].*$/;o.started=!1,_.extend(o.prototype,App.Events,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(p,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(l,"")},start:function(e){if(o.started)throw Error("Backbone.history has already been started");o.started=!0,this.options=_.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,i=u.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(c,"/"),i&&this._wantsHashChange&&(this.iframe=Backbone.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var s=this.location,r=s.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!r)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&r&&s.hash&&(this.fragment=this.getHash().replace(l,""),this.history.replaceState({},document.title,this.root+this.fragment+s.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),o.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl(),void 0)},loadUrl:function(e){return e=this.fragment=this.getFragment(e),_.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!o.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(d,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0
}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),App.history=new o}),require.define("/node_modules/jade/lib/runtime.js",function(e,t,n){"use strict";function i(e){return null!=e&&""!==e}function s(e){return Array.isArray(e)?e.map(s).filter(i).join(" "):e}n.merge=function r(e,t){if(1===arguments.length){for(var n=e[0],s=1;e.length>s;s++)n=r(n,e[s]);return n}var a=e["class"],o=t["class"];(a||o)&&(a=a||[],o=o||[],Array.isArray(a)||(a=[a]),Array.isArray(o)||(o=[o]),e["class"]=a.concat(o).filter(i));for(var l in t)"class"!=l&&(e[l]=t[l]);return e},n.joinClasses=s,n.cls=function(e,t){for(var i=[],r=0;e.length>r;r++)t&&t[r]?i.push(n.escape(s([e[r]]))):i.push(s(e[r]));var a=s(i);return a.length?' class="'+a+'"':""},n.attr=function(e,t,i,s){return"boolean"==typeof t||null==t?t?" "+(s?e:e+'="'+e+'"'):"":0==e.indexOf("data")&&"string"!=typeof t?" "+e+"='"+JSON.stringify(t).replace(/'/g,"&apos;")+"'":i?" "+e+'="'+n.escape(t)+'"':" "+e+'="'+t+'"'},n.attrs=function(e,t){var i=[],r=Object.keys(e);if(r.length)for(var a=0;r.length>a;++a){var o=r[a],l=e[o];"class"==o?(l=s(l))&&i.push(" "+o+'="'+l+'"'):i.push(n.attr(o,l,!1,t))}return i.join("")},n.escape=function(e){var t=(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return t===""+e?e:t},n.rethrow=function a(t,n,i,s){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&n||s))throw t.message+=" on line "+i,t;try{s=s||e("fs").readFileSync(n,"utf8")}catch(r){a(t,null,i)}var o=3,l=s.split("\n"),c=Math.max(i-o,0),u=Math.min(l.length,i+o),o=l.slice(c,u).map(function(e,t){var n=t+c+1;return(n==i?"  > ":"    ")+n+"| "+e}).join("\n");throw t.path=n,t.message=(n||"Jade")+":"+i+"\n"+o+"\n\n"+t.message,t}}),require.define("fs",function(){}),require.define("/node_modules/socket.io/node_modules/socket.io-client/dist/socket.io.min.js",function(require,module,exports,__dirname,__filename,process,global){var io=module===void 0?{}:module.exports;(function(){if(function(e,t){var n=e;n.version="0.9.16",n.protocol=1,n.transports=[],n.j=[],n.sockets={},n.connect=function(e,i){var s,r,a=n.util.parseUri(e);t&&t.location&&(a.protocol=a.protocol||t.location.protocol.slice(0,-1),a.host=a.host||(t.document?t.document.domain:t.location.hostname),a.port=a.port||t.location.port),s=n.util.uniqueUri(a);var o={host:a.host,secure:"https"==a.protocol,port:a.port||("https"==a.protocol?443:80),query:a.query||""};return n.util.merge(o,i),(o["force new connection"]||!n.sockets[s])&&(r=new n.Socket(o)),!o["force new connection"]&&r&&(n.sockets[s]=r),r=r||n.sockets[s],r.of(a.path.length>1?a.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(e,t){var n=e.util={},i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(e){for(var t=i.exec(e||""),n={},r=14;r--;)n[s[r]]=t[r]||"";return n},n.uniqueUri=function(e){var n=e.protocol,i=e.host,s=e.port;return"document"in t?(i=i||document.domain,s=s||("https"==n&&"https:"!==document.location.protocol?443:document.location.port)):(i=i||"localhost",!s&&"https"==n&&(s=443)),(n||"http")+"://"+i+":"+(s||80)},n.query=function(e,t){var i=n.chunkQuery(e||""),s=[];n.merge(i,n.chunkQuery(t||""));for(var r in i)i.hasOwnProperty(r)&&s.push(r+"="+i[r]);return s.length?"?"+s.join("&"):""},n.chunkQuery=function(e){for(var t,n={},i=e.split("&"),s=0,r=i.length;r>s;++s)t=i[s].split("="),t[0]&&(n[t[0]]=t[1]);return n};var r=!1;n.load=function(e){return"document"in t&&"complete"===document.readyState||r?e():(n.on(t,"load",e,!1),void 0)},n.on=function(e,t,n,i){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,i)},n.request=function(e){if(e&&"undefined"!=typeof XDomainRequest&&!n.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||n.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}return null},"undefined"!=typeof window&&n.load(function(){r=!0}),n.defer=function(e){return n.ua.webkit&&"undefined"==typeof importScripts?(n.load(function(){setTimeout(e,100)}),void 0):e()},n.merge=function(e,t,i,s){var r,a=s||[],o=i===void 0?2:i;for(r in t)t.hasOwnProperty(r)&&0>n.indexOf(a,r)&&("object"==typeof e[r]&&o?n.merge(e[r],t[r],o-1,a):(e[r]=t[r],a.push(t[r])));return e},n.mixin=function(e,t){n.merge(e.prototype,t.prototype)},n.inherit=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.intersect=function(e,t){for(var i=[],s=e.length>t.length?e:t,r=e.length>t.length?t:e,a=0,o=r.length;o>a;a++)~n.indexOf(s,r[a])&&i.push(r[a]);return i},n.indexOf=function(e,t,n){for(var i=e.length,n=0>n?0>n+i?0:n+i:n||0;i>n&&e[n]!==t;n++);return n>=i?-1:n},n.toArray=function(e){for(var t=[],n=0,i=e.length;i>n;n++)t.push(e[n]);return t},n.ua={},n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return void 0!=e.withCredentials}(),n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),n.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}(io!==void 0?io:module.exports,this),function(e,t){function n(){}e.EventEmitter=n,n.prototype.on=function(e,n){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(n):this.$events[e]=[this.$events[e],n]:this.$events[e]=n,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(e,t){function n(){i.removeListener(e,n),t.apply(this,arguments)}var i=this;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,n){if(this.$events&&this.$events[e]){var i=this.$events[e];if(t.util.isArray(i)){for(var s=-1,r=0,a=i.length;a>r;r++)if(i[r]===n||i[r].listener&&i[r].listener===n){s=r;break}if(0>s)return this;i.splice(s,1),i.length||delete this.$events[e]}else(i===n||i.listener&&i.listener===n)&&delete this.$events[e]}return this},n.prototype.removeAllListeners=function(e){return void 0===e?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},n.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},n.prototype.emit=function(e){if(!this.$events)return!1;var n=this.$events[e];if(!n)return!1;var i=Array.prototype.slice.call(arguments,1);if("function"==typeof n)n.apply(this,i);else{if(!t.util.isArray(n))return!1;for(var s=n.slice(),r=0,a=s.length;a>r;r++)s[r].apply(this,i)}return!0}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(exports,nativeJSON){function f(e){return 10>e?"0"+e:e}function date(e){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,s,r,a,o=gap,l=t[e];switch(l instanceof Date&&(l=date(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?l+"":"null";case"boolean":case"null":return l+"";case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;r>n;n+=1)a[n]=str(n,l)||"null";return s=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,s}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],s=str(i,l),s&&a.push(quote(i)+(gap?": ":":")+s));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(s=str(i,l),s&&a.push(quote(i)+(gap?": ":":")+s));return s=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,s}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw Error("JSON.stringify")},JSON.parse=function(text,reviver){function walk(e,t){var n,i,s=e[t];if(s&&"object"==typeof s)for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(i=walk(s,n),void 0!==i?s[n]=i:delete s[n]);return reviver.call(e,t,s)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}(io!==void 0?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(e,t){var n=e.parser={},i=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],s=n.reasons=["transport not supported","client not handshaken","unauthorized"],r=n.advice=["reconnect"],a=t.JSON,o=t.util.indexOf;n.encodePacket=function(e){var t=o(i,e.type),n=e.id||"",l=e.endpoint||"",c=e.ack,u=null;switch(e.type){case"error":var p=e.reason?o(s,e.reason):"",d=e.advice?o(r,e.advice):"";(""!==p||""!==d)&&(u=p+(""!==d?"+"+d:""));break;case"message":""!==e.data&&(u=e.data);break;case"event":var h={name:e.name};e.args&&e.args.length&&(h.args=e.args),u=a.stringify(h);break;case"json":u=a.stringify(e.data);break;case"connect":e.qs&&(u=e.qs);break;case"ack":u=e.ackId+(e.args&&e.args.length?"+"+a.stringify(e.args):"")}var f=[t,n+("data"==c?"+":""),l];return null!==u&&void 0!==u&&f.push(u),f.join(":")},n.encodePayload=function(e){var t="";if(1==e.length)return e[0];for(var n=0,i=e.length;i>n;n++){var s=e[n];t+="�"+s.length+"�"+e[n]}return t};var l=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(e){var t=e.match(l);if(!t)return{};var n=t[2]||"",e=t[5]||"",o={type:i[t[1]],endpoint:t[4]||""};switch(n&&(o.id=n,o.ack=t[3]?"data":!0),o.type){case"error":var t=e.split("+");o.reason=s[t[0]]||"",o.advice=r[t[1]]||"";break;case"message":o.data=e||"";break;case"event":try{var c=a.parse(e);o.name=c.name,o.args=c.args}catch(u){}o.args=o.args||[];break;case"json":try{o.data=a.parse(e)}catch(u){}break;case"connect":o.qs=e||"";break;case"ack":var t=e.match(/^([0-9]+)(\+)?(.*)/);if(t&&(o.ackId=t[1],o.args=[],t[3]))try{o.args=t[3]?a.parse(t[3]):[]}catch(u){}break;case"disconnect":case"heartbeat":}return o},n.decodePayload=function(e){if("�"==e.charAt(0)){for(var t=[],i=1,s="";e.length>i;i++)"�"==e.charAt(i)?(t.push(n.decodePacket(e.substr(i+1).substr(0,s))),i+=Number(s)+1,s=""):s+=e.charAt(i);return t}return[n.decodePacket(e)]}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(e,t){function n(e,t){this.socket=e,this.sessid=t}e.Transport=n,t.util.mixin(n,t.EventEmitter),n.prototype.heartbeats=function(){return!0},n.prototype.onData=function(e){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==e){var n=t.parser.decodePayload(e);if(n&&n.length)for(var i=0,s=n.length;s>i;i++)this.onPacket(n[i])}return this},n.prototype.onPacket=function(e){return this.socket.setHeartbeatTimeout(),"heartbeat"==e.type?this.onHeartbeat():("connect"==e.type&&""==e.endpoint&&this.onConnect(),"error"==e.type&&"reconnect"==e.advice&&(this.isOpen=!1),this.socket.onPacket(e),this)},n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}},n.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},n.prototype.onConnect=function(){return this.socket.onConnect(),this},n.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},n.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},n.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},n.prototype.onHeartbeat=function(){this.packet({type:"heartbeat"})},n.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},n.prototype.onClose=function(){this.isOpen=!1,this.socket.onClose(),this.onDisconnect()},n.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},n.prototype.ready=function(e,t){t.call(this)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(e,t,n){function i(e){if(this.options={port:80,secure:!1,document:"document"in n?document:!1,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var i=this;t.util.on(n,"beforeunload",function(){i.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function s(){}e.Socket=i,t.util.mixin(i,t.EventEmitter),i.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),""!==e&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},i.prototype.publish=function(){this.emit.apply(this,arguments);var e;for(var t in this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t),e.$emit.apply(e,arguments))},i.prototype.handshake=function(e){function n(t){t instanceof Error?(i.connecting=!1,i.onError(t.message)):e.apply(null,t.split(":"))}var i=this,r=this.options,a=["http"+(r.secure?"s":"")+":/",r.host+":"+r.port,r.resource,t.protocol,t.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS){var o=document.getElementsByTagName("script")[0],l=document.createElement("script");l.src=a+"&jsonp="+t.j.length,o.parentNode.insertBefore(l,o),t.j.push(function(e){n(e),l.parentNode.removeChild(l)})}else{var c=t.util.request();c.open("GET",a,!0),this.isXDomain()&&(c.withCredentials=!0),c.onreadystatechange=function(){4==c.readyState&&(c.onreadystatechange=s,200==c.status?n(c.responseText):403==c.status?i.onError(c.responseText):(i.connecting=!1,!i.reconnecting&&i.onError(c.responseText)))},c.send(null)}},i.prototype.getTransport=function(e){for(var n,i=e||this.transports,s=0;n=i[s];s++)if(t.Transport[n]&&t.Transport[n].check(this)&&(!this.isXDomain()||t.Transport[n].xdomainCheck(this)))return new t.Transport[n](this,this.sessionid);return null},i.prototype.connect=function(e){if(this.connecting)return this;var n=this;return n.connecting=!0,this.handshake(function(i,s,r,a){function o(e){return n.transport&&n.transport.clearTimeouts(),n.transport=n.getTransport(e),n.transport?(n.transport.ready(n,function(){n.connecting=!0,n.publish("connecting",n.transport.name),n.transport.open(),n.options["connect timeout"]&&(n.connectTimeoutTimer=setTimeout(function(){if(!n.connected&&(n.connecting=!1,n.options["try multiple transports"])){for(var e=n.transports;e.length>0&&e.splice(0,1)[0]!=n.transport.name;);e.length?o(e):n.publish("connect_failed")}},n.options["connect timeout"]))}),void 0):n.publish("connect_failed")}n.sessionid=i,n.closeTimeout=1e3*r,n.heartbeatTimeout=1e3*s,n.transports||(n.transports=n.origTransports=a?t.util.intersect(a.split(","),n.options.transports):n.options.transports),n.setHeartbeatTimeout(),o(n.transports),n.once("connect",function(){clearTimeout(n.connectTimeoutTimer),e&&"function"==typeof e&&e()})}),this},i.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var e=this;this.heartbeatTimeoutTimer=setTimeout(function(){e.transport.onClose()},this.heartbeatTimeout)}},i.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},i.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},i.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},i.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},i.prototype.disconnectSync=function(){var e=t.util.request(),n=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,t.protocol,"",this.sessionid].join("/")+"/?disconnect=1";e.open("GET",n,!1),e.send(null),this.onDisconnect("booted")},i.prototype.isXDomain=function(){var e=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=e},i.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},i.prototype.onOpen=function(){this.open=!0},i.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},i.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},i.prototype.onError=function(e){e&&e.advice&&"reconnect"===e.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},i.prototype.onDisconnect=function(e){var t=this.connected,n=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(t||n)&&(this.transport.close(),this.transport.clearTimeouts(),t&&(this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},i.prototype.reconnect=function(){function e(){if(n.connected){for(var e in n.namespaces)n.namespaces.hasOwnProperty(e)&&""!==e&&n.namespaces[e].packet({type:"connect"});n.publish("reconnect",n.transport.name,n.reconnectionAttempts)}clearTimeout(n.reconnectionTimer),n.removeListener("connect_failed",t),n.removeListener("connect",t),n.reconnecting=!1,delete n.reconnectionAttempts,delete n.reconnectionDelay,delete n.reconnectionTimer,delete n.redoTransports,n.options["try multiple transports"]=s}function t(){return n.reconnecting?n.connected?e():n.connecting&&n.reconnecting?n.reconnectionTimer=setTimeout(t,1e3):(n.reconnectionAttempts++>=i?n.redoTransports?(n.publish("reconnect_failed"),e()):(n.on("connect_failed",t),n.options["try multiple transports"]=!0,n.transports=n.origTransports,n.transport=n.getTransport(),n.redoTransports=!0,n.connect()):(r>n.reconnectionDelay&&(n.reconnectionDelay*=2),n.connect(),n.publish("reconnecting",n.reconnectionDelay,n.reconnectionAttempts),n.reconnectionTimer=setTimeout(t,n.reconnectionDelay)),void 0):void 0}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var n=this,i=this.options["max reconnection attempts"],s=this.options["try multiple transports"],r=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(t,this.reconnectionDelay),this.on("connect",t)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports,this),function(e,t){function n(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new i(this,"json"),this.ackPackets=0,this.acks={}}function i(e,t){this.namespace=e,this.name=t}e.SocketNamespace=n,t.util.mixin(n,t.EventEmitter),n.prototype.$emit=t.EventEmitter.prototype.emit,n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},n.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},n.prototype.send=function(e,t){var n={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(n.id=++this.ackPackets,n.ack=!0,this.acks[n.id]=t),this.packet(n)},n.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[t.length-1],i={type:"event",name:e};return"function"==typeof n&&(i.id=++this.ackPackets,i.ack="data",this.acks[i.id]=n,t=t.slice(0,t.length-1)),i.args=t,this.packet(i)},n.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},n.prototype.onPacket=function(e){function n(){i.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}var i=this;switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var s=["message",e.data];"data"==e.ack?s.push(n):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,s);break;case"event":var s=[e.name].concat(e.args);"data"==e.ack&&s.push(n),this.$emit.apply(this,s);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":e.advice?this.socket.onError(e):"unauthorized"==e.reason?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},i.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},i.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}(io!==void 0?io:module.exports,io!==void 0?io:module.parent.exports),function(e,t,n){function i(){t.Transport.apply(this,arguments)}e.websocket=i,t.util.inherit(i,t.Transport),i.prototype.name="websocket",i.prototype.open=function(){var e,i=t.util.query(this.socket.options.query),s=this;return e||(e=n.MozWebSocket||n.WebSocket),this.websocket=new e(this.prepareUrl()+i),this.websocket.onopen=function(){s.onOpen(),s.socket.setBuffer(!1)},this.websocket.onmessage=function(e){s.onData(e.data)},this.websocket.onclose=function(){s.onClose(),s.socket.setBuffer(!0)},this.websocket.onerror=function(e){s.onError(e)},this},i.prototype.send=t.util.ua.iDevice?function(e){var t=this;return setTimeout(function(){t.websocket.send(e)},0),this}:function(e){return this.websocket.send(e),this},i.prototype.payload=function(e){for(var t=0,n=e.length;n>t;t++)this.packet(e[t]);return this},i.prototype.close=function(){return this.websocket.close(),this},i.prototype.onError=function(e){this.socket.onError(e)},i.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},i.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n},i.xdomainCheck=function(){return!0},t.transports.push("websocket")}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,this),function(e,t){function n(){t.Transport.websocket.apply(this,arguments)}e.flashsocket=n,t.util.inherit(n,t.Transport.websocket),n.prototype.name="flashsocket",n.prototype.open=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.open.apply(e,n)}),this},n.prototype.send=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.send.apply(e,n)}),this},n.prototype.close=function(){return WebSocket.__tasks.length=0,t.Transport.websocket.prototype.close.call(this),this},n.prototype.ready=function(e,i){function s(){var t=e.options,s=t["flash policy port"],a=["http"+(t.secure?"s":"")+":/",t.host+":"+t.port,t.resource,"static/flashsocket","WebSocketMain"+(e.isXDomain()?"Insecure":"")+".swf"];n.loaded||("undefined"==typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=a.join("/")),843!==s&&WebSocket.loadFlashPolicyFile("xmlsocket://"+t.host+":"+s),WebSocket.__initialize(),n.loaded=!0),i.call(r)}var r=this;return document.body?s():(t.util.load(s),void 0)},n.check=function(){return"undefined"!=typeof WebSocket&&"__initialize"in WebSocket&&swfobject?swfobject.getFlashPlayerVersion().major>=10:!1},n.xdomainCheck=function(){return!0},"undefined"!=typeof window&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),t.transports.push("flashsocket")}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports),"undefined"!=typeof window)var swfobject=function(){function e(){if(!H){try{var e=M.getElementsByTagName("body")[0].appendChild(m("span"));e.parentNode.removeChild(e)}catch(t){return}H=!0;for(var n=L.length,i=0;n>i;i++)L[i]()}}function t(e){H?e():L[L.length]=e}function n(e){if(typeof I.addEventListener!=E)I.addEventListener("load",e,!1);else if(typeof M.addEventListener!=E)M.addEventListener("load",e,!1);else if(typeof I.attachEvent!=E)g(I,"onload",e);else if("function"==typeof I.onload){var t=I.onload;I.onload=function(){t(),e()}}else I.onload=e}function i(){B?s():r()}function s(){var e=M.getElementsByTagName("body")[0],t=m($);t.setAttribute("type",D);var n=e.appendChild(t);if(n){var i=0;(function(){if(typeof n.GetVariable!=E){var s=n.GetVariable("$version");s&&(s=s.split(" ")[1].split(","),X.pv=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)])}else if(10>i)return i++,setTimeout(arguments.callee,10),void 0;e.removeChild(t),n=null,r()})()}else r()}function r(){var e=W.length;if(e>0)for(var t=0;e>t;t++){var n=W[t].id,i=W[t].callbackFn,s={success:!1,id:n};if(X.pv[0]>0){var r=v(n);if(r)if(!y(W[t].swfVersion)||X.wk&&312>X.wk)if(W[t].expressInstall&&o()){var u={};u.data=W[t].expressInstall,u.width=r.getAttribute("width")||"0",u.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(u.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(u.align=r.getAttribute("align"));for(var p={},d=r.getElementsByTagName("param"),h=d.length,f=0;h>f;f++)"movie"!=d[f].getAttribute("name").toLowerCase()&&(p[d[f].getAttribute("name")]=d[f].getAttribute("value"));l(u,p,n,i)}else c(r),i&&i(s);else w(n,!0),i&&(s.success=!0,s.ref=a(n),i(s))}else if(w(n,!0),i){var m=a(n);m&&typeof m.SetVariable!=E&&(s.success=!0,s.ref=m),i(s)}}}function a(e){var t=null,n=v(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=E)t=n;else{var i=n.getElementsByTagName($)[0];i&&(t=i)}return t}function o(){return!z&&y("6.0.65")&&(X.win||X.mac)&&!(X.wk&&312>X.wk)}function l(e,t,n,i){z=!0,S=i||null,C={success:!1,id:n};var s=v(n);if(s){"OBJECT"==s.nodeName?(k=u(s),_=null):(k=s,_=n),e.id=P,(typeof e.width==E||!/%$/.test(e.width)&&310>parseInt(e.width,10))&&(e.width="310"),(typeof e.height==E||!/%$/.test(e.height)&&137>parseInt(e.height,10))&&(e.height="137"),M.title=M.title.slice(0,47)+" - Flash Player Installation";var r=X.ie&&X.win?["Active"].concat("").join("X"):"PlugIn",a="MMredirectURL="+(""+I.location).replace(/&/g,"%26")+"&MMplayerType="+r+"&MMdoctitle="+M.title;if(typeof t.flashvars!=E?t.flashvars+="&"+a:t.flashvars=a,X.ie&&X.win&&4!=s.readyState){var o=m("div");n+="SWFObjectNew",o.setAttribute("id",n),s.parentNode.insertBefore(o,s),s.style.display="none",function(){4==s.readyState?s.parentNode.removeChild(s):setTimeout(arguments.callee,10)}()}p(e,t,n)}}function c(e){if(X.ie&&X.win&&4!=e.readyState){var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=m("div");if(X.win&&X.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName($)[0];if(n){var i=n.childNodes;if(i)for(var s=i.length,r=0;s>r;r++)(1!=i[r].nodeType||"PARAM"!=i[r].nodeName)&&8!=i[r].nodeType&&t.appendChild(i[r].cloneNode(!0))}}return t}function p(e,t,n){var i,s=v(n);if(X.wk&&312>X.wk)return i;if(s)if(typeof e.id==E&&(e.id=n),X.ie&&X.win){var r="";for(var a in e)e[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?t.movie=e[a]:"styleclass"==a.toLowerCase()?r+=' class="'+e[a]+'"':"classid"!=a.toLowerCase()&&(r+=" "+a+'="'+e[a]+'"'));var o="";for(var l in t)t[l]!=Object.prototype[l]&&(o+='<param name="'+l+'" value="'+t[l]+'" />');s.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+o+"</object>",q[q.length]=e.id,i=v(e.id)}else{var c=m($);c.setAttribute("type",D);for(var u in e)e[u]!=Object.prototype[u]&&("styleclass"==u.toLowerCase()?c.setAttribute("class",e[u]):"classid"!=u.toLowerCase()&&c.setAttribute(u,e[u]));for(var p in t)t[p]!=Object.prototype[p]&&"movie"!=p.toLowerCase()&&d(c,p,t[p]);s.parentNode.replaceChild(c,s),i=c}return i}function d(e,t,n){var i=m("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function h(e){var t=v(e);t&&"OBJECT"==t.nodeName&&(X.ie&&X.win?(t.style.display="none",function(){4==t.readyState?f(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function f(e){var t=v(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function v(e){var t=null;try{t=M.getElementById(e)}catch(n){}return t}function m(e){return M.createElement(e)}function g(e,t,n){e.attachEvent(t,n),R[R.length]=[e,t,n]}function y(e){var t=X.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function b(e,t,n,i){if(!X.ie||!X.mac){var s=M.getElementsByTagName("head")[0];if(s){var r=n&&"string"==typeof n?n:"screen";if(i&&(j=null,T=null),!j||T!=r){var a=m("style");a.setAttribute("type","text/css"),a.setAttribute("media",r),j=s.appendChild(a),X.ie&&X.win&&typeof M.styleSheets!=E&&M.styleSheets.length>0&&(j=M.styleSheets[M.styleSheets.length-1]),T=r}X.ie&&X.win?j&&typeof j.addRule==$&&j.addRule(e,t):j&&typeof M.createTextNode!=E&&j.appendChild(M.createTextNode(e+" {"+t+"}"))}}}function w(e,t){if(U){var n=t?"visible":"hidden";H&&v(e)?v(e).style.visibility=n:b("#"+e,"visibility:"+n)}}function x(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=E?encodeURIComponent(e):e}var k,_,S,C,j,T,E="undefined",$="object",N="Shockwave Flash",A="ShockwaveFlash.ShockwaveFlash",D="application/x-shockwave-flash",P="SWFObjectExprInst",O="onreadystatechange",I=window,M=document,F=navigator,B=!1,L=[i],W=[],q=[],R=[],H=!1,z=!1,U=!0,X=function(){var e=typeof M.getElementById!=E&&typeof M.getElementsByTagName!=E&&typeof M.createElement!=E,t=F.userAgent.toLowerCase(),n=F.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(t),s=n?/mac/.test(n):/mac/.test(t),r=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,a=!1,o=[0,0,0],l=null;if(typeof F.plugins!=E&&typeof F.plugins[N]==$)l=F.plugins[N].description,l&&(typeof F.mimeTypes==E||!F.mimeTypes[D]||!!F.mimeTypes[D].enabledPlugin)&&(B=!0,a=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),o[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),o[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),o[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof I[["Active"].concat("Object").join("X")]!=E)try{var c=new(window[["Active"].concat("Object").join("X")])(A);c&&(l=c.GetVariable("$version"),l&&(a=!0,l=l.split(" ")[1].split(","),o=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))
}catch(u){}return{w3:e,pv:o,wk:r,ie:a,win:i,mac:s}}();return function(){X.w3&&((typeof M.readyState!=E&&"complete"==M.readyState||typeof M.readyState==E&&(M.getElementsByTagName("body")[0]||M.body))&&e(),H||(typeof M.addEventListener!=E&&M.addEventListener("DOMContentLoaded",e,!1),X.ie&&X.win&&(M.attachEvent(O,function(){"complete"==M.readyState&&(M.detachEvent(O,arguments.callee),e())}),I==top&&function(){if(!H){try{M.documentElement.doScroll("left")}catch(t){return setTimeout(arguments.callee,0),void 0}e()}}()),X.wk&&function(){return H?void 0:/loaded|complete/.test(M.readyState)?(e(),void 0):(setTimeout(arguments.callee,0),void 0)}(),n(e)))}(),function(){X.ie&&X.win&&window.attachEvent("onunload",function(){for(var e=R.length,t=0;e>t;t++)R[t][0].detachEvent(R[t][1],R[t][2]);for(var n=q.length,i=0;n>i;i++)h(q[i]);for(var s in X)X[s]=null;X=null;for(var r in swfobject)swfobject[r]=null;swfobject=null})}(),{registerObject:function(e,t,n,i){if(X.w3&&e&&t){var s={};s.id=e,s.swfVersion=t,s.expressInstall=n,s.callbackFn=i,W[W.length]=s,w(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){return X.w3?a(e):void 0},embedSWF:function(e,n,i,s,r,a,c,u,d,h){var f={success:!1,id:n};X.w3&&!(X.wk&&312>X.wk)&&e&&n&&i&&s&&r?(w(n,!1),t(function(){i+="",s+="";var t={};if(d&&typeof d===$)for(var v in d)t[v]=d[v];t.data=e,t.width=i,t.height=s;var m={};if(u&&typeof u===$)for(var g in u)m[g]=u[g];if(c&&typeof c===$)for(var b in c)typeof m.flashvars!=E?m.flashvars+="&"+b+"="+c[b]:m.flashvars=b+"="+c[b];if(y(r)){var x=p(t,m,n);t.id==n&&w(n,!0),f.success=!0,f.ref=x}else{if(a&&o())return t.data=a,l(t,m,n,h),void 0;w(n,!0)}h&&h(f)})):h&&h(f)},switchOffAutoHideShow:function(){U=!1},ua:X,getFlashPlayerVersion:function(){return{major:X.pv[0],minor:X.pv[1],release:X.pv[2]}},hasFlashPlayerVersion:y,createSWF:function(e,t,n){return X.w3?p(e,t,n):void 0},showExpressInstall:function(e,t,n,i){X.w3&&o()&&l(e,t,n,i)},removeSWF:function(e){X.w3&&h(e)},createCSS:function(e,t,n,i){X.w3&&b(e,t,n,i)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=M.location.search||M.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return x(t);for(var n=t.split("&"),i=0;n.length>i;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return x(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(z){var e=v(P);e&&k&&(e.parentNode.replaceChild(k,e),_&&(w(_,!0),X.ie&&X.win&&(k.style.display="block")),S&&S(C)),z=!1}}}}();(function(){if("undefined"!=typeof window&&!window.WebSocket){var e=window.console;return e&&e.log&&e.error||(e={log:function(){},error:function(){}}),swfobject.hasFlashPlayerVersion("10.0.0")?("file:"==location.protocol&&e.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(e,t,n,i,s){var r=this;r.__id=WebSocket.__nextId++,WebSocket.__instances[r.__id]=r,r.readyState=WebSocket.CONNECTING,r.bufferedAmount=0,r.__events={},t?"string"==typeof t&&(t=[t]):t=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(r.__id,e,t,n||null,i||0,s||null)})},0)},WebSocket.prototype.send=function(e){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var t=WebSocket.__flash.send(this.__id,encodeURIComponent(e));return 0>t?!0:(this.bufferedAmount+=t,!1)},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(e,t){e in this.__events||(this.__events[e]=[]),this.__events[e].push(t)},WebSocket.prototype.removeEventListener=function(e,t){if(e in this.__events)for(var n=this.__events[e],i=n.length-1;i>=0;--i)if(n[i]===t){n.splice(i,1);break}},WebSocket.prototype.dispatchEvent=function(e){for(var t=this.__events[e.type]||[],n=0;t.length>n;++n)t[n](e);var i=this["on"+e.type];i&&i(e)},WebSocket.prototype.__handleEvent=function(e){"readyState"in e&&(this.readyState=e.readyState),"protocol"in e&&(this.protocol=e.protocol);var t;if("open"==e.type||"error"==e.type)t=this.__createSimpleEvent(e.type);else if("close"==e.type)t=this.__createSimpleEvent("close");else{if("message"!=e.type)throw"unknown event type: "+e.type;var n=decodeURIComponent(e.message);t=this.__createMessageEvent("message",n)}this.dispatchEvent(t)},WebSocket.prototype.__createSimpleEvent=function(e){if(document.createEvent&&window.Event){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}return{type:e,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(e,t){if(document.createEvent&&window.MessageEvent&&!window.opera){var n=document.createEvent("MessageEvent");return n.initMessageEvent("message",!1,!1,t,null,null,window,null),n}return{type:e,data:t,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(e){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(e)})},WebSocket.__initialize=function(){if(!WebSocket.__flash){if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),!window.WEB_SOCKET_SWF_LOCATION)return e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf"),void 0;var t=document.createElement("div");t.id="webSocketContainer",t.style.position="absolute",WebSocket.__isFlashLite()?(t.style.left="0px",t.style.top="0px"):(t.style.left="-100px",t.style.top="-100px");var n=document.createElement("div");n.id="webSocketFlash",t.appendChild(n),document.body.appendChild(t),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(t){t.success||e.error("[WebSocket] swfobject.embedSWF failed")})}},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var e=0;WebSocket.__tasks.length>e;++e)WebSocket.__tasks[e]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{for(var t=WebSocket.__flash.receiveEvents(),n=0;t.length>n;++n)WebSocket.__instances[t[n].webSocketId].__handleEvent(t[n])}catch(i){e.error(i)}},0),!0},WebSocket.__log=function(t){e.log(decodeURIComponent(t))},WebSocket.__error=function(t){e.error(decodeURIComponent(t))},WebSocket.__addTask=function(e){WebSocket.__flash?e():WebSocket.__tasks.push(e)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var e=window.navigator.mimeTypes["application/x-shockwave-flash"];return e&&e.enabledPlugin&&e.enabledPlugin.filename?e.enabledPlugin.filename.match(/flashlite/i)?!0:!1:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()})),void 0):(e.error("Flash Player >= 10.0.0 is required."),void 0)}})(),function(e,t,n){function i(e){e&&(t.Transport.apply(this,arguments),this.sendBuffer=[])}function s(){}e.XHR=i,t.util.inherit(i,t.Transport),i.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},i.prototype.payload=function(e){for(var n=[],i=0,s=e.length;s>i;i++)n.push(t.parser.encodePacket(e[i]));this.send(t.parser.encodePayload(n))},i.prototype.send=function(e){return this.post(e),this},i.prototype.post=function(e){function t(){4==this.readyState&&(this.onreadystatechange=s,r.posting=!1,200==this.status?r.socket.setBuffer(!1):r.onClose())}function i(){this.onload=s,r.socket.setBuffer(!1)}var r=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),n.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=i:this.sendXHR.onreadystatechange=t,this.sendXHR.send(e)},i.prototype.close=function(){return this.onClose(),this},i.prototype.request=function(e){var n=t.util.request(this.socket.isXDomain()),i=t.util.query(this.socket.options.query,"t="+ +new Date);if(n.open(e||"GET",this.prepareUrl()+i,!0),"POST"==e)try{n.setRequestHeader?n.setRequestHeader("Content-type","text/plain;charset=UTF-8"):n.contentType="text/plain"}catch(s){}return n},i.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},i.check=function(e,i){try{var s=t.util.request(i),r=n.XDomainRequest&&s instanceof XDomainRequest,a=e&&e.options&&e.options.secure?"https:":"http:",o=n.location&&a!=n.location.protocol;if(s&&(!r||!o))return!0}catch(l){}return!1},i.xdomainCheck=function(e){return i.check(e,!0)}}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,this),function(e,t){function n(){t.Transport.XHR.apply(this,arguments)}e.htmlfile=n,t.util.inherit(n,t.Transport.XHR),n.prototype.name="htmlfile",n.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var e=this.doc.createElement("div");e.className="socketio",this.doc.body.appendChild(e),this.iframe=this.doc.createElement("iframe"),e.appendChild(this.iframe);var n=this,i=t.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+i,t.util.on(window,"unload",function(){n.destroy()})},n.prototype._=function(e,t){e=e.replace(/\\\//g,"/"),this.onData(e);try{var n=t.getElementsByTagName("script")[0];n.parentNode.removeChild(n)}catch(i){}},n.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},n.prototype.close=function(){return this.destroy(),t.Transport.XHR.prototype.close.call(this)},n.check=function(e){if("undefined"!=typeof window&&["Active"].concat("Object").join("X")in window)try{var n=new(window[["Active"].concat("Object").join("X")])("htmlfile");return n&&t.Transport.XHR.check(e)}catch(i){}return!1},n.xdomainCheck=function(){return!1},t.transports.push("htmlfile")}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports),function(e,t,n){function i(){t.Transport.XHR.apply(this,arguments)}function s(){}e["xhr-polling"]=i,t.util.inherit(i,t.Transport.XHR),t.util.merge(i,t.Transport.XHR),i.prototype.name="xhr-polling",i.prototype.heartbeats=function(){return!1},i.prototype.open=function(){var e=this;return t.Transport.XHR.prototype.open.call(e),!1},i.prototype.get=function(){function e(){4==this.readyState&&(this.onreadystatechange=s,200==this.status?(r.onData(this.responseText),r.get()):r.onClose())}function t(){this.onload=s,this.onerror=s,r.retryCounter=1,r.onData(this.responseText),r.get()}function i(){r.retryCounter++,!r.retryCounter||r.retryCounter>3?r.onClose():r.get()}if(this.isOpen){var r=this;this.xhr=this.request(),n.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=t,this.xhr.onerror=i):this.xhr.onreadystatechange=e,this.xhr.send(null)}},i.prototype.onClose=function(){if(t.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=s;try{this.xhr.abort()}catch(e){}this.xhr=null}},i.prototype.ready=function(e,n){var i=this;t.util.defer(function(){n.call(i)})},t.transports.push("xhr-polling")}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,this),function(e,t,n){function i(){t.Transport["xhr-polling"].apply(this,arguments),this.index=t.j.length;var e=this;t.j.push(function(t){e._(t)})}var s=n.document&&"MozAppearance"in n.document.documentElement.style;e["jsonp-polling"]=i,t.util.inherit(i,t.Transport["xhr-polling"]),i.prototype.name="jsonp-polling",i.prototype.post=function(e){function n(){i(),s.socket.setBuffer(!1)}function i(){s.iframe&&s.form.removeChild(s.iframe);try{a=document.createElement('<iframe name="'+s.iframeId+'">')}catch(e){a=document.createElement("iframe"),a.name=s.iframeId}a.id=s.iframeId,s.form.appendChild(a),s.iframe=a}var s=this,r=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var a,o=document.createElement("form"),l=document.createElement("textarea"),c=this.iframeId="socketio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.style.display="none",o.target=c,o.method="POST",o.setAttribute("accept-charset","utf-8"),l.name="d",o.appendChild(l),document.body.appendChild(o),this.form=o,this.area=l}this.form.action=this.prepareUrl()+r,i(),this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(u){}this.iframe.attachEvent?a.onreadystatechange=function(){"complete"==s.iframe.readyState&&n()}:this.iframe.onload=n,this.socket.setBuffer(!0)},i.prototype.get=function(){var e=this,n=document.createElement("script"),i=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),n.async=!0,n.src=this.prepareUrl()+i,n.onerror=function(){e.onClose()};var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r),this.script=n,s&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype._=function(e){return this.onData(e),this.isOpen&&this.get(),this},i.prototype.ready=function(e,n){var i=this;return s?(t.util.load(function(){n.call(i)}),void 0):n.call(this)},i.check=function(){return"document"in n},i.xdomainCheck=function(){return!0},t.transports.push("jsonp-polling")}(io!==void 0?io.Transport:module.exports,io!==void 0?io:module.parent.exports,this),"function"==typeof define&&define.amd&&define([],function(){return io})})()}),require.define("/client/lib/parseMessage.js",function(e,t){var n={"<a href='mailto:$1' class='contact email'>$1</a>":/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gi,"<a href='javascript:void(0)' class='contact phone'> $1$2$3$4 </a>":/\W([0-9+\s]{9,16})\W|^([0-9+\s]{9,16})\W|\W([0-9+\s]{9,16})$|^([0-9+\s]{9,16})$/g,"<img src=\"$1\" style='max-width:100%;'/>":/\[\s*?img\s*?=\s*?((https?:\/\/[^"']*|data:image\/(jpeg|jpg|png|gif);base64,[^"'\s]*?))\s*?\]/gi,"<a href=\"$1\" target='_blank'>$1</a>":/(https?:\/\/[a-z0-9\-_\.\/=&?,%]*)/gi,"<a href='javascript:void(0)' class='contact postcode'> $1$2$3$4 </a>":/^([A-Z]{1,2}[0-9]{1,2}[A-Z]?\s?\d[A-Z]{2})$|^([A-Z]{1,2}[0-9]{1,2}[A-Z]?\s?\d[A-Z]{2})\W|\W([A-Z]{1,2}[0-9]{1,2}[A-Z]?\s?\d[A-Z]{2})$|\W([A-Z]{1,2}[0-9]{1,2}[A-Z]?\s?\d[A-Z]{2})\W/gi},i={generic:e("./message_templates/generic.jade"),button:e("./message_templates/button.jade")};t.exports=function(e){if(e.match(/^\[json:(.*)\]$/)){var t=e.replace(/^\[json:(.*)\]$/,"$1"),s=JSON.parse(t),r=s.template_type;if(_.has(i,r)){var a=i[r];s.message_templates=i;var o=a(s);return o}return"Template Error: Can't find template '"+r+"'"}var l=0,c={};for(key in n){var u=e.match(n[key]);if(u){u=u.map(function(e){return e.replace(n[key],key)});var p="___"+l++ +"___";e=e.replace(n[key],p),c[p]=u}}e=jade.escape(e);for(var d in c)for(var h=c[d],f=0;h.length>f;f++)e=e.replace(d,h[f]);return e}}),require.define("/client/lib/message_templates/generic.jade",function(e,t){t.exports=function(e){var t,n=[],i=e||{};return function(e,i){(function(){var s=e;if("number"==typeof s.length)for(var r=0,a=s.length;a>r;r++){var o=s[r];n.push('<div class="generic-template-box">'),o.image_url&&n.push('<div class="website-img"><img'+jade.attr("src",o.image_url,!0,!1)+jade.attr("alt",o.title,!0,!1)+"/></div>"),o.title&&(n.push('<div class="website-heading"><h2>'+jade.escape(null==(t=o.title)?"":t)+"</h2>"),o.subtitle&&n.push("<span>"+jade.escape(null==(t=o.subtitle)?"":t)+"</span>"),n.push("</div>")),o.buttons&&(n.push('<div class="website-buttons">'),function(){var e=o.buttons;if("number"==typeof e.length)for(var s=0,r=e.length;r>s;s++){var a=e[s];"postback"===a.type?n.push('<p><a href="javascript: void(0);"'+jade.attr("data-postback",""+a.payload+"",!0,!1)+jade.attr("data-text",""+a.title+"",!0,!1)+' onclick="[].slice.call(this.parentNode.parentNode.querySelectorAll(\'.local-url-link\')||[]).forEach(function(el){ el.onclick = null; });" class="postback-action">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>"):"web_url"===a.type?n.push("<p><a"+jade.attr("href",a.url,!0,!1)+' target="_blank">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>"):"local_url"===a.type&&n.push('<p><a href="javascript: void(0);"'+jade.attr("data-local-link",""+i.location.protocol+"//"+i.location.host+""+a.url+"",!0,!1)+' target="_self" class="local-url-link">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>")}else{var r=0;for(var s in e){r++;var a=e[s];"postback"===a.type?n.push('<p><a href="javascript: void(0);"'+jade.attr("data-postback",""+a.payload+"",!0,!1)+jade.attr("data-text",""+a.title+"",!0,!1)+' onclick="[].slice.call(this.parentNode.parentNode.querySelectorAll(\'.local-url-link\')||[]).forEach(function(el){ el.onclick = null; });" class="postback-action">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>"):"web_url"===a.type?n.push("<p><a"+jade.attr("href",a.url,!0,!1)+' target="_blank">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>"):"local_url"===a.type&&n.push('<p><a href="javascript: void(0);"'+jade.attr("data-local-link",""+i.location.protocol+"//"+i.location.host+""+a.url+"",!0,!1)+' target="_self" class="local-url-link">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>")}}}.call(this),n.push("</div>")),n.push("</div>")}else{var a=0;for(var r in s){a++;var o=s[r];n.push('<div class="generic-template-box">'),o.image_url&&n.push('<div class="website-img"><img'+jade.attr("src",o.image_url,!0,!1)+jade.attr("alt",o.title,!0,!1)+"/></div>"),o.title&&(n.push('<div class="website-heading"><h2>'+jade.escape(null==(t=o.title)?"":t)+"</h2>"),o.subtitle&&n.push("<span>"+jade.escape(null==(t=o.subtitle)?"":t)+"</span>"),n.push("</div>")),o.buttons&&(n.push('<div class="website-buttons">'),function(){var e=o.buttons;if("number"==typeof e.length)for(var s=0,r=e.length;r>s;s++){var a=e[s];"postback"===a.type?n.push('<p><a href="javascript: void(0);"'+jade.attr("data-postback",""+a.payload+"",!0,!1)+jade.attr("data-text",""+a.title+"",!0,!1)+' onclick="[].slice.call(this.parentNode.parentNode.querySelectorAll(\'.local-url-link\')||[]).forEach(function(el){ el.onclick = null; });" class="postback-action">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>"):"web_url"===a.type?n.push("<p><a"+jade.attr("href",a.url,!0,!1)+' target="_blank">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>"):"local_url"===a.type&&n.push('<p><a href="javascript: void(0);"'+jade.attr("data-local-link",""+i.location.protocol+"//"+i.location.host+""+a.url+"",!0,!1)+' target="_self" class="local-url-link">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>")}else{var r=0;for(var s in e){r++;var a=e[s];"postback"===a.type?n.push('<p><a href="javascript: void(0);"'+jade.attr("data-postback",""+a.payload+"",!0,!1)+jade.attr("data-text",""+a.title+"",!0,!1)+' onclick="[].slice.call(this.parentNode.parentNode.querySelectorAll(\'.local-url-link\')||[]).forEach(function(el){ el.onclick = null; });" class="postback-action">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>"):"web_url"===a.type?n.push("<p><a"+jade.attr("href",a.url,!0,!1)+' target="_blank">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>"):"local_url"===a.type&&n.push('<p><a href="javascript: void(0);"'+jade.attr("data-local-link",""+i.location.protocol+"//"+i.location.host+""+a.url+"",!0,!1)+' target="_self" class="local-url-link">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>")}}}.call(this),n.push("</div>")),n.push("</div>")}}}).call(this)}.call(this,"elements"in i?i.elements:"undefined"!=typeof elements?elements:void 0,"window"in i?i.window:"undefined"!=typeof window?window:void 0),n.join("")}}),require.define("/client/lib/message_templates/button.jade",function(e,t){t.exports=function(e){var t,n=[],i=e||{};return function(e,i){(function(){var s=e;if("number"==typeof s.length)for(var r=0,a=s.length;a>r;r++){var o=s[r];n.push('<div class="buttons-template-box">'),o.title&&(n.push('<div class="website-heading"><h2>'+jade.escape(null==(t=o.title)?"":t)+"</h2>"),o.subtitle&&n.push("<span>"+jade.escape(null==(t=o.subtitle)?"":t)+"</span>"),n.push("</div>")),o.buttons&&(n.push('<div class="website-buttons">'),function(){var e=o.buttons;if("number"==typeof e.length)for(var s=0,r=e.length;r>s;s++){var a=e[s];"postback"===a.type?n.push('<p><a href="javascript: void(0);"'+jade.attr("data-postback",""+a.payload+"",!0,!1)+jade.attr("data-text",""+a.title+"",!0,!1)+' onclick="[].slice.call(this.parentNode.parentNode.querySelectorAll(\'.local-url-link\')||[]).forEach(function(el){ el.onclick = null; });" class="postback-action">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>"):"web_url"===a.type?n.push("<p><a"+jade.attr("href",a.url,!0,!1)+' target="_blank">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>"):"local_url"===a.type&&n.push('<p><a href="javascript: void(0);"'+jade.attr("onclick","window.location.href='"+i.location.protocol+"//"+i.location.host+""+a.url+"'",!0,!1)+' target="_self" class="local-url-link">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>")}else{var r=0;for(var s in e){r++;var a=e[s];"postback"===a.type?n.push('<p><a href="javascript: void(0);"'+jade.attr("data-postback",""+a.payload+"",!0,!1)+jade.attr("data-text",""+a.title+"",!0,!1)+' onclick="[].slice.call(this.parentNode.parentNode.querySelectorAll(\'.local-url-link\')||[]).forEach(function(el){ el.onclick = null; });" class="postback-action">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>"):"web_url"===a.type?n.push("<p><a"+jade.attr("href",a.url,!0,!1)+' target="_blank">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>"):"local_url"===a.type&&n.push('<p><a href="javascript: void(0);"'+jade.attr("onclick","window.location.href='"+i.location.protocol+"//"+i.location.host+""+a.url+"'",!0,!1)+' target="_self" class="local-url-link">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>")}}}.call(this),n.push("</div>")),n.push("</div>")}else{var a=0;for(var r in s){a++;var o=s[r];n.push('<div class="buttons-template-box">'),o.title&&(n.push('<div class="website-heading"><h2>'+jade.escape(null==(t=o.title)?"":t)+"</h2>"),o.subtitle&&n.push("<span>"+jade.escape(null==(t=o.subtitle)?"":t)+"</span>"),n.push("</div>")),o.buttons&&(n.push('<div class="website-buttons">'),function(){var e=o.buttons;if("number"==typeof e.length)for(var s=0,r=e.length;r>s;s++){var a=e[s];"postback"===a.type?n.push('<p><a href="javascript: void(0);"'+jade.attr("data-postback",""+a.payload+"",!0,!1)+jade.attr("data-text",""+a.title+"",!0,!1)+' onclick="[].slice.call(this.parentNode.parentNode.querySelectorAll(\'.local-url-link\')||[]).forEach(function(el){ el.onclick = null; });" class="postback-action">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>"):"web_url"===a.type?n.push("<p><a"+jade.attr("href",a.url,!0,!1)+' target="_blank">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>"):"local_url"===a.type&&n.push('<p><a href="javascript: void(0);"'+jade.attr("onclick","window.location.href='"+i.location.protocol+"//"+i.location.host+""+a.url+"'",!0,!1)+' target="_self" class="local-url-link">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>")}else{var r=0;for(var s in e){r++;var a=e[s];"postback"===a.type?n.push('<p><a href="javascript: void(0);"'+jade.attr("data-postback",""+a.payload+"",!0,!1)+jade.attr("data-text",""+a.title+"",!0,!1)+' onclick="[].slice.call(this.parentNode.parentNode.querySelectorAll(\'.local-url-link\')||[]).forEach(function(el){ el.onclick = null; });" class="postback-action">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>"):"web_url"===a.type?n.push("<p><a"+jade.attr("href",a.url,!0,!1)+' target="_blank">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>"):"local_url"===a.type&&n.push('<p><a href="javascript: void(0);"'+jade.attr("onclick","window.location.href='"+i.location.protocol+"//"+i.location.host+""+a.url+"'",!0,!1)+' target="_self" class="local-url-link">'+jade.escape(null==(t=a.title)?"":t)+"</a></p>")}}}.call(this),n.push("</div>")),n.push("</div>")}}}).call(this)}.call(this,"elements"in i?i.elements:"undefined"!=typeof elements?elements:void 0,"window"in i?i.window:"undefined"!=typeof window?window:void 0),n.join("")}}),require.define("/client/app/panel/views/ChatSection/MessageTemplate.jade",function(e,t){t.exports=function(e){var t,n=[],i=e||{};return function(e,i,s,r,a){var o=(""+new e(i.get("sendTime"))).slice(16,24);if("Operators"===i.get("sender").$ref){var l=i.get("name").trim()?!1:!0;n.push('<div class="operatorBox media"><div class="imgWrapper"><div class="operatorImg pull-left">'),"System message"==i.get("name")||l?n.push('<span style="font-size:45px;color: rgb(63, 95, 169)" class="glyphicon glyphicon-info-sign"></span>'):n.push("<img"+jade.attr("src",s.operator.photo,!0,!1)+' class="media-object"/>'),n.push('</div></div><div class="stuffWrapper media-body">'),i.get("name")?n.push('<div class="operatorName">'+jade.escape(null==(t=i.get("name"))?"":t)+"</div>"):n.push('<div class="operatorName">'+jade.escape(null==(t=s.operator.title)?"":t)+"</div>"),n.push('<div class="message">'+(null==(t=r(i.get("message")))?"":t)+'</div></div><div class="timer">'+jade.escape(null==(t=o)?"":t)+"</div></div>")}else s.client&&(n.push('<div class="operatorBox media clientBox"><div class="imgClientWrapper"><div class="clientImg pull-right"><img src="/public/images/icons/defaultFantasticClient.png" srcset="/public/images/icons/defaultFantasticClient_2x.png 2x" class="media-object"/></div></div><div class="stuffWrapperClient media-body"><div style="overflow:auto;" class="clientWrapper"><div class="clientName pull-left">'+jade.escape(null==(t=s.client.name)?"":t)+" </div>"),a.payment&&n.push('<span class="showPayment pull-right"><i class="fa fa-money"></i></span>'),n.push('</div><div class="messageClient">'+(null==(t=r(i.get("message")))?"":t)+'</div></div><div class="timerClient">'+jade.escape(null==(t=o)?"":t)+"</div></div>"))}.call(this,"Date"in i?i.Date:"undefined"!=typeof Date?Date:void 0,"message"in i?i.message:"undefined"!=typeof message?message:void 0,"chatSession"in i?i.chatSession:"undefined"!=typeof chatSession?chatSession:void 0,"parse"in i?i.parse:"undefined"!=typeof parse?parse:void 0,"localStorage"in i?i.localStorage:"undefined"!=typeof localStorage?localStorage:void 0),n.join("")}}),require.define("/client/lib/scroll.js",function(){function e(e){var t=e||window.event,n=[].slice.call(arguments,1),i=0,s=0,r=0;return e=$.event.fix(t),e.type="mousewheel",t.wheelDelta&&(i=t.wheelDelta/120),t.detail&&(i=-t.detail/3),r=i,void 0!==t.axis&&t.axis===t.HORIZONTAL_AXIS&&(r=0,s=-1*i),void 0!==t.wheelDeltaY&&(r=t.wheelDeltaY/120),void 0!==t.wheelDeltaX&&(s=-1*t.wheelDeltaX/120),n.unshift(e,i,s,r),($.event.dispatch||$.event.handle).apply(this,n)}var t=["DOMMouseScroll","mousewheel"];if($.event.fixHooks)for(var n=t.length;n;)$.event.fixHooks[t[--n]]=$.event.mouseHooks;$.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var n=t.length;n;)this.addEventListener(t[--n],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var n=t.length;n;)this.removeEventListener(t[--n],e,!1);else this.onmousewheel=null}},$.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}});var i={wheelSpeed:10,wheelPropagation:!1,minScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0};$.fn.perfectScrollbar=function(e,t){return this.each(function(){var n=$.extend(!0,{},i),s=$(this);if("object"==typeof e?$.extend(!0,n,e):t=e,"update"===t)return s.data("perfect-scrollbar-update")&&s.data("perfect-scrollbar-update")(),s;if("destroy"===t)return s.data("perfect-scrollbar-destroy")&&s.data("perfect-scrollbar-destroy")(),s;if(s.data("perfect-scrollbar"))return s.data("perfect-scrollbar");s.addClass("ps-container");var r,a,o,l,c,u,p,d,h,f,v=$("<div class='ps-scrollbar-x-rail'></div>").appendTo(s),m=$("<div class='ps-scrollbar-y-rail'></div>").appendTo(s),g=$("<div class='ps-scrollbar-x'></div>").appendTo(v),y=$("<div class='ps-scrollbar-y'></div>").appendTo(m),b=parseInt(v.css("bottom"),10),w=parseInt(m.css("right"),10),x=function(){var e=parseInt(f*(u-l)/(l-h),10);s.scrollTop(e),v.css({bottom:b-e})},k=function(){var e=parseInt(d*(c-o)/(o-p),10);s.scrollLeft(e),m.css({right:w-e})},_=function(e){return n.minScrollbarLength&&(e=Math.max(e,n.minScrollbarLength)),e},S=function(){v.css({left:s.scrollLeft(),bottom:b-s.scrollTop(),width:o,display:n.suppressScrollX?"none":"inherit"}),m.css({top:s.scrollTop(),right:w-s.scrollLeft(),height:l,display:n.suppressScrollY?"none":"inherit"}),g.css({left:d,width:p}),y.css({top:f,height:h})},C=function(){o=s.width(),l=s.height(),c=s.prop("scrollWidth"),u=s.prop("scrollHeight"),!n.suppressScrollX&&c>o+n.scrollXMarginOffset?(r=!0,p=_(parseInt(o*o/c,10)),d=parseInt(s.scrollLeft()*(o-p)/(c-o),10)):(r=!1,p=0,d=0,s.scrollLeft(0)),!n.suppressScrollY&&u>l+n.scrollYMarginOffset?(a=!0,h=_(parseInt(l*l/u,10)),f=parseInt(s.scrollTop()*(l-h)/(u-l),10)):(a=!1,h=0,f=0,s.scrollTop(0)),f>=l-h&&(f=l-h),d>=o-p&&(d=o-p),S()},j=function(e,t){var n=e+t,i=o-p;d=0>n?0:n>i?i:n,v.css({left:s.scrollLeft()}),g.css({left:d})},T=function(e,t){var n=e+t,i=l-h;f=0>n?0:n>i?i:n,m.css({top:s.scrollTop()}),y.css({top:f})},E=function(){var e,t;g.bind("mousedown.perfect-scrollbar",function(n){t=n.pageX,e=g.position().left,v.addClass("in-scrolling"),n.stopPropagation(),n.preventDefault()}),$(document).bind("mousemove.perfect-scrollbar",function(n){v.hasClass("in-scrolling")&&(k(),j(e,n.pageX-t),n.stopPropagation(),n.preventDefault())}),$(document).bind("mouseup.perfect-scrollbar",function(){v.hasClass("in-scrolling")&&v.removeClass("in-scrolling")}),e=t=null},N=function(){var e,t;y.bind("mousedown.perfect-scrollbar",function(n){t=n.pageY,e=y.position().top,m.addClass("in-scrolling"),n.stopPropagation(),n.preventDefault()}),$(document).bind("mousemove.perfect-scrollbar",function(n){m.hasClass("in-scrolling")&&(x(),T(e,n.pageY-t),n.stopPropagation(),n.preventDefault())}),$(document).bind("mouseup.perfect-scrollbar",function(){m.hasClass("in-scrolling")&&m.removeClass("in-scrolling")}),e=t=null},A=function(){var e=function(e,t){var i=s.scrollTop();if(0===i&&t>0&&0===e)return!n.wheelPropagation;if(i>=u-l&&0>t&&0===e)return!n.wheelPropagation;var r=s.scrollLeft();return 0===r&&0>e&&0===t?!n.wheelPropagation:r>=c-o&&e>0&&0===t?!n.wheelPropagation:!0},t=!1;s.bind("mousewheel.perfect-scrollbar",function(i,o,l,c){n.useBothWheelAxes?a&&!r?c?s.scrollTop(s.scrollTop()-c*n.wheelSpeed):s.scrollTop(s.scrollTop()+l*n.wheelSpeed):r&&!a&&(l?s.scrollLeft(s.scrollLeft()+l*n.wheelSpeed):s.scrollLeft(s.scrollLeft()-c*n.wheelSpeed)):(s.scrollTop(s.scrollTop()-c*n.wheelSpeed),s.scrollLeft(s.scrollLeft()+l*n.wheelSpeed)),C(),t=e(l,c),t&&i.preventDefault()}),s.bind("MozMousePixelScroll.perfect-scrollbar",function(e){t&&e.preventDefault()})},D=function(){var e=function(e,t){var n=s.scrollTop();if(0===n&&t>0&&0===e)return!1;if(n>=u-l&&0>t&&0===e)return!1;var i=s.scrollLeft();return 0===i&&0>e&&0===t?!1:i>=c-o&&e>0&&0===t?!1:!0},t=!1;s.bind("mouseenter.perfect-scrollbar",function(){t=!0}),s.bind("mouseleave.perfect-scrollbar",function(){t=!1});var i=!1;$(document).bind("keydown.perfect-scrollbar",function(r){if(t){var a=0,o=0;switch(r.which){case 37:a=-3;break;case 38:o=3;break;case 39:a=3;break;case 40:o=-3;break;default:return}s.scrollTop(s.scrollTop()-o*n.wheelSpeed),s.scrollLeft(s.scrollLeft()+a*n.wheelSpeed),C(),i=e(a,o),i&&r.preventDefault()
}})},P=function(){var e=function(e){e.stopPropagation()};y.bind("click.perfect-scrollbar",e),m.bind("click.perfect-scrollbar",function(e){var t=parseInt(h/2,10),n=e.pageY-m.offset().top-t,i=l-h,r=n/i;0>r?r=0:r>1&&(r=1),s.scrollTop((u-l)*r),C()}),g.bind("click.perfect-scrollbar",e),v.bind("click.perfect-scrollbar",function(e){var t=parseInt(p/2,10),n=e.pageX-v.offset().left-t,i=o-p,r=n/i;0>r?r=0:r>1&&(r=1),s.scrollLeft((c-o)*r),C()})},O=function(){var e=function(e,t){s.scrollTop(s.scrollTop()-t),s.scrollLeft(s.scrollLeft()-e),C()},t={},n=0,i={},r=null,a=!1;$(window).bind("touchstart.perfect-scrollbar",function(){a=!0}),$(window).bind("touchend.perfect-scrollbar",function(){a=!1}),s.bind("touchstart.perfect-scrollbar",function(e){var i=e.originalEvent.targetTouches[0];t.pageX=i.pageX,t.pageY=i.pageY,n=(new Date).getTime(),null!==r&&clearInterval(r),e.stopPropagation()}),s.bind("touchmove.perfect-scrollbar",function(s){if(!a&&1===s.originalEvent.targetTouches.length){var r=s.originalEvent.targetTouches[0],o={};o.pageX=r.pageX,o.pageY=r.pageY;var l=o.pageX-t.pageX,c=o.pageY-t.pageY;e(l,c),t=o;var u=(new Date).getTime();i.x=l/(u-n),i.y=c/(u-n),n=u,s.preventDefault()}}),s.bind("touchend.perfect-scrollbar",function(){clearInterval(r),r=setInterval(function(){return.01>Math.abs(i.x)&&.01>Math.abs(i.y)?(clearInterval(r),void 0):(e(30*i.x,30*i.y),i.x*=.8,i.y*=.8,void 0)},10)})},I=function(){s.unbind(".perfect-scrollbar"),$(window).unbind(".perfect-scrollbar"),$(document).unbind(".perfect-scrollbar"),s.data("perfect-scrollbar",null),s.data("perfect-scrollbar-update",null),s.data("perfect-scrollbar-destroy",null),g.remove(),y.remove(),v.remove(),m.remove(),g=y=o=l=c=u=p=d=b=h=f=w=null},M=function(e){s.addClass("ie").addClass("ie"+e);var t=function(){var e=function(){$(this).addClass("hover")},t=function(){$(this).removeClass("hover")};s.bind("mouseenter.perfect-scrollbar",e).bind("mouseleave.perfect-scrollbar",t),v.bind("mouseenter.perfect-scrollbar",e).bind("mouseleave.perfect-scrollbar",t),m.bind("mouseenter.perfect-scrollbar",e).bind("mouseleave.perfect-scrollbar",t),g.bind("mouseenter.perfect-scrollbar",e).bind("mouseleave.perfect-scrollbar",t),y.bind("mouseenter.perfect-scrollbar",e).bind("mouseleave.perfect-scrollbar",t)},n=function(){S=function(){g.css({left:d+s.scrollLeft(),bottom:b,width:p}),y.css({top:f+s.scrollTop(),right:w,height:h}),g.hide().show(),y.hide().show()},x=function(){var e=parseInt(f*u/l,10);s.scrollTop(e),g.css({bottom:b}),g.hide().show()},k=function(){var e=parseInt(d*c/o,10);s.scrollLeft(e),y.hide().show()}};6===e&&(t(),n())},F="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,B=function(){var e=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/);e&&"msie"===e[1]&&M(parseInt(e[2],10)),C(),E(),N(),P(),F&&O(),s.mousewheel&&A(),n.useKeyboard&&D(),s.data("perfect-scrollbar",s),s.data("perfect-scrollbar-update",C),s.data("perfect-scrollbar-destroy",I)};return B(),s})}}),require.define("/client/lib/slider.js",function(){function e(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]}}$.fn.emulateTransitionEnd=function(e){var t=!1,n=this;$(this).one($.support.transition.end,function(){t=!0});var i=function(){t||$(n).trigger($.support.transition.end)};return setTimeout(i,e),this},$(function(){$.support.transition=e()});var t=function(e,t){this.$element=$(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=t,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},t.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)),this},t.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},t.prototype.to=function(e){var t=this,n=this.getActiveIndex();return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",$(this.$items[e]))},t.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&$.support.transition.end&&(this.$element.trigger($.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){return this.sliding?void 0:this.slide("next")},t.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},t.prototype.slide=function(e,t){var n=this.$element.find(".item.active"),i=t||n[e](),s=this.interval,r="next"==e?"left":"right",a="next"==e?"first":"last",o=this;if(!i.length){if(!this.options.wrap)return;i=this.$element.find(".item")[a]()}this.sliding=!0,s&&this.pause();var l=$.Event("slide.bs.carousel",{relatedTarget:i[0],direction:r});if(!i.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var e=$(o.$indicators.children()[o.getActiveIndex()]);e&&e.addClass("active")})),$.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(l),l.isDefaultPrevented())return;i.addClass(e),i[0].offsetWidth,n.addClass(r),i.addClass(r),n.one($.support.transition.end,function(){i.removeClass([e,r].join(" ")).addClass("active"),n.removeClass(["active",r].join(" ")),o.sliding=!1,setTimeout(function(){o.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(l),l.isDefaultPrevented())return;n.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")}return s&&this.cycle(),this}};var n=$.fn.carousel;$.fn.carousel=function(e){return this.each(function(){var n=$(this),i=n.data("bs.carousel"),s=$.extend({},t.DEFAULTS,n.data(),"object"==typeof e&&e),r="string"==typeof e?e:s.slide;i||n.data("bs.carousel",i=new t(this,s)),"number"==typeof e?i.to(e):r?i[r]():s.interval&&i.pause().cycle()})},$.fn.carousel.Constructor=t,$.fn.carousel.noConflict=function(){return $.fn.carousel=n,this},$(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var t,n=$(this),i=$(n.attr("data-target")||(t=n.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"")),s=$.extend({},i.data(),n.data()),r=n.attr("data-slide-to");r&&(s.interval=!1),i.carousel(s),(r=n.attr("data-slide-to"))&&i.data("bs.carousel").to(r),e.preventDefault()}),$(window).on("load",function(){$('[data-ride="carousel"]').each(function(){var e=$(this);e.carousel(e.data())})})}),require.define("/client/app/client/minChat.jade",function(e,t){t.exports=function(e){var t=[],n=e||{};return function(e){t.push('<div class="minChat"><img'+jade.attr("src",e.eyeCatcher,!0,!1)+"/></div>")}.call(this,"customData"in n?n.customData:"undefined"!=typeof customData?customData:void 0),t.join("")}}),require.define("/client/app/client/logingIn.jade",function(e,n){n.exports=function(e){var n,i=[],s=e||{};return function(e,t,s){"fantastic"===e.skin?i.push('<div class="headerClientBox fantasticHeaderClientBox minimize"><span>'+jade.escape(null==(n=t.title)?"":n)+'</span><div class="closeBtn pull-right"><img src="/public/images/icons/chat_close.png"/></div></div>'):i.push('<div class="headerClientBox primary-color minimize"><span>'+jade.escape(null==(n=t.title)?"":n)+'</span><div class="closeBtn pull-right"><img src="/public/images/icons/chat_close.png"/></div></div>'),"fantastic"!=e.skin?i.push("<div"+jade.cls(["wrapper "+e.skin+""],[!0])+'><div class="loginAsk"><p>'+jade.escape(null==(n=s("Please log-in or sign in with"))?"":n)+'</p><img src="/public/images/icons/g+.png" class="gPlus"/><img src="/public/images/icons/facebook.png" class="fb"/></div><div class="logInButtons"><input'+jade.attr("placeholder",s("Username placeholder"),!0,!1)+' class="userName"/><input'+jade.attr("placeholder",s("Email placeholder"),!0,!1)+' class="email"/></div><div class="sliderWrapperInvitation"><div class="logInBtn"><a href="javascript:void(0);" class="suItems ourSignUp primary-color">'+jade.escape(null==(n=s("Start the chat button"))?"":n)+'</a><!-- .orSignUpWith.suItems #{t("or Sign Up with")}--><!-- img.suItems.fbSignUp(src=\'/public/images/icons/signInFacebook.jpg\')--><div class="orGuest suItems"></div></div></div><textarea'+jade.attr("placeholder",""+s("Write message here")+"",!0,!1)+' maxlength="900" class="startChatInput"></textarea></div><a href="http://mochapp.com" target="_blank" class="poweredBy">powered by www.mochapp.com</a>'):(i.push("<div"+jade.cls(["wrapper "+e.skin+""],[!0])+">"),t&&t.slider&&t.slider.length>1?i.push('<div class="logo"><img'+jade.attr("src",""+t.slider[0]+"",!0,!1)+jade.attr("srcset",""+t.slider[1]+" 2x",!0,!1)+"/></div>"):i.push('<div class="logo"><img src="/public/images/fantastic_logos/Fantastic_Services.png" srcset="/public/images/fantastic_logos/Fantastic_Services_2x.png 2x"/></div>'),i.push('<div class="login"><input'+jade.attr("placeholder",""+s("Username placeholder")+"",!0,!1)+' class="userName form-control"/><a class="btn ourSignUp">'+jade.escape(null==(n=s("Start the chat button"))?"":n)+'</a></div><a href="http://www.mochapp.com" target="_blank" class="poweredBy">powered by www.mochapp.com</a></div>'))}.call(this,"theme"in s?s.theme:"undefined"!=typeof theme?theme:void 0,"customData"in s?s.customData:"undefined"!=typeof customData?customData:void 0,"t"in s?s.t:"undefined"!=typeof t?t:void 0),i.join("")}}),require.define("/client/app/client/preChatView.jade",function(e,n){n.exports=function(e){var n,i=[],s=e||{};return function(e,t,s){"fantastic"===e.skin?i.push('<div class="headerClientBox fantasticHeaderClientBox minimize"><span>'+jade.escape(null==(n=t.title)?"":n)+'</span><div class="closeBtn pull-right"><img src="/public/images/icons/chat_close.png"/></div></div>'):i.push('<div class="headerClientBox primary-color minimize"><span>'+jade.escape(null==(n=t.title)?"":n)+'</span><div class="closeBtn pull-right"><img src="/public/images/icons/chat_close.png"/></div></div>'),i.push("<div"+jade.cls(["wrapper "+e.skin+""],[!0])+'><div class="chatBoxView"><div class="chatBoxViewMessage"></div><div class="typeIndicator"><span>'+jade.escape(null==(n=s("typing indicator"))?"":n)+'</span></div></div><div class="chatForm"><div class="formWrapper"><form id="chatForm"><textarea'+jade.attr("placeholder",""+s("Write message here")+"",!0,!1)+' maxlength="900"></textarea>'),"fantastic"===e.skin&&i.push('<a disabled="disabled" class="btn btn-default uploadButton"><span class="glyphicon glyphicon-paperclip"></span></a>'),i.push('</form></div></div><a href="http://mochapp.com" target="_blank" class="poweredBy">powered by www.mochapp.com</a></div>')}.call(this,"theme"in s?s.theme:"undefined"!=typeof theme?theme:void 0,"customData"in s?s.customData:"undefined"!=typeof customData?customData:void 0,"t"in s?s.t:"undefined"!=typeof t?t:void 0),i.join("")}}),require.define("/client/lib/jquery.ui.widget.js",function(){(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery||$)})(function(e,t){var n=0,i=Array.prototype.slice,s=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(r){}s(t)},e.widget=function(n,i,s){var r,a,o,l,c={},u=n.split(".")[0];n=n.split(".")[1],r=u+"-"+n,s||(s=i,i=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[u]=e[u]||{},a=e[u][n],o=e[u][n]=function(e,n){return this._createWidget?(arguments.length&&this._createWidget(e,n),t):new o(e,n)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),l=new i,l.options=e.widget.extend({},l.options),e.each(s,function(n,s){return e.isFunction(s)?(c[n]=function(){var e=function(){return i.prototype[n].apply(this,arguments)},t=function(e){return i.prototype[n].apply(this,e)};return function(){var n,i=this._super,r=this._superApply;return this._super=e,this._superApply=t,n=s.apply(this,arguments),this._super=i,this._superApply=r,n}}(),t):(c[n]=s,t)}),o.prototype=e.widget.extend(l,{widgetEventPrefix:a?l.widgetEventPrefix:n},c,{constructor:o,namespace:u,widgetName:n,widgetFullName:r}),a?(e.each(a._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(n,o)},e.widget.extend=function(n){for(var s,r,a=i.call(arguments,1),o=0,l=a.length;l>o;o++)for(s in a[o])r=a[o][s],a[o].hasOwnProperty(s)&&r!==t&&(n[s]=e.isPlainObject(r)?e.isPlainObject(n[s])?e.widget.extend({},n[s],r):e.widget.extend({},r):r);return n},e.widget.bridge=function(n,s){var r=s.prototype.widgetFullName||n;e.fn[n]=function(a){var o="string"==typeof a,l=i.call(arguments,1),c=this;return a=!o&&l.length?e.widget.extend.apply(null,[a].concat(l)):a,o?this.each(function(){var i,s=e.data(this,r);return s?e.isFunction(s[a])&&"_"!==a.charAt(0)?(i=s[a].apply(s,l),i!==s&&i!==t?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):t):e.error("no such method '"+a+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,r);t?t.option(a||{})._init():e.data(this,r,new s(a,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var s,r,a,o=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(o={},s=n.split("."),n=s.shift(),s.length){for(r=o[n]=e.widget.extend({},this.options[n]),a=0;s.length-1>a;a++)r[s[a]]=r[s[a]]||{},r=r[s[a]];if(n=s.pop(),i===t)return r[n]===t?null:r[n];r[n]=i}else{if(i===t)return this.options[n]===t?null:this.options[n];o[n]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(n,i,s){var r,a=this;"boolean"!=typeof n&&(s=i,i=n,n=!1),s?(i=r=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,r=this.widget()),e.each(s,function(s,o){function l(){return n||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):t}"string"!=typeof o&&(l.guid=o.guid=o.guid||l.guid||e.guid++);var c=s.match(/^(\w+)\s*(.*)$/),u=c[1]+a.eventNamespace,p=c[2];p?r.delegate(p,u,l):i.bind(u,l)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var s,r,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(s in r)s in n||(n[s]=r[s]);return this.element.trigger(n,i),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,s,r){"string"==typeof s&&(s={effect:s});var a,o=s?s===!0||"number"==typeof s?n:s.effect||n:t;s=s||{},"number"==typeof s&&(s={duration:s}),a=!e.isEmptyObject(s),s.complete=r,s.delay&&i.delay(s.delay),a&&e.effects&&e.effects.effect[o]?i[t](s):o!==t&&i[o]?i[o](s.duration,s.easing,r):i.queue(function(n){e(this)[t](),r&&r.call(i[0]),n()})}})})}),require.define("/client/lib/jquery.fileupload.js",function(){(function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery||$)})(function(e){"use strict";e.support.fileInput=!(RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||""+t,n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){return t.isDefaultPrevented()?!1:((n.autoUpload||n.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()}),void 0)},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var i=e-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=8*(t-this.loaded)*(1e3/i),this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,n){if(t.lengthComputable){var i,s=Date.now?Date.now():(new Date).getTime();if(n._time&&n.progressInterval&&n.progressInterval>s-n._time&&t.loaded!==t.total)return;n._time=s,i=Math.floor(t.loaded/t.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(s,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(s,i,n.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),n),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var n=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).bind("progress",function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,n._onProgress(e,t)}),t.xhr=function(){return i})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n,i=this,s=t.files[0],r=t.multipart||!e.support.xhrFileUpload,a="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),r&&!t.blob&&this._isInstanceOf("File",s)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(s.name)+'"'),r?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:a,value:t.blob}):e.each(t.files,function(i,s){n.push({name:"array"===e.type(t.paramName)&&t.paramName[i]||a,value:s})})):(i._isInstanceOf("FormData",t.formData)?n=t.formData:(n=new FormData,e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})),t.blob?n.append(a,t.blob,s.name):e.each(t.files,function(s,r){(i._isInstanceOf("File",r)||i._isInstanceOf("Blob",r))&&n.append("array"===e.type(t.paramName)&&t.paramName[s]||a,r,r.uploadName||r.name)})),t.data=n):(t.contentType=s.type||"application/octet-stream",t.data=t.blob||s),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var t=e(this),n=t.prop("name")||"files[]",s=(t.prop("files")||[1]).length;s;)i.push(n),s-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,i){var s=e.Deferred(),r=s.promise();return n=n||this.options.context||r,t===!0?s.resolveWith(n,i):t===!1&&s.rejectWith(n,i),r.abort=s.promise,this._enhancePromise(r)},_addConvenienceMethods:function(t,n){var i=this,s=function(t){return e.Deferred().resolveWith(i,t).promise()};n.process=function(t,r){return(t||r)&&(n._processQueue=this._processQueue=(this._processQueue||s([this])).pipe(function(){return n.errorThrown?e.Deferred().rejectWith(i,[n]).promise():s(arguments)}).pipe(t,r)),this._processQueue||s([this])},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=i._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&i._onSend(t,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",i._trigger("fail",null,this),i._getXHRPromise(!1))},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===i._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var i,s,r=this,a=t.files[0],o=a.size,l=t.uploadedBytes,c=t.maxChunkSize||o,u=this._blobSlice,p=e.Deferred(),d=p.promise();return this._isXHRUpload(t)&&u&&(l||o>c)&&!t.data?n?!0:l>=o?(a.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",a.error])):(s=function(){var n=e.extend({},t),d=n._progress.loaded;n.blob=u.call(a,l,l+c,a.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+o,r._initXHRData(n),r._initProgressListener(n),i=(r._trigger("chunksend",null,n)!==!1&&e.ajax(n)||r._getXHRPromise(!1,n.context)).done(function(i,a,c){l=r._getUploadedBytes(c)||l+n.chunkSize,d+n.chunkSize-n._progress.loaded&&r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=l,n.result=i,n.textStatus=a,n.jqXHR=c,r._trigger("chunkdone",null,n),r._trigger("chunkalways",null,n),o>l?s():p.resolveWith(n.context,[i,a,c])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,r._trigger("chunkfail",null,n),r._trigger("chunkalways",null,n),p.rejectWith(n.context,[e,t,i])})},this._enhancePromise(d),d.abort=function(){return i.abort()},s(),d):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,i,s){var r=s._progress.total,a=s._response;r>s._progress.loaded&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:r,total:r}),s),a.result=s.result=t,a.textStatus=s.textStatus=n,a.jqXHR=s.jqXHR=i,this._trigger("done",null,s)},_onFail:function(e,t,n,i){var s=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),s.jqXHR=i.jqXHR=e,s.textStatus=i.textStatus=t,s.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(e,t,n,i){this._trigger("always",null,i)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var i,s,r,a,o=this,l=o._getAJAXSettings(n),c=function(){return o._sending+=1,l._bitrateTimer=new o._BitrateTimer,i=i||((s||o._trigger("send",e.Event("send",{delegatedEvent:t}),l)===!1)&&o._getXHRPromise(!1,l.context,s)||o._chunkedUpload(l)||e.ajax(l)).done(function(e,t,n){o._onDone(e,t,n,l)}).fail(function(e,t,n){o._onFail(e,t,n,l)}).always(function(e,t,n){if(o._onAlways(e,t,n,l),o._sending-=1,o._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>o._sending)for(var i=o._slots.shift();i;){if("pending"===o._getDeferredState(i)){i.resolve();break}i=o._slots.shift()}0===o._active&&o._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this._sending>=this.options.limitConcurrentUploads?(this.options.limitConcurrentUploads>1?(r=e.Deferred(),this._slots.push(r),a=r.pipe(c)):(this._sequence=this._sequence.pipe(c,c),a=this._sequence),a.abort=function(){return s=[,"abort","abort"],i?i.abort():(r&&r.rejectWith(l.context,s),c())},this._enhancePromise(a)):c()},_onAdd:function(t,n){var i,s,r,a,o=this,l=!0,c=e.extend({},this.options,n),u=n.files,p=u.length,d=c.limitMultiFileUploads,h=c.limitMultiFileUploadSize,f=c.limitMultiFileUploadSizeOverhead,v=0,m=this._getParamName(c),g=0;if(!h||p&&void 0!==u[0].size||(h=void 0),(c.singleFileUploads||d||h)&&this._isXHRUpload(c))if(c.singleFileUploads||h||!d)if(!c.singleFileUploads&&h)for(r=[],i=[],a=0;p>a;a+=1)v+=u[a].size+f,(a+1===p||v+u[a+1].size+f>h||d&&a+1-g>=d)&&(r.push(u.slice(g,a+1)),s=m.slice(g,a+1),s.length||(s=m),i.push(s),g=a+1,v=0);else i=m;else for(r=[],i=[],a=0;p>a;a+=d)r.push(u.slice(a,a+d)),s=m.slice(a,a+d),s.length||(s=m),i.push(s);else r=[u],i=[m];return n.originalFiles=u,e.each(r||u,function(s,a){var c=e.extend({},n);return c.files=r?a:[a],c.paramName=i[s],o._initResponseObject(c),o._initProgressObject(c),o._addConvenienceMethods(t,c),l=o._trigger("add",e.Event("add",{delegatedEvent:t}),c)}),l},_replaceFileInput:function(t){var n=t.clone(!0);e("<form></form>").append(n)[0].reset(),t.after(n).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,i){return i===t[0]?n[0]:i}),t[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,n){var i,s=this,r=e.Deferred(),a=function(e){e&&!e.entry&&(e.entry=t),r.resolve([e])};return n=n||"",t.isFile?t._file?(t._file.relativePath=n,r.resolve(t._file)):t.file(function(e){e.relativePath=n,r.resolve(e)},a):t.isDirectory?(i=t.createReader(),i.readEntries(function(e){s._handleFileTreeEntries(e,n+t.name+"/").done(function(e){r.resolve(e)}).fail(a)},a)):r.resolve([]),r.promise()},_handleFileTreeEntries:function(t,n){var i=this;return e.when.apply(e,e.map(t,function(e){return i._handleFileTreeEntry(e,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n,i,s=t.prop("webkitEntries")||t.prop("entries");if(s&&s.length)return this._handleFileTreeEntries(s);if(n=e.makeArray(t.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&e.each(n,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(i=t.prop("value"),!i)return e.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(s){i.files=s,n.options.replaceFileInput&&n._replaceFileInput(i.fileInput),n._trigger("change",e.Event("change",{delegatedEvent:t}),i)!==!1&&n._onAdd(t,i)
})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,i={files:[]};n&&n.length&&(e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&i.files.push(n)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),i)!==!1&&this._onAdd(t,i))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=this,i=t.dataTransfer,s={};i&&i.files&&i.files.length&&(t.preventDefault(),this._getDroppedFiles(i).always(function(i){s.files=i,n._trigger("drop",e.Event("drop",{delegatedEvent:t}),s)!==!1&&n._onAdd(t,s)}))},_onDragOver:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=t.dataTransfer;n&&-1!==e.inArray("Files",n.types)&&this._trigger("dragover",e.Event("dragover",{delegatedEvent:t}))!==!1&&(t.preventDefault(),n.dropEffect="copy")},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var i=-1!==e.inArray(t,this._specialOptions);i&&this._destroyEventHandlers(),this._super(t,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return"url"!==t&&"string"===e.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options;e.each(e(this.element[0].cloneNode(!1)).data(),function(e,i){t._isRegExpOption(e,i)&&(i=t._getRegExp(i)),n[e]=i})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n,i,s=this,r=e.Deferred(),a=r.promise();return a.abort=function(){return i=!0,n?n.abort():(r.reject(null,"abort","abort"),a)},this._getFileInputFiles(t.fileInput).always(function(e){if(!i){if(!e.length)return r.reject(),void 0;t.files=e,n=s._onSend(null,t).then(function(e,t,n){r.resolve(e,t,n)},function(e,t,n){r.reject(e,t,n)})}}),this._enhancePromise(a)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})})}),require.define("/client/app/client/chatWindow.jade",function(e,n){n.exports=function(e){var n,i=[],s=e||{};return function(e,t,s){"fantastic"===e.skin?i.push('<div class="headerClientBox fantasticHeaderClientBox minimize"><span>'+jade.escape(null==(n=t.title)?"":n)+'</span><div class="closeBtn pull-right"><img src="/public/images/icons/chat_close.png"/></div></div>'):i.push('<div class="headerClientBox primary-color minimize"><span>'+jade.escape(null==(n=t.title)?"":n)+'</span><div class="closeBtn pull-right"><img src="/public/images/icons/chat_close.png"/></div></div>'),i.push("<div"+jade.cls(["wrapper "+e.skin+""],[!0])+'><div class="chatBoxView"><div class="chatBoxViewMessage"></div><div class="typeIndicator"><span>'+jade.escape(null==(n=s("typing indicator"))?"":n)+'</span></div></div><div style="overflow:visible;" class="chatForm"><div style="overflow:visible;" class="formWrapper"><form id="chatForm" style="overflow:visible;"><textarea'+jade.attr("placeholder",""+s("Write message here")+"",!0,!1)+' maxlength="900"></textarea><input type="file" style="display:none;" class="uploadPicture"/><a class="btn btn-default uploadButton"><span class="glyphicon glyphicon-paperclip"></span></a></form></div></div><a href="http://mochapp.com" target="_blank" class="poweredBy">powered by www.mochapp.com</a></div>')}.call(this,"theme"in s?s.theme:"undefined"!=typeof theme?theme:void 0,"customData"in s?s.customData:"undefined"!=typeof customData?customData:void 0,"t"in s?s.t:"undefined"!=typeof t?t:void 0),i.join("")}}),require.define("/client/app/client/chatStartWindow.jade",function(e,n){n.exports=function(e){var n,i=this,s=[],r=e||{};return function(e,t,i,r){"fantastic"===e.skin?s.push('<div class="headerClientBox fantasticHeaderClientBox minimize"><span>'+jade.escape(null==(n=t.title)?"":n)+'</span><div class="closeBtn pull-right"><img src="/public/images/icons/chat_close.png"/></div></div>'):s.push('<div class="headerClientBox primary-color minimize"><span>'+jade.escape(null==(n=t.title)?"":n)+'</span><div class="closeBtn pull-right"><img src="/public/images/icons/chat_close.png"/></div></div>'),s.push('<div class="initForm"><form id="addClient" class="form-inline"><div class="form-group"><label class="sr-only">'+jade.escape(null==(n=i("Email address"))?"":n)+'</label><input id="name" type="text" required="required"'+jade.attr("placeholder",i("Username placeholder"),!0,!1)+jade.attr("value",r.$("#name").val(),!0,!1)+' class="form-control"/></div><div class="form-group"><textarea'+jade.attr("placeholder",""+i("Write message here")+"",!0,!1)+' class="startChatInput"></textarea></div></form></div>')}.call(this,"theme"in r?r.theme:"undefined"!=typeof theme?theme:void 0,"customData"in r?r.customData:"undefined"!=typeof customData?customData:void 0,"t"in r?r.t:"undefined"!=typeof t?t:void 0,"self"in r?r.self:i!==void 0?i:void 0),s.join("")}}),require.define("/client/app/client/endChatWindow.jade",function(e,n){n.exports=function(e){var n,i=[],s=e||{};return function(e,t,s,r,a){"fantastic"===e.skin?i.push('<div class="headerClientBox fantasticHeaderClientBox minimize"><span>'+jade.escape(null==(n=t.title)?"":n)+'</span><div class="closeBtn pull-right"><img src="/public/images/icons/chat_close.png"/></div></div>'):i.push('<div class="headerClientBox primary-color minimize"><span>'+jade.escape(null==(n=t.title)?"":n)+'</span><div class="closeBtn pull-right"><img src="/public/images/icons/chat_close.png"/></div></div>'),"fantastic"!=e.skin?i.push("<div"+jade.cls(["wrapper "+e.skin+""],[!0])+'><div class="operatorBox"><div class="imgWrapper"><div class="operatorImg"><img'+jade.attr("src",s.photo,!0,!1)+'/></div><img src="/public/images/icons/arrow.png" class="arrow"/></div><div class="stuffWrapper"><div class="operatorName">'+jade.escape(null==(n=s.screenName)?"":n)+'</div><div class="optionsContainer"><div title="Rate operator" class="starBtn"></div><div title="Send history email" class="emailBtn"></div></div><div class="rating"><ul><li><div data-rate=\'1\' class="rates"></div></li><li><div data-rate=\'2\' class="rates"></div></li><li><div data-rate=\'3\' class="rates"></div></li><li><div data-rate=\'4\' class="rates"></div></li><li><div data-rate=\'5\' class="rates"></div></li></ul><p class="rated"></p></div><div class="sendEmail"><input type="email"'+jade.attr("placeholder",""+r("Email address")+"",!0,!1)+' class="emailSend"/><div class="btn-primary sendBtn">'+jade.escape(null==(n=r("Send email"))?"":n)+'</div><div class="successfullSendedMessage">'+jade.escape(null==(n=r("The email was send successfully"))?"":n)+'</div></div><div class="message">'+(null==(n=a.message)?"":n)+'</div></div></div><div class="chatDetails"><p class="closedP">'+jade.escape(null==(n=r("The chat has been closed"))?"":n)+'</p><p class="RateText">'+jade.escape(null==(n=r("Please rate our operator"))?"":n)+'</p><div class="rating"><ul><li><div data-rate=\'1\' class="rates"></div></li><li><div data-rate=\'2\' class="rates"></div></li><li><div data-rate=\'3\' class="rates"></div></li><li><div data-rate=\'4\' class="rates"></div></li><li><div data-rate=\'5\' class="rates"></div></li></ul><p class="rated"></p></div></div><hr class="endChatHr"/><div class="textareaWrapper"><textarea'+jade.attr("placeholder",""+r("Start typing to initiate new chat session")+"",!0,!1)+' maxlength="900" class="startChatInput"></textarea></div></div><a href="http://mochapp.com" target="_blank" class="poweredBy">powered by www.mochapp.com</a>'):i.push("<div"+jade.cls(["wrapper "+e.skin+""],[!0])+'><div class="imgWrapper"><div class="operatorImg"><img'+jade.attr("src",s.photo,!0,!1)+'/></div></div><div class="thankYouMessage"></div><div class="feelFreeMessage"></div><div class="ratingWrapper"><span class="RateText">'+jade.escape(null==(n=r("Please rate our operator"))?"":n)+'</span><div class="rating"><ul><li><div data-rate=\'1\' class="rates"></div></li><li><div data-rate=\'2\' class="rates"></div></li><li><div data-rate=\'3\' class="rates"></div></li><li><div data-rate=\'4\' class="rates"></div></li><li><div data-rate=\'5\' class="rates"></div></li></ul><p class="rated"></p></div></div><div class="startChatAgain">'+jade.escape(null==(n=r("Start the chat again"))?"":n)+'</div><a href="http://mochapp.com" target="_blank" class="poweredBy">powered by www.mochapp.com</a></div>')}.call(this,"theme"in s?s.theme:"undefined"!=typeof theme?theme:void 0,"customData"in s?s.customData:"undefined"!=typeof customData?customData:void 0,"operator"in s?s.operator:"undefined"!=typeof operator?operator:void 0,"t"in s?s.t:"undefined"!=typeof t?t:void 0,"lastMessage"in s?s.lastMessage:"undefined"!=typeof lastMessage?lastMessage:void 0),i.join("")}}),require.define("/client/app/client/invitation.jade",function(e,n){n.exports=function(e){var n,i=[],s=e||{};return function(e,t,s){"fantastic"===e.skin?i.push('<div class="headerClientBox fantasticHeaderClientBox minimize"><span>'+jade.escape(null==(n=t.title)?"":n)+'</span><div class="closeBtn pull-right"><img src="/public/images/icons/fantastic_close.png"/></div></div>'):i.push('<div class="headerClientBox primary-color minimize"><span>'+jade.escape(null==(n=t.title)?"":n)+'</span><div class="closeBtn pull-right"><img src="/public/images/icons/fantastic_close.png"/></div></div>'),i.push("<div"+jade.cls(["wrapper "+e.skin+""],[!0])+'><div class="loginAsk"><p>Please log-in or sign in with</p><img src="/public/images/icons/g+.png" class="gPlus"/><img src="/public/images/icons/facebook.png" class="fb"/></div><div class="logInButtons"><input'+jade.attr("placeholder",""+s("Username placeholder")+"",!0,!1)+' class="userName"/><input'+jade.attr("placeholder",""+s("Email placeholder")+"",!0,!1)+' style="display:block" class="email"/></div>'),t&&t.slider?(i.push('<div id="carousel-example-generic" data-ride="carousel" class="carousel slide"><ol class="carousel-indicators">'),function(){var e=t.slider;if("number"==typeof e.length)for(var n=0,s=e.length;s>n;n++){var r=e[n];0===t.slider.indexOf(r)?i.push('<li data-target="#carousel-example-generic"'+jade.attr("data-slide-to",t.slider.indexOf(r),!0,!1)+' class="active"></li>'):i.push('<li data-target="#carousel-example-generic"'+jade.attr("data-slide-to",t.slider.indexOf(r),!0,!1)+"></li>")}else{var s=0;for(var n in e){s++;var r=e[n];0===t.slider.indexOf(r)?i.push('<li data-target="#carousel-example-generic"'+jade.attr("data-slide-to",t.slider.indexOf(r),!0,!1)+' class="active"></li>'):i.push('<li data-target="#carousel-example-generic"'+jade.attr("data-slide-to",t.slider.indexOf(r),!0,!1)+"></li>")}}}.call(this),i.push('</ol><div class="carousel-inner">'),function(){var e=t.slider;if("number"==typeof e.length)for(var n=0,s=e.length;s>n;n++){var r=e[n];0===t.slider.indexOf(r)?i.push('<div class="item active"><img'+jade.attr("src",r,!0,!1)+"/></div>"):i.push('<div class="item"><img'+jade.attr("src",r,!0,!1)+"/></div>")}else{var s=0;for(var n in e){s++;var r=e[n];0===t.slider.indexOf(r)?i.push('<div class="item active"><img'+jade.attr("src",r,!0,!1)+"/></div>"):i.push('<div class="item"><img'+jade.attr("src",r,!0,!1)+"/></div>")}}}.call(this),i.push('</div><a href="#carousel-example-generic" data-slide="prev" class="left carousel-control"><img src="/public/images/icons/arrow2.png"/></a><a href="#carousel-example-generic" data-slide="next" class="right carousel-control"><img src="/public/images/icons/arrow.png"/></a></div><div class="logInBtn"><a href="javascript:void(0);" class="suItems ourSignUp primary-color">'+jade.escape(null==(n=s("Enter the chat button"))?"":n)+"</a></div><textarea"+jade.attr("placeholder",""+s("Write message here")+"",!0,!1)+' class="startChatInput"></textarea>')):i.push('<div class="invitationText">'+jade.escape(null==(n=t.invitation)?"":n)+'</div><div class="invitationBtn suItems ourSignUp primary-color">'+jade.escape(null==(n=t.invitationBtn)?"":n)+"</div><textarea"+jade.attr("placeholder",""+s("Write message here")+"",!0,!1)+' maxlength="900" class="startChatInput"></textarea>'),i.push('</div><a href="http://mochapp.com" target="_blank" class="poweredBy">powered by www.mochapp.com</a>')}.call(this,"theme"in s?s.theme:"undefined"!=typeof theme?theme:void 0,"customData"in s?s.customData:"undefined"!=typeof customData?customData:void 0,"t"in s?s.t:"undefined"!=typeof t?t:void 0),i.join("")}}),require.define("/client/app/client/PaymentForm.jade",function(e,n){n.exports=function(e){var n,i=[],s=e||{};return function(e,t,s,r,a,o){if(e){var l="GBP"===t.currency?"£":"$";"fantastic"===s.skin?i.push('<div class="headerClientBox minimize">'+jade.escape(null==(n=r("Payment label"))?"":n)+"</div>"):i.push('<div class="headerClientBox primary-color minimize">'+jade.escape(null==(n=r("Payment label"))?"":n)+"</div>"),i.push("<div"+jade.cls(["wrapper "+s.skin+" payment"],[!0])+">"),a?(i.push('<div class="col-xs-12 paymentResult">'),a.error?(i.push('<div style="overflow:auto;" class="payment-error"><div role="alert" style="margin-top:10px;" class="alert alert-danger"><span style="margin: 0 5px;" class="glyphicon glyphicon-exclamation-sign">'),""===r("Payment error msg").replace(/\s/g,"")?i.push(" "+jade.escape(null==(n=a.error)?"":n)+""):i.push(""+jade.escape(null==(n=r("Payment error msg"))?"":n)+" "+jade.escape(null==(n=a.error)?"":n)+" "),i.push('</span></div><div class="btn btn-danger btn-large col-xs-12 goBackToPayment">'+jade.escape(null==(n=r("Go back to payment"))?"":n)+"</div></div>")):i.push('<div style="overflow:auto;" class="payment-success"><div role="alert" style="margin-top:10px;" class="alert alert-success"><span style="margin: 0 5px;" class="glyphicon glyphicon-ok"></span>'+jade.escape(null==(n=r("Payment success msg"))?"":n)+'</div><div class="btn btn-success btn-large col-xs-12 goBack">'+jade.escape(null==(n=r("Go back to chat"))?"":n)+"</div></div>"),i.push("</div>")):(i.push('<div class="paymentFormHeader"><div class="col-xs-2 goBackToChat"><span class="fa-stack fa-lg"><i class="fa fa-circle-thin fa-stack-2x"> </i><i class="fa fa-angle-left fa-stack-1x"></i></span></div><div class="col-xs-10 text-center"><div class="paymentReasonLabel">'+jade.escape(null==(n=r("Payment reason label"))?"":n)+'</div><div class="paymentReasonValue"><span>'+jade.escape(null==(n=t.description)?"":n)+" </span><span>"+jade.escape(null==(n=l+t.amount)?"":n)+'</span></div></div></div><div style="margin:0 0 1% 0;" class="col-xs-12 paymentDetails"><div class="paymentDetailsLabel col-xs-12">'+jade.escape(null==(n=r("Payment details label"))?"":n)+'</div><div class="col-xs-12"><input type="text" maxlength="50" size="50"'+jade.attr("placeholder",""+r("Card holder")+"",!0,!1)+' class="cardHolder form-control"/><div class="cardNumber"><div class="cardNumberLabel">'+jade.escape(null==(n=r("Card number label"))?"":n)+'</div><input type="text" maxlength="19" size="19"'+jade.attr("placeholder",""+r("Card number format")+"",!0,!1)+' class="cardNumberField form-control pull-left"/></div></div><div class="expirationDateLabel col-xs-12">'+jade.escape(null==(n=r("Expiration date label"))?"":n)+'<div class="expirationDate"><select class="month form-control text-center pull-left"><option value="" disabled="disabled" selected="selected" style="display:none;color:#ccc;">Month</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option></select><select class="year form-control text-center pull-left"><option value="" disabled="disabled" selected="selected" style="display:none;color:#ccc;">Year</option>'),o!==void 0&&o.length>0&&function(){var e=o;if("number"==typeof e.length)for(var t=0,s=e.length;s>t;t++){var r=e[t];i.push("<option"+jade.attr("value",""+r+"",!0,!1)+">"+jade.escape(null==(n=r)?"":n)+"</option>")}else{var s=0;for(var t in e){s++;var r=e[t];i.push("<option"+jade.attr("value",""+r+"",!0,!1)+">"+jade.escape(null==(n=r)?"":n)+"</option>")}}}.call(this),i.push('</select><input type="text" placeholder="CVC" maxlength="3" size="3" class="cardCvcNumber form-control text-center pull-right"/></div></div></div><div class="paymentMethodsHeader"><div class="col-xs-12 text-center"><div class="col-xs-12 paymentMethodsLabel">'+jade.escape(null==(n=r("We accept"))?"":n)+'</div><div class="col-xs-12 paymentMethodsValues"><div class="width-25"><img src="/public/images/card-01.png" class="maestro"/></div><div class="width-25"><img src="/public/images/card-02.png" class="visaElectron"/></div><div class="width-25"><img src="/public/images/card-03.png" class="masterCard"/></div><div class="width-25"><img src="/public/images/card-04.png" class="visa"/></div></div></div></div><div style="margin-bottom:1%;" class="col-xs-12"><div class="col-xs-12"><a href="javascript:void(0);" class="confirmPayment btn col-xs-12 acceptPaymentBtn">'+jade.escape(null==(n=r("Pay button"))?"":n)+'</a></div></div><div class="col-xs-12 text-center paymentMessageWrapper"><p style="padding:0 35px 0 35px" class="paymentMessage">Payment of \n<strong> '+jade.escape(null==(n=l+t.amount)?"":n)+' </strong> \nwill be taken upon job completion.</p></div><div class="col-xs-12 text-center"><p class="securelyMessage">Pay securely with\n<strong> stripe </strong> </p></div>')),i.push('</div><a href="http://mochapp.com" target="_blank" class="poweredBy">powered by www.mochapp.com</a><div class="minimize"></div><div class="closeBtn"></div>')}}.call(this,"stripeScriptLoaded"in s?s.stripeScriptLoaded:"undefined"!=typeof stripeScriptLoaded?stripeScriptLoaded:void 0,"service"in s?s.service:"undefined"!=typeof service?service:void 0,"theme"in s?s.theme:"undefined"!=typeof theme?theme:void 0,"t"in s?s.t:"undefined"!=typeof t?t:void 0,"result"in s?s.result:"undefined"!=typeof result?result:void 0,"expirateYears"in s?s.expirateYears:"undefined"!=typeof expirateYears?expirateYears:void 0),i.join("")}}),require.define("/client/app/client/client.js",function(e){var t=!1;navigator.appName.indexOf("Internet Explorer")>-1&&(t=!0);var n=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},s=n(),r="",a=function(){return localStorage.lastClosedStamp=Date.now(),!0};e("../../lib/lightApp");var o=_.findWhere(window.theme.themeCSS,{selector:"#chatFrame"}),l=_.omit(o,"selector"),c={};c="smaller"===window.theme.skin?_.extend(l,{width:"320px",height:"280px"}):_.extend(l,{width:"320px",height:"427px"});var u={};_.map(c,function(e,t){switch(t){case"width":u[t]="320px";break;case"height":u[t]="35px";break;default:u[t]=e}});var p,d=e("../../lib/parseMessage");Array.prototype.forEach||(Array.prototype.forEach=function(e){for(var t=0;this.length>t;t++)e(this[t])});var h=e("../panel/views/ChatSection/MessageTemplate.jade");e("../../lib/scroll.js"),e("../../lib/slider.js");var f=_.extend({"Start chat button text":"Start chat text","Email address":"Email address","Email placeholder":"Email","How may i help you":"How may I help you","Please log-in or sign in with":"Please log-in or sign in with","Please rate our operator":"Please rate our operator","Send email":"Send email","Start chat again":"Start chat again","New booking button":"New booking button","Existing booking button":"Existing booking button","Start the chat button":"Start the chat","Start typing to initiate new chat session":"Start typing to initiate new chat session",Support:"Support","Thank you for chat":"Thank you for chat","The email was send successfully":"The email was send successfully!","The size of attached picture is too large":"The size of attached picture is too large. Maximum allow size has to be less than 4MB!","The attachment has to be an image":"The attachment has to be an image!","The chat has been closed":"The chat has been closed","Username placeholder":"Name","Write message here":"Write your message here and press 'Return'","You have entered the queue":"You have entered the queue","You rated":"You rated","or Sign Up with":"or Sign Up","typing indicator":"typing...","Payment label":"Payment","Payment error msg":" ","Payment success msg":"Success! Thank you for choosing us.","Go back to payment":"Go Back To Payment","Go back to chat":"Go Back To Chat","Payment reason label":"Amount Due","Payment details label":"Payment Details:","Card holder":"Cardholder name","Card number label":"Card Number:","Card number format":"XXXX XXXX XXXX XXXX","Expiration date label":"Expiration Date:","Pay button":"Submit","We accept":"We Accept:"},customData.phrases||{}),v={invalid_number:"The card number is not a valid credit card number.",invalid_expiry_month:"The card's expiration month is invalid.",invalid_expiry_year:"The card's expiration year is invalid.",invalid_cvc:"The card's security code is invalid.",incorrect_number:"The card number is incorrect.",expired_card:"The card has expired.",incorrect_cvc:"The card's security code is incorrect.",incorrect_zip:"The card's zip code failed validation.",card_declined:"The card was declined.",missing:"There is no card on a customer that is being charged.",processing_error:"An error occurred while processing the card."},m=App.View.prototype.t=function(e){return(customData.phrases||{})[e]||f[e]||e},g=!1;if(s){var y=screen.availHeight,b=navigator.userAgent.match(/\((.*?);/)[1];$("body").addClass("mobile "+b+y)}window===window.top&&(g=!0);var w=!1,x=!1,k=App.View.extend({},{className:"eyeCatcher",template:e("./minChat.jade"),events:{click:"showChatWindow"},initialize:function(){this.customData=customData},showChatWindow:function(){x=!0,this.$el.hide(),s?app.sendMessage("mobileNavigate"):app.showChat()},render:function(){var e=this;return App.View.prototype.render.call(this),this.$("img").on("load",function(){e.$el.is(":visible")&&app.setFramePosition(app.createCSS("#chatFrame",_.extend(_.omit(_.findWhere(window.theme.themeCSS,{selector:"#chatFrame"}),["selector","name"]),{width:e.$("img").width()+"px",height:e.$("img").height()+"px",border:"0px"})))}),this}}),S=App.View.extend({},{template:e("./logingIn.jade"),customData:customData,className:"logingInScreen",events:{"click .ourSignUp":"startingChat","click .fb":"faceLog","click .fbSignUp":"faceLog","click .closeBtn":"hideChat","click .gPlus":"gPlus","keypress .startChatInput":"keypress","click .minimize":"minimize"},initialize:function(){this.minimized=!1,this.$(".poweredBy").show(),this.theme=window.theme},hideChat:function(){a()&&app.hideChat()},minimize:function(){var e=window.theme;this.minimized?(this.minimized=!1,app.setFramePosition(app.createCSS("#chatFrame",c)),"fantastic"===e.skin?this.$(".headerClientBox").css({height:"40px",padding:"15px","line-height":"15px"}):this.$(".headerClientBox").css({height:"8%",padding:"2% 3% 3% 3%"}),this.$(".poweredBy").show()):(this.minimized=!0,e.themeCSS.push({"overflow-y":"hidden",selector:".clientBody"}),this.$(".headerClientBox").css({height:"35px",padding:"2% 3% 3% 3%"}),this.$(".poweredBy").hide(),app.setFramePosition(app.createCSS("#chatFrame",u)),app.setThemeCSS(e))},faceLog:function(){var e=window.open("/social/facebook","fbLogin","directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=400,height=350,top=100,left=100");e.focus();var t=this;socket.emit("social","facebook",function(n,i){return e.close(),n?console.log("fb log error",n):(t.$(".userName").val(i),t.startingChat(i),void 0)})},gPlus:function(){var e=window.open("/social/gplus","google","directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=400,height=350,top=100,left=100");e.focus();var t=this;socket.emit("social","google",function(n,i){return e.close(),n?console.log("gplus log error",n):(t.$(".userName").val(i),t.startingChat(i),void 0)})},startingChat:function(e){var t={position:"unknown",name:"string"==typeof e?e:this.$(".userName").val()||"Guest",email:this.$("input.email").val(),ppcURL:r,isMobile:!1};s&&(t.isMobile=!0),window.location.search&&_.extend(t,app.parseClientData(["name","email","jobID"])),socket.emit("initClient",t,function(e){return e?console.log("ERROR: ",e):(app.showPreChat(t.name),void 0)})},keypress:function(e){13===e.keyCode&&app.startChatForm.submit(e)}}),C=App.View.extend({},{template:e("./preChatView.jade"),className:"ChatWindow",events:{"click .closeBtn":"closeChat","keypress textarea":"addMessage","click .minimize":"minimize"},minimize:function(){var e=window.theme;this.minimized?(this.minimized=!1,app.setFramePosition(app.createCSS("#chatFrame",c)),this.$(".poweredBy").show(),this.$(".chatForm").show(),"fantastic"===e.skin?this.$(".headerClientBox").css({height:"40px",padding:"15px","line-height":"15px"}):this.$(".headerClientBox").css({height:"8%",padding:"2% 3% 3% 3%"})):(this.minimized=!0,e.themeCSS.push({"overflow-y":"hidden",selector:".clientBody"}),this.$(".poweredBy").hide(),this.$(".chatForm").hide(),this.$(".headerClientBox").css({height:"35px",padding:"2% 3% 3% 3%"}),app.setFramePosition(app.createCSS("#chatFrame",u)),app.setThemeCSS(e))},updateHeight:function(){var e=window.innerHeight-70,t=this.$(".chatBoxViewMessage"),n=t[0].scrollHeight;t.css({height:e+"px",scrollTop:n})},initialize:function(e){this.customData=customData;var t=this;this.chatSession={client:{name:e.name},operator:{photo:"/public/images/icons/chat-support.png",fullname:"",title:"Support"},messages:[{name:"",message:"You have entered the queue, wait a few seconds and our operators will contact you as soon as possible.",sender:{$ref:"Operators"},sendTime:(new Date).toISOString()},e.message?{name:e.name,message:e.message,sender:{$ref:"Clients"},sendTime:(new Date).toISOString()}:void 0].filter(function(e){return e}).map(function(e){return new A(e)})},this.appendMessage=_.bind(this.appendMessage,this),s&&$(window).on("resize",function(){t.updateHeight()})},addMessage:function(e){var t=$(e.currentTarget).val();if(t=t.replace(/\s*/,""),13===e.keyCode)if(t){e.preventDefault();var n=new A({name:this.chatSession.client.name,message:t,sender:{$ref:"Clients"},sendTime:(new Date).toISOString()});this.chatSession.messages.push(n),this.appendMessage(n),$(e.currentTarget).val("").focus(),app.preMessages.push(t),socket.emit("chat",{action:"preMessage",body:t})}else e.preventDefault()},closeChat:function(){a()&&socket.emit("chat",{action:"preChatClose"},function(e){e&&console.log(e),app.hideChat()})},appendMessage:function(e){this.$el.hide().show(),this.$(".chatBoxViewMessage").append(h({message:e,parse:d,chatSession:this.chatSession,t:m})).stop().animate({scrollTop:this.$(".chatBoxViewMessage")[0].scrollHeight},400)},render:function(){App.View.prototype.render.call(this),this.chatSession.messages.forEach(this.appendMessage),this.$(".chatBoxViewMessage").perfectScrollbar(),this.$("textarea").focus(),s&&this.updateHeight()}});e("../../lib/jquery.ui.widget.js"),e("../../lib/jquery.fileupload.js");var j=App.View.extend({},{shownRate:!1,shownEmail:!1,template:e("./chatWindow.jade"),appendTo:".chatBox",className:"ChatWindow",events:{"click .closeBtn":"closeChat","submit form":"submit","keydown textarea":"keypress","keyup textarea":"keyup","click .starBtn":"showRating","click .emailBtn":"showEmail","click .stuffWrapper .sendEmail .sendBtn":"sendMail","click .rates":"rate","click .minimize":"minimize","click .uploadButton":"clickUploadButton","click .showPayment":"showPayment","click .local-url-link":"handleLocalLink"},handleLocalLink:function(e){socket.emit("chat",{action:"sendPostBack",body:{payload:'{"__handle_local": true, "offline": true }'}},function(t){return t?console.error(t):(window.location.href=e.currentTarget.dataset.localLink,void 0)})},minimize:function(){var e=window.theme;this.minimized?(this.minimized=!1,"fantastic"===e.skin?this.$(".headerClientBox").css({height:"40px",padding:"15px","line-height":"15px"}):this.$(".headerClientBox").css({height:"8%",padding:"2% 3% 3% 3%"}),app.setFramePosition(app.createCSS("#chatFrame",c)),this.missedMsg=0,this.$(".chatForm").show(),this.$(".poweredBy").show()):(this.minimized=!0,e.themeCSS.push({"overflow-y":"hidden",selector:".clientBody"}),this.$(".headerClientBox").css({height:"35px",padding:"2% 3% 3% 3%"}),this.$(".poweredBy").hide(),this.$(".chatForm").hide(),app.setFramePosition(app.createCSS("#chatFrame",u)),app.setThemeCSS(e))},rate:function(e){var t=$(e.currentTarget).attr("data-rate"),n=this;socket.emit("chat",{action:"rate",body:t},function(e,t){return e?console.log(e):(n.$(".rating ul").fadeOut(200),n.$(".starBtn").css({background:'url("/public/images/icons/starHover.png") no-repeat 0 0px'}),n.rated=p=!0,n.$(".successfullSendedMessage").fadeOut(),setTimeout(function(){n.$(".rating .rated").html(" You rated with "+t).fadeIn()},200),void 0)
})},sendMail:function(){var e=this,t=this.$(".stuffWrapper .sendEmail .emailSend"),n=this.$(".stuffWrapper .sendEmail .sendBtn"),i=this.$(".stuffWrapper .sendEmail .successfullSendedMessage");app.mailPattern.test(t.val())?(t.css("border-color","green"),socket.emit("chat",{action:"sendMail",body:t.val()},function(){t.fadeOut(),n.fadeOut(),setTimeout(function(){i.fadeIn()},500),e.isMailSend=!0})):t.css("border-color","red")},showRating:function(){this.rated||(this.shownEmail&&(this.$(".sendEmail").fadeOut(),this.shownEmail=!1),this.shownRate?(this.$(".rating ul").fadeOut(),this.shownRate=!1):(this.$(".rating ul").fadeIn(),this.shownRate=!0))},showEmail:function(){if("fantastic"===window.theme.skin&&void 0!=_.findWhere(window.theme.themeCSS,{selector:".ourSignUp"})){var e=_.findWhere(window.theme.themeCSS,{selector:".ourSignUp"})["background-color"];this.$(".sendEmail .sendBtn").hover(function(){$(this).css("background-color",e)})}this.isMailSend||(this.rated&&this.$(".rated").fadeOut(),this.shownRate&&(this.$(".rating ul").fadeOut(),this.shownRate=!1),this.shownEmail?(this.$(".sendEmail").fadeOut(),this.shownEmail=!1):(this.$(".sendEmail").fadeIn(),this.shownEmail=!0))},showPayment:function(){app.paymentForm&&delete app.paymentForm,localStorage.isChatWindow&&(localStorage.isChatWindow=!1),this.$el.hide(),app.showPaymentForm(JSON.parse(localStorage.payment))},updateHeight:function(){var e=window.innerHeight-70,t=this.$(".chatBoxViewMessage"),n=t[0].scrollHeight;t.css({height:e+"px",scrollTop:n})},render:function(){App.View.prototype.render.call(this);var e=this;return this.messages.forEach(function(t){e.addMessage(t)}),this.rated&&(this.$(".rating ul").hide(),this.$(".rating .rated").html("You already rated this chat!").show(),e.$(".starBtn").css({background:'url("/public/images/icons/starHover.png") no-repeat 0 0px'})),this.$(".chatBoxViewMessage").perfectScrollbar(),s&&this.updateHeight(),this},addMessage:function(e){this.messages.push(e);var t=new A(e);return this.$(".chatBoxViewMessage").append(h({operatorFirstMsg:this.operatorFirstMsg,message:t,parse:d,chatSession:this.chatSession,t:m})).stop().animate({scrollTop:this.$(".chatBoxViewMessage")[0].scrollHeight},400),void 0},closeChat:function(){a()&&socket.emit("chat",{action:"closeChat"})},clickUploadButton:function(){this.$(".uploadPicture").click()},initialize:function(e){this.operatorFirstMsg=!0,this.chatSession=e,this.customData=customData,this.messages=[],this.missedMsg=0;var t=this;s&&$(window).on("resize",function(){t.updateHeight()}),this.on("render",function(){this.$(".uploadPicture").fileupload({url:"/upload/clientImages",dropZone:app.layout.$el,error:function(e){var n=_.clone(t.messages[0]);n.name="System message",413==e.status?n.message=m("The size of attached picture is too large"):"The attachment has to be an image"===e.responseText&&(n.message=m("The attachment has to be an image")),n.sendTime=(new Date).toISOString(),t.addMessage(n)},done:function(e,t){socket.emit("chat",{action:"newMessage",body:"[img=http://"+window.location.host+t.result[0]+"]"})}})},this),this.render()},keyup:function(e){16==e.keyCode&&(w=!1)},keypress:function(e){switch(e.keyCode){case 13:this.shiftdown||(this.$("form").submit(),e.preventDefault());break;case 16:w=!0;break;case 32:socket.emit("chat",{action:"type",body:this.$("textarea").val()})}},submit:function(e){e.preventDefault();var t=this.$("textarea").val();t.length>0&&"\n"!=t&&(socket.emit("chat",{action:"newMessage",body:t}),this.$("textarea").val(""))}}),T=App.View.extend({},{template:e("./chatStartWindow.jade"),events:{"submit form":"submit","click .closeBtn":"closeChat"},initialize:function(e){this.chatSession=e,this.customData=customData,this.messages=[]},closeChat:function(){a()&&app.hideChat()},submit:function(e){e&&e.preventDefault();var t={position:"unknown",name:this.$("#name").val()||app.logingInScreen.$(".userName").val()||app.logingInScreen.$(".email").val()||"Guest",ppcURL:r,isMobile:!1};s&&(t.isMobile=!0),window.location.search&&_.extend(t,app.parseClientData(["name","email","jobID"])),socket.emit("initClient",t,function(e){e&&console.log(e),app.showPreChat(t.name),app.endChatWindow&&app.endChatWindow.$el.hide()})}}),E=App.View.extend({},{template:e("./endChatWindow.jade"),events:{"click    .closeBtn":"closeChat","keypress .startChatInput":"keypress","click    .starBtn":"showRating","click    .startChatAgain":"startChatAgain","click    .emailBtn":"showEmail","click    .stuffWrapper .sendEmail .sendBtn":"sendMail","click    .rates":"rate","click    .minimize":"minimize"},startChatAgain:function(){app.startChatForm.submit()},minimize:function(){var e=window.theme;this.minimized?(this.minimized=!1,app.setFramePosition(app.createCSS("#chatFrame",c)),this.$(".poweredBy").show(),"fantastic"===e.skin?this.$(".headerClientBox").css({height:"40px",padding:"15px","line-height":"15px"}):this.$(".headerClientBox").css({height:"8%",padding:"2% 3% 3% 3%"})):(this.minimized=!0,e.themeCSS.push({"overflow-y":"hidden",selector:".clientBody"}),this.$(".headerClientBox").css({height:"35px",padding:"2% 3% 3% 3%"}),this.$(".poweredBy").hide(),app.setFramePosition(app.createCSS("#chatFrame",u)),app.setThemeCSS(e))},className:"endChatWindow",initialize:function(e){this.customData=customData,this.operator=e,this.rated=p},rate:function(e){var t=$(e.currentTarget).attr("data-rate"),n=this;socket.emit("chat",{action:"rate",body:t},function(e,t){return e?console.log(e):(n.$(".rating ul").fadeOut(200),n.$(".starBtn").css({background:'url("/public/images/icons/starHover.png") no-repeat 0 0px'}),n.rated=p=!0,n.$(".successfullSendedMessage").fadeOut(),setTimeout(function(){n.$(".rating .rated").html(" You rated with "+t).fadeIn()},200),void 0)})},sendMail:function(){var e=this,t=this.$(".stuffWrapper .sendEmail .emailSend"),n=this.$(".stuffWrapper .sendEmail .sendBtn"),i=this.$(".stuffWrapper .sendEmail .successfullSendedMessage");app.mailPattern.test(t.val())?(t.css("border-color","green"),socket.emit("chat",{action:"sendMail",body:t.val()},function(){t.fadeOut(),n.fadeOut(),setTimeout(function(){i.fadeIn()},500),e.isMailSend=!0})):t.css("border-color","red")},showRating:function(){this.rated||(this.shownEmail&&(this.$(".sendEmail").fadeOut(),this.shownEmail=!1),this.shownRate?(this.$(".rating ul").fadeOut(),this.shownRate=!1):(this.$(".rating ul").fadeIn(),this.shownRate=!0))},showEmail:function(){this.isMailSend||(this.rated&&this.$(".rated").fadeOut(),this.shownRate&&(this.$(".rating ul").fadeOut(),this.shownRate=!1),this.shownEmail?(this.$(".sendEmail").fadeOut(),this.shownEmail=!1):(this.$(".sendEmail").fadeIn(),this.shownEmail=!0))},render:function(){var e=this;if(App.View.prototype.render.call(this),app.setFramePosition(app.createCSS("#chatFrame",c)),this.rated&&(this.$(".rating ul").hide(),this.$(".rating .rated").html("Thank you for rating our operator!").show(),e.$(".starBtn").css({background:'url("/public/images/icons/starHover.png") no-repeat 0 0px'})),"fantastic"===window.theme.skin){var t=this.lastMessage.message.split("!")[0]+"!",n=this.lastMessage.message.split("!")[1]+"!";t=t.substr(0,t.indexOf(",")+1)+"<br />"+t.substr(t.indexOf(",")+1),this.$(".thankYouMessage").html(t),this.$(".feelFreeMessage").html(n),this.$(".startChatAgain").css({color:window.theme.themeCSS[0]["border-color"]})}},keypress:function(e){13===e.keyCode&&app.startChatForm.submit(e)},startNewChatSession:function(){app.startChatForm.submit()},closeChat:function(){a()&&app.endChat()}}),N=App.View.extend({},{template:e("./invitation.jade"),customData:customData,className:"invitationShown",events:{"click .invitationBtn":"showChat","click .closeBtn":"hideChat","focus .userName":"LogingInScreenName","focus .email":"LogingInScreenEmail","keypress .startChatInput":"keypress","click .minimize":"minimize","click .ourSignUp":"showChat","click .fb":function(){app.logingIn.faceLog()},"click .gPlus":function(){app.logingIn.gPlus()},"click .carousel-inner img":function(){app.logingInMethod(".userName")}},minimize:function(){var e=window.theme;this.minimized?(this.minimized=!1,"fantastic"===e.skin?this.$(".headerClientBox").css({height:"40px",padding:"15px","line-height":"15px"}):this.$(".headerClientBox").css({height:"8%",padding:"2% 3% 3% 3%"}),app.setFramePosition(app.createCSS("#chatFrame",c)),this.$(".poweredBy").show()):(this.minimized=!0,e.themeCSS.push({"overflow-y":"hidden",selector:".clientBody"}),this.$(".headerClientBox").css({height:"35px",padding:"2% 3% 3% 3%"}),this.$(".poweredBy").hide(),app.setFramePosition(app.createCSS("#chatFrame",u)),app.setThemeCSS(e))},render:function(){App.View.prototype.render.call(this),this.$(".carousel").carousel(),this.customData.slider&&2>this.customData.slider.length&&(this.$(".carousel-control").css({display:"none"}),this.$(".carousel-indicators").css({display:"none"}))},showChat:function(){app.showChat()},hideChat:function(){app.hideChat()},LogingInScreenName:function(){app.logingInMethod(".userName")},LogingInScreenEmail:function(){app.logingInMethod(".email")},keypress:function(e){13===e.keyCode&&app.startChatForm.submit(e)}});new App({initialize:function(){var e=this;if(this.setupPostbackActions(),app=this,app.mailPattern=/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gi,this.preMessages=[],this.pageURL=window.pageURL,this.layout.$el.show(),App.Router.prototype.initialize.apply(this,arguments),this.startChatForm=new T,this.logingInScreen=new S,this.logingInScreen.$el.hide(),app.layout.append(this.logingInScreen),this.typeFlag=0,this.startChatForm=(new T).render(),app.layout.append(this.startChatForm),this.customData=customData,this.minChat=(new k).render(),this.invitationScreen=new N,app.layout.append(this.invitationScreen),g&&(s?this.logingInMethod():app.once("ready",app.logingInScreen.startingChat,app.logingInScreen)),e===top&&this.minChat.showChatWindow(),!s){var t,n=localStorage.lastClosedStamp?Date.now()-parseInt(localStorage.lastClosedStamp):!1;n&&n>9e5?(t=1e3*this.customData.popup,delete localStorage.lastClosedStamp):(delete localStorage.lastClosedStamp,localStorage&&localStorage.invitationTimer?t=9e5:(t=1e3*this.customData.popup,localStorage.invitationTimer=Date.now())),setTimeout(function(){e.showChat()},t),this.layout.$el.addClass("hiddenChat"),this.hideChat()}app.layout.append(this.minChat),this.on("ready",this.bindSocket,this),(window.addEventListener||window.attachEvent)("message",function(t){if(0===e.pageURL.indexOf(t.origin)){var n;if("string"==typeof t.data&&(t.data=JSON.parse(t.data)),t.data._cb)return e.callbacks[t.data._cb]&&e.callbacks[t.data._cb](t.data.error,t.data.body),delete e.callbacks[t.data._cb],void 0;n=t.data.cb?function(n,i){t.source.postMessage({_cb:t.data.cb,body:i,error:n},e.pageURL)}:void 0,e.pageMessage(t.data,t,n)}}),this.sendMessage("getFullURL",{},function(e,t){r=t})},sendPostback:function(e,t){socket.emit("chat",{action:"sendPostBack",body:{payload:e,text:t}})},setupPostbackActions:function(){this.layout.$el.on("click","a.postback-action",function(e){$(e.currentTarget).hasClass("inactive")||($("a.postback-action").addClass("inactive"),this.sendPostback(e.currentTarget.dataset.postback,e.currentTarget.dataset.text))}.bind(this))},parseClientData:function(e){var t=window.location.search;if(!t)return{};var n=_.object(t.replace(/^[?]/,"").split(/[&]/).map(function(e){return e.split("=")}));return _.pick(n,e)},bindSocket:function(){var e=this;socket.on("chat",function(t){e.handler(t)}),socket.on("banned",function(){socket.disconnect()})},frameActions:{showChat:function(){this.showChat()}},pageMessage:function(e,t,n){this.frameActions[e.action]?this.frameActions[e.action].call(this,e.body,n):n&&n("Can't find action")},cb_counter:0,callbacks:{},sendMessage:function(e,t,n){var i={action:e,body:t};if("function"==typeof n){var s="cb_"+this.cb_counter++;i.cb=s,this.callbacks[s]=n}try{window.parent.postMessage(i,this.pageURL)}catch(r){console.warn(r)}},error:function(){},handler:function(e){var n=this;if("paymentForm"===e.action)return localStorage.isChatWindow=!1,localStorage.payment=JSON.stringify(e.body),this.showPaymentForm(e.body);if("changeOperator"===e.action&&(this.chatWindow.chatSession.operator=e.body),"newMessage"===e.action&&this.chatWindow.addMessage(e.body),"startChat"===e.action){x=!0,this.logingInScreen.$el.hide(),this.chatWindow||(this.chatWindow=new j(e.body).render(),app.layout.append(this.chatWindow));var i=this.parseClientData(["obf_parent_url"]);if(!_.isEmpty(i)){var s=i.obf_parent_url;socket.emit("chat",{action:"sendObfParentUrl",body:{obf_parent_url:s}})}app.operator=e.body.operator,app.client=e.body.client,this.showChat(),this.preChat&&this.preChat.$el.hide(),socket.emit("chat",{action:"preMessages",body:this.preMessages}),this.preMessages=[],app.endChatWindow&&app.endChatWindow.$el.hide(),e.body.messages.forEach(function(e){n.chatWindow.addMessage(e)});var r={action:"showChat"};window.parent.postMessage(t?JSON.stringify(r):r,this.pageURL),localStorage.payment&&JSON.parse(localStorage.payment).id===e.body._id&&localStorage.isChatWindow&&"false"===localStorage.isChatWindow&&this.showPaymentForm(JSON.parse(localStorage.payment))}if("type"===e.action&&"client"!=e.body.who){this.typeFlag++;var a=this.typeFlag+0;this.chatWindow.$(".typeIndicator span").show();var n=this;setTimeout(function(){n.typeFlag==a&&n.chatWindow.$(".typeIndicator span").hide()},1e3)}"closeChat"===e.action&&(this.endChatWindow=new E(this.chatWindow.chatSession.operator),this.endChatWindow.lastMessage=_.last(this.chatWindow.messages),this.layout.append(this.endChatWindow),this.minChat.$el.hide(),this.chatWindow.remove(),this.paymentForm&&this.paymentForm.remove(),localStorage.payment&&delete localStorage.payment,delete this.chatWindow),"crm"===e.action&&console.log("TODO: ","perform CRM form")},setThemeCSS:function(e){window.theme=e;var t=this,n=_.map(e.themeCSS,function(e){var n=e.selector,i=_.omit(e,["selector","name"]);return"#chatFrame"!=n?t.createCSS(n,i):void 0}).join(""),i=document.getElementsByTagName("style")[0];i.innerHTML=n,this.layout.$el.hasClass("hiddenChat")&&this.sendMessage("style",_.omit(_.findWhere(e,{selector:"#chatFrame"}),"selector"))},createCSS:function(e,t){var n="";for(key in t)n+=key+":"+t[key]+";";return e+"{"+n+"}"},setFramePosition:function(e){var n={action:"style",body:e||this.createCSS("#chatFrame",c)};window.parent.postMessage(t?JSON.stringify(n):n,this.pageURL)},showPaymentForm:function(e){this.chatWindow.$el.hide(),this.paymentForm&&(this.paymentForm.remove(),delete this.paymentForm),this.paymentForm=new D(e),this.layout.append(this.paymentForm)},showChat:function(){x=!0,(this.chatWindow||this.logingInScreen).$el.show(),this.layout.$el.removeClass("hiddenChat"),this.minChat&&this.minChat.$el.hide(),this.invitationScreen&&this.invitationScreen.$el.hide(),this.layout.$el.addClass("shownChat"),this.setFramePosition(this.createCSS("#chatFrame",c))},showPreChat:function(e){this.layout.$el.removeClass("hiddenChat"),this.preChat=new C({message:app.invitationScreen.$("textarea").val()||app.logingInScreen.$("textarea").val(),name:e||app.invitationScreen.$(".userName").val()||app.logingInScreen.$(".userName").val()||"Guest"}),app.layout.append(this.preChat),(this.chatWindow||this.startChatForm).$el.hide(),this.invitationScreen&&this.invitationScreen.$el.hide(),this.logingInScreen&&this.logingInScreen.$el.hide(),this.minChat.render().$el.hide(),this.layout.$el.removeClass("invitationShown"),this.layout.$el.addClass("chatWindow"),this.preChat.$el.show(),this.endChatWindow&&this.endChatWindow.$el.hide()},showInvitation:function(){x||(this.sendMessage("trackEvent","invitation"),this.invitationScreen.$el.show(),this.minChat.$el.hide(),this.layout.$el.removeClass("hiddenChat"),this.setFramePosition(this.createCSS("#chatFrame",c)),socket.emit("invitation",window.location.href.replace(window.location.protocol+"//"+window.location.host,"")))},logingInMethod:function(e){(this.chatWindow||this.startChatForm).$el.hide(),this.Form&&this.Form.$el.hide(),this.layout.$el.removeClass("hiddenChat"),this.invitationScreen&&this.invitationScreen.$el.hide(),this.layout.$el.removeClass("shownChat"),this.logingInScreen.$el.show(),this.layout.$el.addClass("logingInScreen"),this.layout.$(e).focus()},hideChat:function(){(this.chatWindow||this.startChatForm).$el.hide(),this.invitationScreen&&this.invitationScreen.$el.hide(),this.logingInScreen&&this.logingInScreen.$el.hide(),this.layout.$el.removeClass("shownChat"),this.layout.$el.addClass("hiddenChat"),this.minChat.render().$el.show(),this.chatWindow&&this.chatWindow.$el.hide(),this.preChat&&this.preChat.$el.hide()},endChat:function(){x=!1,(this.chatWindow||this.startChatForm).$el.hide(),this.invitationScreen&&this.invitationScreen.$el.hide(),this.layout.$el.removeClass("shownChat"),this.endChatWindow.$el.hide(),this.layout.$el.addClass("hiddenChat"),this.minChat.render().$el.show()},loadStripeScript:function(e){return this.stripeLoaded?e():(document.body.appendChild(_.extend(document.createElement("script"),{src:"https://js.stripe.com/v2/",onload:e})),this.stripeLoaded=!0,void 0)}});var A=App.Model.extend({},{validate:function(){return void 0}}),D=App.View.extend({},{className:"payment-form",template:e("./PaymentForm.jade"),events:{"click .closeBtn":"remove","click .goBack":"remove","click .goBackToChat":"goBackToChat","click .goBackToPayment":"goBackToPayment","click .confirmPayment":"confirmPayment","keyup .cardNumberField":"typeCardNumber"},validations:{".cardHolder":/^[A-Za-z\s]{5,20}$/,".cardNumberField":/^\d{4}\s\d{4}\s\d{4}\s\d{4}$/,".cardCvcNumber":/^\d{3,4}$/,".expirationDate .month":/^\d{1,2}$/,".expirationDate .year":/^\d{4}$/},initialize:function(e){var t=this;for(this.service=e.service,this.paymentProviderId=e.paymentProvider.id,this.currentYear=(new Date).getFullYear(),this.expirateYears=[],this.expirateYears.push(this.currentYear),i=0;11>i;i++)this.currentYear++,this.expirateYears.push(this.currentYear);app.loadStripeScript(function(){Stripe.setPublishableKey(e.paymentProvider.key),t.stripeScriptLoaded=!0,t.render()}),this.once("remove",function(){return this.result&&this.result.success?(app.chatWindow.$el.show(),app.chatWindow.render(),void 0):(this.closePayment(),void 0)})},validate:function(){var e=!1;for(var t in this.validations){var n=this.validations[t],i=this.$(t);n.test(i.val())?i.css({"border-color":"#ccc"}):(e=!0,i.css({"border-color":"red"}))}return e},confirmPayment:function(e){var t=this;this.validate()||($(e.currentTarget).html("<i class='glyphicon glyphicon-refresh rotationIcon'></i> Processing...").addClass("disabled"),Stripe.card.createToken({number:parseInt(this.$(".cardNumberField").val().replace(/\s/g,"")),cvc:parseInt(this.$(".cardCvcNumber").val()),exp_month:parseInt(this.$(".expirationDate .month").val()),exp_year:parseInt(this.$(".expirationDate .year").val()),name:this.$(".cardHolder").val()},function(e,n){return 200!==e?(_.map(v,function(e,i){i===n.error.code&&(socket.emit("chat",{action:"rejectPaymentForm",body:{key:"error",msg:e+" The payment process continues.",bookingRefNum:t.service.ref_num}}),t.result={error:e})}),t.render()):(socket.emit("chat",{action:"submitPaymentForm",body:{cardToken:n.id,bookingId:t.service.id,bookingRefNum:t.service.ref_num,paymentProviderId:t.paymentProviderId}},function(e){return e?(t.result={error:e},t.render()):(localStorage.payment&&delete localStorage.payment,localStorage.isChatWindow&&delete localStorage.isChatWindow,t.result={success:!0},t.render(),void 0)}),void 0)}))},goBackToPayment:function(){return delete this.result,this.render()},goBackToChat:function(){localStorage.isChatWindow=!0,this.$el.hide(),app.showChat()},typeCardNumber:function(e){var t=e.target.value.replace(/\s/g,""),n=t.length;if(!(/^\d+$/.test(t)&&19>=t.length))return $(".cardNumberField").css("border-color","red"),!1;if($(".cardNumberField").css("border-color","#ccc"),t=t.substr(0,16),n=t.length,8==e.keyCode||37===e.keyCode||39===e.keyCode)return e.preventDefault(),!1;switch(!0){case n>=4&&8>n:/\d{4}/.test(t)&&(e.target.value=t.substr(0,4)+" "+t.substr(4));break;case n>=8&&12>n:/\d{8}/.test(t)&&(e.target.value=t.substr(0,4)+" "+t.substr(4,4)+" "+t.substr(8));break;case n>=12&&16>=n:/\d{12}/.test(t)&&(e.target.value=t.substr(0,4)+" "+t.substr(4,4)+" "+t.substr(8,4)+" "+t.substr(12))}},closePayment:function(){var e=[];e=this.result&&this.result.error?{key:"error",msg:"The payment form has been dismissed with error: '"+this.result.error+"'"}:{key:"dismiss",msg:"The payment form has been dismissed!"},e.bookingRefNum=this.service.ref_num,socket.emit("chat",{action:"rejectPaymentForm",body:e},function(e){return localStorage.payment&&delete localStorage.payment,localStorage.isChatWindow&&delete localStorage.isChatWindow,e?(self.result={error:e},self.render()):(app.chatWindow.$el.show(),app.chatWindow.render(),void 0)})},render:function(){return App.View.prototype.render.call(this),_.map(window.theme.themeCSS,function(e){".primary-color"===e.selector&&($(".paymentFormHeader .goBackToChat").css("color",e["background-color"]),$(".paymentReasonValue").css("color",e["background-color"]),$(".confirmPayment").css("background-color",e["background-color"]),$(".paymentMessage strong").css("color",e["background-color"])),".headerClientBox"===e.selector&&$(".confirmPayment").css("color",e.color)}),this}})}),require("/client/app/client/client.js")})();